{"version":3,"file":"react-query.development.js","sources":["../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../node_modules/@babel/runtime/helpers/esm/extends.js","../src/core/utils.ts","../src/core/notifyManager.ts","../src/core/logger.ts","../src/core/subscribable.ts","../src/core/focusManager.ts","../src/core/onlineManager.ts","../src/core/retryer.ts","../src/core/query.ts","../src/core/queryCache.ts","../src/core/mutation.ts","../src/core/mutationCache.ts","../src/core/queryClient.ts","../src/core/queryObserver.ts","../src/core/queriesObserver.ts","../src/core/infiniteQueryBehavior.ts","../src/core/infiniteQueryObserver.ts","../src/core/mutationObserver.ts","../src/react/QueryClientProvider.tsx","../src/react/QueryErrorResetBoundary.tsx","../src/react/useIsFetching.ts","../src/react/useMutation.ts","../src/react/useBaseQuery.ts","../src/react/useQuery.ts","../src/react/useQueries.ts","../src/react/useInfiniteQuery.ts"],"sourcesContent":["export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import type { Query } from './query'\nimport type {\n  MutationFunction,\n  MutationKey,\n  MutationOptions,\n  QueryFunction,\n  QueryKey,\n  QueryKeyHashFunction,\n  QueryOptions,\n  QueryStatus,\n} from './types'\n\n// TYPES\n\nexport interface QueryFilters {\n  /**\n   * Include or exclude active queries\n   */\n  active?: boolean\n  /**\n   * Match query key exactly\n   */\n  exact?: boolean\n  /**\n   * Include or exclude inactive queries\n   */\n  inactive?: boolean\n  /**\n   * Include queries matching this predicate function\n   */\n  predicate?: (query: Query) => boolean\n  /**\n   * Include queries matching this query key\n   */\n  queryKey?: QueryKey\n  /**\n   * Include or exclude stale queries\n   */\n  stale?: boolean\n  /**\n   * Include or exclude fetching queries\n   */\n  fetching?: boolean\n}\n\nexport type DataUpdateFunction<TInput, TOutput> = (input: TInput) => TOutput\n\nexport type Updater<TInput, TOutput> =\n  | TOutput\n  | DataUpdateFunction<TInput, TOutput>\n\n// UTILS\n\nexport const isServer = typeof window === 'undefined'\n\nexport function noop(): undefined {\n  return undefined\n}\n\nexport function functionalUpdate<TInput, TOutput>(\n  updater: Updater<TInput, TOutput>,\n  input: TInput\n): TOutput {\n  return typeof updater === 'function'\n    ? (updater as DataUpdateFunction<TInput, TOutput>)(input)\n    : updater\n}\n\nexport function isValidTimeout(value: any): value is number {\n  return typeof value === 'number' && value >= 0 && value !== Infinity\n}\n\nexport function ensureArray<T>(value: T | T[]): T[] {\n  return Array.isArray(value) ? value : [value]\n}\n\nexport function difference<T>(array1: T[], array2: T[]): T[] {\n  return array1.filter(x => array2.indexOf(x) === -1)\n}\n\nexport function replaceAt<T>(array: T[], index: number, value: T): T[] {\n  const copy = array.slice(0)\n  copy[index] = value\n  return copy\n}\n\nexport function timeUntilStale(updatedAt: number, staleTime?: number): number {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0)\n}\n\nexport function parseQueryArgs<TOptions extends QueryOptions<any, any, any>>(\n  arg1: QueryKey | TOptions,\n  arg2?: QueryFunction<any> | TOptions,\n  arg3?: TOptions\n): TOptions {\n  if (!isQueryKey(arg1)) {\n    return arg1 as TOptions\n  }\n\n  if (typeof arg2 === 'function') {\n    return { ...arg3, queryKey: arg1, queryFn: arg2 } as TOptions\n  }\n\n  return { ...arg2, queryKey: arg1 } as TOptions\n}\n\nexport function parseMutationArgs<\n  TOptions extends MutationOptions<any, any, any, any>\n>(\n  arg1: MutationKey | MutationFunction<any, any> | TOptions,\n  arg2?: MutationFunction<any, any> | TOptions,\n  arg3?: TOptions\n): TOptions {\n  if (isQueryKey(arg1)) {\n    if (typeof arg2 === 'function') {\n      return { ...arg3, mutationKey: arg1, mutationFn: arg2 } as TOptions\n    }\n    return { ...arg2, mutationKey: arg1 } as TOptions\n  }\n\n  if (typeof arg1 === 'function') {\n    return { ...arg2, mutationFn: arg1 } as TOptions\n  }\n\n  return { ...arg1 } as TOptions\n}\n\nexport function parseFilterArgs<\n  TFilters extends QueryFilters,\n  TOptions = unknown\n>(\n  arg1?: QueryKey | TFilters,\n  arg2?: TFilters | TOptions,\n  arg3?: TOptions\n): [TFilters, TOptions | undefined] {\n  return (isQueryKey(arg1)\n    ? [{ ...arg2, queryKey: arg1 }, arg3]\n    : [arg1 || {}, arg2]) as [TFilters, TOptions]\n}\n\nexport function matchQuery(\n  filters: QueryFilters,\n  query: Query<any, any>\n): boolean {\n  const {\n    active,\n    exact,\n    fetching,\n    inactive,\n    predicate,\n    queryKey,\n    stale,\n  } = filters\n\n  if (isQueryKey(queryKey)) {\n    if (exact) {\n      const hashFn = getQueryKeyHashFn(query.options)\n      if (query.queryHash !== hashFn(queryKey)) {\n        return false\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false\n    }\n  }\n\n  let isActive\n\n  if (inactive === false || (active && !inactive)) {\n    isActive = true\n  } else if (active === false || (inactive && !active)) {\n    isActive = false\n  }\n\n  if (typeof isActive === 'boolean' && query.isActive() !== isActive) {\n    return false\n  }\n\n  if (typeof stale === 'boolean' && query.isStale() !== stale) {\n    return false\n  }\n\n  if (typeof fetching === 'boolean' && query.isFetching() !== fetching) {\n    return false\n  }\n\n  if (predicate && !predicate(query)) {\n    return false\n  }\n\n  return true\n}\n\nexport function getQueryKeyHashFn(\n  options?: QueryOptions<any, any>\n): QueryKeyHashFunction {\n  return options?.queryKeyHashFn || hashQueryKey\n}\n\n/**\n * Default query keys hash function.\n */\nexport function hashQueryKey(queryKey: QueryKey): string {\n  return stableValueHash(queryKey)\n}\n\n/**\n * Hashes the value into a stable hash.\n */\nexport function stableValueHash(value: any): string {\n  return JSON.stringify(value, (_, val) =>\n    isPlainObject(val)\n      ? Object.keys(val)\n          .sort()\n          .reduce((result, key) => {\n            result[key] = val[key]\n            return result\n          }, {} as any)\n      : val\n  )\n}\n\n/**\n * Checks if key `b` partially matches with key `a`.\n */\nexport function partialMatchKey(\n  a: string | unknown[],\n  b: string | unknown[]\n): boolean {\n  return partialDeepEqual(ensureArray(a), ensureArray(b))\n}\n\n/**\n * Checks if `b` partially matches with `a`.\n */\nexport function partialDeepEqual(a: any, b: any): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object' && typeof b === 'object') {\n    return !Object.keys(b).some(key => !partialDeepEqual(a[key], b[key]))\n  }\n\n  return false\n}\n\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nexport function replaceEqualDeep<T>(a: unknown, b: T): T\nexport function replaceEqualDeep(a: any, b: any): any {\n  if (a === b) {\n    return a\n  }\n\n  const array = Array.isArray(a) && Array.isArray(b)\n\n  if (array || (isPlainObject(a) && isPlainObject(b))) {\n    const aSize = array ? a.length : Object.keys(a).length\n    const bItems = array ? b : Object.keys(b)\n    const bSize = bItems.length\n    const copy: any = array ? [] : {}\n\n    let equalItems = 0\n\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i]\n      copy[key] = replaceEqualDeep(a[key], b[key])\n      if (copy[key] === a[key]) {\n        equalItems++\n      }\n    }\n\n    return aSize === bSize && equalItems === aSize ? a : copy\n  }\n\n  return b\n}\n\n/**\n * Shallow compare objects. Only works with objects that always have the same properties.\n */\nexport function shallowEqualObjects<T>(a: T, b: T): boolean {\n  if ((a && !b) || (b && !a)) {\n    return false\n  }\n\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false\n    }\n  }\n\n  return true\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nexport function isPlainObject(o: any): o is Object {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has modified constructor\n  const ctor = o.constructor\n  if (typeof ctor === 'undefined') {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any): boolean {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport function isQueryKey(value: any): value is QueryKey {\n  return typeof value === 'string' || Array.isArray(value)\n}\n\nexport function isError(value: any): value is Error {\n  return value instanceof Error\n}\n\nexport function sleep(timeout: number): Promise<void> {\n  return new Promise(resolve => {\n    setTimeout(resolve, timeout)\n  })\n}\n\nexport function getStatusProps<T extends QueryStatus>(status: T) {\n  return {\n    status,\n    isLoading: status === 'loading',\n    isSuccess: status === 'success',\n    isError: status === 'error',\n    isIdle: status === 'idle',\n  }\n}\n\n/**\n * Schedules a microtask.\n * This can be useful to schedule state updates after rendering.\n */\nexport function scheduleMicrotask(callback: () => void): void {\n  Promise.resolve()\n    .then(callback)\n    .catch(error =>\n      setTimeout(() => {\n        throw error\n      })\n    )\n}\n","import { scheduleMicrotask } from './utils'\n\n// TYPES\n\ntype NotifyCallback = () => void\n\ntype NotifyFunction = (callback: () => void) => void\n\ntype BatchNotifyFunction = (callback: () => void) => void\n\n// CLASS\n\nclass NotifyManager {\n  private queue: NotifyCallback[]\n  private transactions: number\n  private notifyFn: NotifyFunction\n  private batchNotifyFn: BatchNotifyFunction\n\n  constructor() {\n    this.queue = []\n    this.transactions = 0\n\n    this.notifyFn = (callback: () => void) => {\n      callback()\n    }\n\n    this.batchNotifyFn = (callback: () => void) => {\n      callback()\n    }\n  }\n\n  batch<T>(callback: () => T): T {\n    this.transactions++\n    const result = callback()\n    this.transactions--\n    if (!this.transactions) {\n      this.flush()\n    }\n    return result\n  }\n\n  schedule(callback: NotifyCallback): void {\n    if (this.transactions) {\n      this.queue.push(callback)\n    } else {\n      scheduleMicrotask(() => {\n        this.notifyFn(callback)\n      })\n    }\n  }\n\n  /**\n   * All calls to the wrapped function will be batched.\n   */\n  batchCalls<T extends Function>(callback: T): T {\n    return ((...args: any[]) => {\n      this.schedule(() => {\n        callback(...args)\n      })\n    }) as any\n  }\n\n  flush(): void {\n    const queue = this.queue\n    this.queue = []\n    if (queue.length) {\n      scheduleMicrotask(() => {\n        this.batchNotifyFn(() => {\n          queue.forEach(callback => {\n            this.notifyFn(callback)\n          })\n        })\n      })\n    }\n  }\n\n  /**\n   * Use this method to set a custom notify function.\n   * This can be used to for example wrap notifications with `React.act` while running tests.\n   */\n  setNotifyFunction(fn: NotifyFunction) {\n    this.notifyFn = fn\n  }\n\n  /**\n   * Use this method to set a custom function to batch notifications together into a single tick.\n   * By default React Query will use the batch function provided by ReactDOM or React Native.\n   */\n  setBatchNotifyFunction(fn: BatchNotifyFunction) {\n    this.batchNotifyFn = fn\n  }\n}\n\n// SINGLETON\n\nexport const notifyManager = new NotifyManager()\n","import { noop } from './utils'\n\n// TYPES\n\nexport interface Logger {\n  log: LogFunction\n  warn: LogFunction\n  error: LogFunction\n}\n\ntype LogFunction = (...args: any[]) => void\n\n// FUNCTIONS\n\nlet logger: Logger = console || {\n  error: noop,\n  warn: noop,\n  log: noop,\n}\n\nexport function getLogger(): Logger {\n  return logger\n}\n\nexport function setLogger(newLogger: Logger) {\n  logger = newLogger\n}\n","type Listener = () => void\n\nexport class Subscribable<TListener extends Function = Listener> {\n  protected listeners: TListener[]\n\n  constructor() {\n    this.listeners = []\n  }\n\n  subscribe(listener?: TListener): () => void {\n    const callback = listener || (() => undefined)\n\n    this.listeners.push(callback as TListener)\n\n    this.onSubscribe()\n\n    return () => {\n      this.listeners = this.listeners.filter(x => x !== callback)\n      this.onUnsubscribe()\n    }\n  }\n\n  hasListeners(): boolean {\n    return this.listeners.length > 0\n  }\n\n  protected onSubscribe(): void {\n    // Do nothing\n  }\n\n  protected onUnsubscribe(): void {\n    // Do nothing\n  }\n}\n","import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\nclass FocusManager extends Subscribable {\n  private focused?: boolean\n  private removeEventListener?: () => void\n\n  protected onSubscribe(): void {\n    if (!this.removeEventListener) {\n      this.setDefaultEventListener()\n    }\n  }\n\n  setEventListener(\n    setup: (onFocus: () => void) => (focused?: boolean) => void\n  ): void {\n    if (this.removeEventListener) {\n      this.removeEventListener()\n    }\n    this.removeEventListener = setup((focused?: boolean) => {\n      if (typeof focused === 'boolean') {\n        this.setFocused(focused)\n      } else {\n        this.onFocus()\n      }\n    })\n  }\n\n  setFocused(focused?: boolean): void {\n    this.focused = focused\n\n    if (focused) {\n      this.onFocus()\n    }\n  }\n\n  onFocus(): void {\n    this.listeners.forEach(listener => {\n      listener()\n    })\n  }\n\n  isFocused(): boolean {\n    if (typeof this.focused === 'boolean') {\n      return this.focused\n    }\n\n    // document global can be unavailable in react native\n    if (typeof document === 'undefined') {\n      return true\n    }\n\n    return [undefined, 'visible', 'prerender'].includes(\n      document.visibilityState\n    )\n  }\n\n  private setDefaultEventListener() {\n    if (!isServer && window?.addEventListener) {\n      this.setEventListener(onFocus => {\n        // Listen to visibillitychange and focus\n        window.addEventListener('visibilitychange', onFocus, false)\n        window.addEventListener('focus', onFocus, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('visibilitychange', onFocus)\n          window.removeEventListener('focus', onFocus)\n        }\n      })\n    }\n  }\n}\n\nexport const focusManager = new FocusManager()\n","import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\nclass OnlineManager extends Subscribable {\n  private online?: boolean\n  private removeEventListener?: () => void\n\n  protected onSubscribe(): void {\n    if (!this.removeEventListener) {\n      this.setDefaultEventListener()\n    }\n  }\n\n  setEventListener(\n    setup: (setOnline: () => void) => (online?: boolean) => void\n  ): void {\n    if (this.removeEventListener) {\n      this.removeEventListener()\n    }\n    this.removeEventListener = setup((online?: boolean) => {\n      if (typeof online === 'boolean') {\n        this.setOnline(online)\n      } else {\n        this.onOnline()\n      }\n    })\n  }\n\n  setOnline(online?: boolean): void {\n    this.online = online\n\n    if (online) {\n      this.onOnline()\n    }\n  }\n\n  onOnline(): void {\n    this.listeners.forEach(listener => {\n      listener()\n    })\n  }\n\n  isOnline(): boolean {\n    if (typeof this.online === 'boolean') {\n      return this.online\n    }\n\n    return navigator.onLine === undefined || navigator.onLine\n  }\n\n  private setDefaultEventListener() {\n    if (!isServer && window?.addEventListener) {\n      this.setEventListener(onOnline => {\n        // Listen to online\n        window.addEventListener('online', onOnline, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('online', onOnline)\n        }\n      })\n    }\n  }\n}\n\nexport const onlineManager = new OnlineManager()\n","import { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { functionalUpdate, sleep } from './utils'\n\n// TYPES\n\ninterface RetryerConfig<TData = unknown, TError = unknown> {\n  fn: () => TData | Promise<TData>\n  onFail?: (failureCount: number, error: TError) => void\n  onPause?: () => void\n  onContinue?: () => void\n  retry?: RetryValue<TError>\n  retryDelay?: RetryDelayValue\n}\n\nexport type RetryValue<TError> = boolean | number | ShouldRetryFunction<TError>\n\ntype ShouldRetryFunction<TError = unknown> = (\n  failureCount: number,\n  error: TError\n) => boolean\n\nexport type RetryDelayValue = number | RetryDelayFunction\n\ntype RetryDelayFunction = (failureCount: number) => number\n\nfunction defaultRetryDelay(failureCount: number) {\n  return Math.min(1000 * 2 ** failureCount, 30000)\n}\n\ninterface Cancelable {\n  cancel(): void\n}\n\nfunction isCancelable(value: any): value is Cancelable {\n  return typeof value?.cancel === 'function'\n}\n\nexport interface CancelOptions {\n  revert?: boolean\n  silent?: boolean\n}\n\nexport class CancelledError {\n  revert?: boolean\n  silent?: boolean\n  constructor(options?: CancelOptions) {\n    this.revert = options?.revert\n    this.silent = options?.silent\n  }\n}\n\nexport function isCancelledError(value: any): value is CancelledError {\n  return value instanceof CancelledError\n}\n\n// CLASS\n\nexport class Retryer<TData = unknown, TError = unknown> {\n  cancel: (options?: CancelOptions) => void\n  cancelRetry: () => void\n  continue: () => void\n  failureCount: number\n  isPaused: boolean\n  isResolved: boolean\n  isTransportCancelable: boolean\n  promise: Promise<TData>\n\n  constructor(config: RetryerConfig<TData, TError>) {\n    let cancelRetry = false\n    let cancelFn: ((options?: CancelOptions) => void) | undefined\n    let continueFn: ((value?: unknown) => void) | undefined\n    let promiseResolve: (data: TData) => void\n    let promiseReject: (error: TError) => void\n\n    this.cancel = cancelOptions => cancelFn?.(cancelOptions)\n    this.cancelRetry = () => {\n      cancelRetry = true\n    }\n    this.continue = () => continueFn?.()\n    this.failureCount = 0\n    this.isPaused = false\n    this.isResolved = false\n    this.isTransportCancelable = false\n    this.promise = new Promise<TData>((outerResolve, outerReject) => {\n      promiseResolve = outerResolve\n      promiseReject = outerReject\n    })\n\n    const resolve = (value: any) => {\n      this.isResolved = true\n      continueFn?.()\n      promiseResolve(value)\n    }\n\n    const reject = (value: any) => {\n      this.isResolved = true\n      continueFn?.()\n      promiseReject(value)\n    }\n\n    const pause = () => {\n      return new Promise(continueResolve => {\n        continueFn = continueResolve\n        this.isPaused = true\n        config.onPause?.()\n      }).then(() => {\n        continueFn = undefined\n        this.isPaused = false\n        config.onContinue?.()\n      })\n    }\n\n    // Create loop function\n    const run = () => {\n      // Do nothing if already resolved\n      if (this.isResolved) {\n        return\n      }\n\n      let promiseOrValue: any\n\n      // Execute query\n      try {\n        promiseOrValue = config.fn()\n      } catch (error) {\n        promiseOrValue = Promise.reject(error)\n      }\n\n      // Create callback to cancel this fetch\n      cancelFn = cancelOptions => {\n        reject(new CancelledError(cancelOptions))\n\n        // Cancel transport if supported\n        if (isCancelable(promiseOrValue)) {\n          try {\n            promiseOrValue.cancel()\n          } catch {}\n        }\n      }\n\n      // Check if the transport layer support cancellation\n      this.isTransportCancelable = isCancelable(promiseOrValue)\n\n      Promise.resolve(promiseOrValue)\n        .then(resolve)\n        .catch(error => {\n          // Stop if the fetch is already resolved\n          if (this.isResolved) {\n            return\n          }\n\n          // Do we need to retry the request?\n          const retry = config.retry ?? 3\n          const retryDelay = config.retryDelay ?? defaultRetryDelay\n          const delay = functionalUpdate(retryDelay, this.failureCount) || 0\n          const shouldRetry =\n            retry === true ||\n            (typeof retry === 'number' && this.failureCount < retry) ||\n            (typeof retry === 'function' && retry(this.failureCount, error))\n\n          if (cancelRetry || !shouldRetry) {\n            // We are done if the query does not need to be retried\n            reject(error)\n            return\n          }\n\n          this.failureCount++\n\n          // Notify on fail\n          config.onFail?.(this.failureCount, error)\n\n          // Delay\n          sleep(delay)\n            // Pause if the document is not visible or when the device is offline\n            .then(() => {\n              if (!focusManager.isFocused() || !onlineManager.isOnline()) {\n                return pause()\n              }\n            })\n            .then(() => {\n              if (cancelRetry) {\n                reject(error)\n              } else {\n                run()\n              }\n            })\n        })\n    }\n\n    // Start loop\n    run()\n  }\n}\n","import {\n  Updater,\n  ensureArray,\n  functionalUpdate,\n  isValidTimeout,\n  noop,\n  replaceEqualDeep,\n  timeUntilStale,\n} from './utils'\nimport type {\n  InitialDataFunction,\n  QueryKey,\n  QueryOptions,\n  QueryStatus,\n  QueryFunctionContext,\n} from './types'\nimport type { QueryCache } from './queryCache'\nimport type { QueryObserver } from './queryObserver'\nimport { notifyManager } from './notifyManager'\nimport { getLogger } from './logger'\nimport { Retryer, CancelOptions, isCancelledError } from './retryer'\n\n// TYPES\n\ninterface QueryConfig<TData, TError, TQueryFnData> {\n  cache: QueryCache\n  queryKey: QueryKey\n  queryHash: string\n  options?: QueryOptions<TData, TError, TQueryFnData>\n  defaultOptions?: QueryOptions<TData, TError, TQueryFnData>\n  state?: QueryState<TData, TError>\n}\n\nexport interface QueryState<TData = unknown, TError = unknown> {\n  data: TData | undefined\n  dataUpdateCount: number\n  dataUpdatedAt: number\n  error: TError | null\n  errorUpdateCount: number\n  errorUpdatedAt: number\n  fetchFailureCount: number\n  fetchMeta: any\n  isFetching: boolean\n  isInvalidated: boolean\n  isPaused: boolean\n  status: QueryStatus\n}\n\nexport interface FetchContext<TData, TError, TQueryFnData> {\n  fetchFn: () => unknown | Promise<unknown>\n  fetchOptions?: FetchOptions\n  options: QueryOptions<TData, TError, TQueryFnData>\n  queryKey: QueryKey\n  state: QueryState<TData, TError>\n}\n\nexport interface QueryBehavior<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData\n> {\n  onFetch: (context: FetchContext<TData, TError, TQueryFnData>) => void\n}\n\nexport interface FetchOptions {\n  cancelRefetch?: boolean\n  meta?: any\n}\n\nexport interface SetDataOptions {\n  updatedAt?: number\n}\n\ninterface FailedAction {\n  type: 'failed'\n}\n\ninterface FetchAction {\n  type: 'fetch'\n  meta?: any\n}\n\ninterface SuccessAction<TData> {\n  data: TData | undefined\n  type: 'success'\n  dataUpdatedAt?: number\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface InvalidateAction {\n  type: 'invalidate'\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\ninterface SetStateAction<TData, TError> {\n  type: 'setState'\n  state: QueryState<TData, TError>\n}\n\nexport type Action<TData, TError> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction\n  | FetchAction\n  | InvalidateAction\n  | PauseAction\n  | SetStateAction<TData, TError>\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Query<TData = unknown, TError = unknown, TQueryFnData = TData> {\n  queryKey: QueryKey\n  queryHash: string\n  options!: QueryOptions<TData, TError, TQueryFnData>\n  initialState: QueryState<TData, TError>\n  state: QueryState<TData, TError>\n  cacheTime!: number\n\n  private cache: QueryCache\n  private promise?: Promise<TData>\n  private gcTimeout?: number\n  private retryer?: Retryer<unknown, TError>\n  private observers: QueryObserver<any, any, any, any>[]\n  private defaultOptions?: QueryOptions<TData, TError, TQueryFnData>\n\n  constructor(config: QueryConfig<TData, TError, TQueryFnData>) {\n    this.defaultOptions = config.defaultOptions\n    this.setOptions(config.options)\n    this.observers = []\n    this.cache = config.cache\n    this.queryKey = config.queryKey\n    this.queryHash = config.queryHash\n    this.initialState = config.state || this.getDefaultState(this.options)\n    this.state = this.initialState\n    this.scheduleGc()\n  }\n\n  private setOptions(\n    options?: QueryOptions<TData, TError, TQueryFnData>\n  ): void {\n    this.options = { ...this.defaultOptions, ...options }\n\n    // Default to 5 minutes if not cache time is set\n    this.cacheTime = Math.max(\n      this.cacheTime || 0,\n      this.options.cacheTime ?? 5 * 60 * 1000\n    )\n  }\n\n  setDefaultOptions(options: QueryOptions<TData, TError, TQueryFnData>): void {\n    this.defaultOptions = options\n  }\n\n  private scheduleGc(): void {\n    this.clearGcTimeout()\n\n    if (isValidTimeout(this.cacheTime)) {\n      this.gcTimeout = setTimeout(() => {\n        if (!this.observers.length) {\n          this.cache.remove(this)\n        }\n      }, this.cacheTime)\n    }\n  }\n\n  private clearGcTimeout() {\n    clearTimeout(this.gcTimeout)\n    this.gcTimeout = undefined\n  }\n\n  setData(\n    updater: Updater<TData | undefined, TData>,\n    options?: SetDataOptions\n  ): TData {\n    const prevData = this.state.data\n\n    // Get the new data\n    let data = functionalUpdate(updater, prevData)\n\n    // Use prev data if an isDataEqual function is defined and returns `true`\n    if (this.options.isDataEqual?.(prevData, data)) {\n      data = prevData as TData\n    } else if (this.options.structuralSharing !== false) {\n      // Structurally share data between prev and new data if needed\n      data = replaceEqualDeep(prevData, data)\n    }\n\n    // Set data and mark it as cached\n    this.dispatch({\n      data,\n      type: 'success',\n      dataUpdatedAt: options?.updatedAt,\n    })\n\n    return data\n  }\n\n  setState(state: QueryState<TData, TError>): void {\n    this.dispatch({ type: 'setState', state })\n  }\n\n  cancel(options?: CancelOptions): Promise<void> {\n    const promise = this.promise\n    this.retryer?.cancel(options)\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve()\n  }\n\n  destroy(): void {\n    this.clearGcTimeout()\n    this.cancel()\n  }\n\n  reset(): void {\n    this.destroy()\n    this.setState(this.initialState)\n  }\n\n  isActive(): boolean {\n    return this.observers.some(observer => observer.options.enabled !== false)\n  }\n\n  isFetching(): boolean {\n    return this.state.isFetching\n  }\n\n  isStale(): boolean {\n    return (\n      this.state.isInvalidated ||\n      !this.state.dataUpdatedAt ||\n      this.observers.some(observer => observer.getCurrentResult().isStale)\n    )\n  }\n\n  isStaleByTime(staleTime = 0): boolean {\n    return (\n      this.state.isInvalidated ||\n      !this.state.dataUpdatedAt ||\n      !timeUntilStale(this.state.dataUpdatedAt, staleTime)\n    )\n  }\n\n  onFocus(): void {\n    const observer = this.observers.find(x => x.willFetchOnWindowFocus())\n\n    if (observer) {\n      observer.refetch()\n    }\n\n    // Continue fetch if currently paused\n    this.retryer?.continue()\n  }\n\n  onOnline(): void {\n    const observer = this.observers.find(x => x.willFetchOnReconnect())\n\n    if (observer) {\n      observer.refetch()\n    }\n\n    // Continue fetch if currently paused\n    this.retryer?.continue()\n  }\n\n  addObserver(observer: QueryObserver<any, any, any, any>): void {\n    if (this.observers.indexOf(observer) === -1) {\n      this.observers.push(observer)\n\n      // Stop the query from being garbage collected\n      this.clearGcTimeout()\n\n      this.cache.notify(this)\n    }\n  }\n\n  removeObserver(observer: QueryObserver<any, any, any, any>): void {\n    if (this.observers.indexOf(observer) !== -1) {\n      this.observers = this.observers.filter(x => x !== observer)\n\n      if (!this.observers.length) {\n        // If the transport layer does not support cancellation\n        // we'll let the query continue so the result can be cached\n        if (this.retryer) {\n          if (this.retryer.isTransportCancelable) {\n            this.retryer.cancel()\n          } else {\n            this.retryer.cancelRetry()\n          }\n        }\n\n        if (this.cacheTime) {\n          this.scheduleGc()\n        } else {\n          this.cache.remove(this)\n        }\n      }\n\n      this.cache.notify(this)\n    }\n  }\n\n  invalidate(): void {\n    if (!this.state.isInvalidated) {\n      this.dispatch({ type: 'invalidate' })\n    }\n  }\n\n  fetch(\n    options?: QueryOptions<TData, TError, TQueryFnData>,\n    fetchOptions?: FetchOptions\n  ): Promise<TData> {\n    if (this.state.isFetching)\n      if (this.state.dataUpdatedAt && fetchOptions?.cancelRefetch) {\n        // Silently cancel current fetch if the user wants to cancel refetches\n        this.cancel({ silent: true })\n      } else if (this.promise) {\n        // Return current promise if we are already fetching\n        return this.promise\n      }\n\n    // Update config if passed, otherwise the config from the last execution is used\n    if (options) {\n      this.setOptions(options)\n    }\n\n    // Use the options from the first observer with a query function if no function is found.\n    // This can happen when the query is hydrated or created with setQueryData.\n    if (!this.options.queryFn) {\n      const observer = this.observers.find(x => x.options.queryFn)\n      if (observer) {\n        this.setOptions(observer.options)\n      }\n    }\n\n    // Create query function context\n    const queryKey = ensureArray(this.queryKey)\n    const queryFnContext: QueryFunctionContext = {\n      queryKey,\n      pageParam: undefined,\n    }\n\n    // Create fetch function\n    const fetchFn = () =>\n      this.options.queryFn\n        ? this.options.queryFn(queryFnContext)\n        : Promise.reject('Missing queryFn')\n\n    // Trigger behavior hook\n    const context: FetchContext<TData, TError, TQueryFnData> = {\n      fetchOptions,\n      options: this.options,\n      queryKey,\n      state: this.state,\n      fetchFn,\n    }\n\n    if (this.options.behavior?.onFetch) {\n      this.options.behavior?.onFetch(context)\n    }\n\n    // Set to fetching state if not already in it\n    if (\n      !this.state.isFetching ||\n      this.state.fetchMeta !== context.fetchOptions?.meta\n    ) {\n      this.dispatch({ type: 'fetch', meta: context.fetchOptions?.meta })\n    }\n\n    // Try to fetch the data\n    this.retryer = new Retryer({\n      fn: context.fetchFn,\n      onFail: () => {\n        this.dispatch({ type: 'failed' })\n      },\n      onPause: () => {\n        this.dispatch({ type: 'pause' })\n      },\n      onContinue: () => {\n        this.dispatch({ type: 'continue' })\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n    })\n\n    this.promise = this.retryer.promise\n      .then(data => this.setData(data as TData))\n      .catch(error => {\n        // Set error state if needed\n        if (!(isCancelledError(error) && error.silent)) {\n          this.dispatch({\n            type: 'error',\n            error,\n          })\n        }\n\n        // Log error\n        if (!isCancelledError(error)) {\n          getLogger().error(error)\n        }\n\n        // Propagate error\n        throw error\n      })\n\n    return this.promise\n  }\n\n  private dispatch(action: Action<TData, TError>): void {\n    this.state = this.reducer(this.state, action)\n\n    notifyManager.batch(() => {\n      this.observers.forEach(observer => {\n        observer.onQueryUpdate(action)\n      })\n\n      this.cache.notify(this)\n    })\n  }\n\n  protected getDefaultState(\n    options: QueryOptions<TData, TError, TQueryFnData>\n  ): QueryState<TData, TError> {\n    const data =\n      typeof options.initialData === 'function'\n        ? (options.initialData as InitialDataFunction<TData>)()\n        : options.initialData\n\n    const hasData = typeof data !== 'undefined'\n\n    return {\n      data,\n      dataUpdateCount: 0,\n      dataUpdatedAt: hasData ? Date.now() : 0,\n      error: null,\n      errorUpdateCount: 0,\n      errorUpdatedAt: 0,\n      fetchFailureCount: 0,\n      fetchMeta: null,\n      isFetching: false,\n      isInvalidated: false,\n      isPaused: false,\n      status: hasData ? 'success' : 'idle',\n    }\n  }\n\n  protected reducer(\n    state: QueryState<TData, TError>,\n    action: Action<TData, TError>\n  ): QueryState<TData, TError> {\n    switch (action.type) {\n      case 'failed':\n        return {\n          ...state,\n          fetchFailureCount: state.fetchFailureCount + 1,\n        }\n      case 'pause':\n        return {\n          ...state,\n          isPaused: true,\n        }\n      case 'continue':\n        return {\n          ...state,\n          isPaused: false,\n        }\n      case 'fetch':\n        return {\n          ...state,\n          fetchFailureCount: 0,\n          fetchMeta: action.meta ?? null,\n          isFetching: true,\n          isPaused: false,\n          status: state.status === 'idle' ? 'loading' : state.status,\n        }\n      case 'success':\n        return {\n          ...state,\n          data: action.data,\n          dataUpdateCount: state.dataUpdateCount + 1,\n          dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n          error: null,\n          fetchFailureCount: 0,\n          isFetching: false,\n          isInvalidated: false,\n          isPaused: false,\n          status: 'success',\n        }\n      case 'error':\n        const error = action.error as unknown\n\n        if (isCancelledError(error) && error.revert) {\n          return {\n            ...state,\n            fetchFailureCount: 0,\n            isFetching: false,\n            isPaused: false,\n            status: state.status === 'loading' ? 'idle' : state.status,\n          }\n        }\n\n        return {\n          ...state,\n          error: error as TError,\n          errorUpdateCount: state.errorUpdateCount + 1,\n          errorUpdatedAt: Date.now(),\n          fetchFailureCount: state.fetchFailureCount + 1,\n          isFetching: false,\n          isPaused: false,\n          status: 'error',\n        }\n      case 'invalidate':\n        return {\n          ...state,\n          isInvalidated: true,\n        }\n      case 'setState':\n        return {\n          ...state,\n          ...action.state,\n        }\n      default:\n        return state\n    }\n  }\n}\n","import {\n  QueryFilters,\n  getQueryKeyHashFn,\n  matchQuery,\n  parseFilterArgs,\n} from './utils'\nimport { Query, QueryState } from './query'\nimport type { QueryKey, QueryOptions } from './types'\nimport { notifyManager } from './notifyManager'\nimport type { QueryClient } from './queryClient'\nimport { Subscribable } from './subscribable'\n\n// TYPES\n\ninterface QueryHashMap {\n  [hash: string]: Query<any, any>\n}\n\ntype QueryCacheListener = (query?: Query) => void\n\n// CLASS\n\nexport class QueryCache extends Subscribable<QueryCacheListener> {\n  private queries: Query<any, any>[]\n  private queriesMap: QueryHashMap\n\n  constructor() {\n    super()\n\n    this.queries = []\n    this.queriesMap = {}\n  }\n\n  build<TData, TError, TQueryFnData>(\n    client: QueryClient,\n    options: QueryOptions<TData, TError, TQueryFnData>,\n    state?: QueryState<TData, TError>\n  ): Query<TData, TError, TQueryFnData> {\n    const hashFn = getQueryKeyHashFn(options)\n    const queryKey = options.queryKey!\n    const queryHash = options.queryHash ?? hashFn(queryKey)\n    let query = this.get<TData, TError, TQueryFnData>(queryHash)\n\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n      })\n      this.add(query)\n    }\n\n    return query\n  }\n\n  add(query: Query<any, any>): void {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query\n      this.queries.push(query)\n      this.notify(query)\n    }\n  }\n\n  remove(query: Query<any, any>): void {\n    const queryInMap = this.queriesMap[query.queryHash]\n\n    if (queryInMap) {\n      query.destroy()\n\n      this.queries = this.queries.filter(x => x !== query)\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash]\n      }\n\n      this.notify(query)\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.queries.forEach(query => {\n        this.remove(query)\n      })\n    })\n  }\n\n  get<TData = unknown, TError = unknown, TQueryFnData = TData>(\n    queryHash: string\n  ): Query<TData, TError, TQueryFnData> | undefined {\n    return this.queriesMap[queryHash]\n  }\n\n  getAll(): Query[] {\n    return this.queries\n  }\n\n  find<TData = unknown, TError = unknown, TQueryFnData = TData>(\n    arg1: QueryKey,\n    arg2?: QueryFilters\n  ): Query<TData, TError, TQueryFnData> | undefined {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    return this.queries.find(query => matchQuery(filters, query))\n  }\n\n  findAll(queryKey?: QueryKey, filters?: QueryFilters): Query[]\n  findAll(filters?: QueryFilters): Query[]\n  findAll(arg1?: QueryKey | QueryFilters, arg2?: QueryFilters): Query[]\n  findAll(arg1?: QueryKey | QueryFilters, arg2?: QueryFilters): Query[] {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    return filters\n      ? this.queries.filter(query => matchQuery(filters, query))\n      : this.queries\n  }\n\n  notify(query?: Query<any, any>) {\n    notifyManager.batch(() => {\n      this.listeners.forEach(listener => {\n        listener(query)\n      })\n    })\n  }\n\n  onFocus(): void {\n    notifyManager.batch(() => {\n      this.queries.forEach(query => {\n        query.onFocus()\n      })\n    })\n  }\n\n  onOnline(): void {\n    notifyManager.batch(() => {\n      this.queries.forEach(query => {\n        query.onOnline()\n      })\n    })\n  }\n}\n","import type { MutationOptions, MutationStatus } from './types'\nimport type { MutationCache } from './mutationCache'\nimport type { MutationObserver } from './mutationObserver'\nimport { getLogger } from './logger'\nimport { notifyManager } from './notifyManager'\nimport { Retryer } from './retryer'\nimport { noop } from './utils'\n\n// TYPES\n\ninterface MutationConfig<TData, TError, TVariables, TContext> {\n  mutationId: number\n  mutationCache: MutationCache\n  options: MutationOptions<TData, TError, TVariables, TContext>\n  defaultOptions?: MutationOptions<TData, TError, TVariables, TContext>\n  state?: MutationState<TData, TError, TVariables, TContext>\n}\n\nexport interface MutationState<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n> {\n  context: TContext | undefined\n  data: TData | undefined\n  error: TError | null\n  failureCount: number\n  isPaused: boolean\n  status: MutationStatus\n  variables: TVariables | undefined\n}\n\ninterface FailedAction {\n  type: 'failed'\n}\n\ninterface LoadingAction<TVariables, TContext> {\n  type: 'loading'\n  variables?: TVariables\n  context?: TContext\n}\n\ninterface SuccessAction<TData> {\n  type: 'success'\n  data: TData\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\ninterface SetStateAction<TData, TError, TVariables, TContext> {\n  type: 'setState'\n  state: MutationState<TData, TError, TVariables, TContext>\n}\n\nexport type Action<TData, TError, TVariables, TContext> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction\n  | LoadingAction<TVariables, TContext>\n  | PauseAction\n  | SetStateAction<TData, TError, TVariables, TContext>\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Mutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n> {\n  state: MutationState<TData, TError, TVariables, TContext>\n  options: MutationOptions<TData, TError, TVariables, TContext>\n  mutationId: number\n\n  private observers: MutationObserver<TData, TError, TVariables, TContext>[]\n  private mutationCache: MutationCache\n  private retryer?: Retryer<TData, TError>\n\n  constructor(config: MutationConfig<TData, TError, TVariables, TContext>) {\n    this.options = {\n      ...config.defaultOptions,\n      ...config.options,\n    }\n    this.mutationId = config.mutationId\n    this.mutationCache = config.mutationCache\n    this.observers = []\n    this.state = config.state || getDefaultState()\n  }\n\n  setState(state: MutationState<TData, TError, TVariables, TContext>): void {\n    this.dispatch({ type: 'setState', state })\n  }\n\n  addObserver(observer: MutationObserver<any, any, any, any>): void {\n    if (this.observers.indexOf(observer) === -1) {\n      this.observers.push(observer)\n    }\n  }\n\n  removeObserver(observer: MutationObserver<any, any, any, any>): void {\n    this.observers = this.observers.filter(x => x !== observer)\n  }\n\n  cancel(): Promise<void> {\n    if (this.retryer) {\n      this.retryer.cancel()\n      return this.retryer.promise.then(noop).catch(noop)\n    }\n    return Promise.resolve()\n  }\n\n  continue(): Promise<TData> {\n    if (this.retryer) {\n      this.retryer.continue()\n      return this.retryer.promise\n    }\n    return this.execute()\n  }\n\n  execute(): Promise<TData> {\n    let data: TData\n\n    const restored = this.state.status === 'loading'\n\n    let promise = Promise.resolve()\n\n    if (!restored) {\n      this.dispatch({ type: 'loading', variables: this.options.variables! })\n      promise = promise\n        .then(() => this.options.onMutate?.(this.state.variables!))\n        .then(context => {\n          if (context !== this.state.context) {\n            this.dispatch({\n              type: 'loading',\n              context,\n              variables: this.state.variables,\n            })\n          }\n        })\n    }\n\n    return promise\n      .then(() => this.executeMutation())\n      .then(result => {\n        data = result\n      })\n      .then(() =>\n        this.options.onSuccess?.(\n          data,\n          this.state.variables!,\n          this.state.context!\n        )\n      )\n      .then(() =>\n        this.options.onSettled?.(\n          data,\n          null,\n          this.state.variables!,\n          this.state.context\n        )\n      )\n      .then(() => {\n        this.dispatch({ type: 'success', data })\n        return data\n      })\n      .catch(error => {\n        getLogger().error(error)\n        return Promise.resolve()\n          .then(() =>\n            this.options.onError?.(\n              error,\n              this.state.variables!,\n              this.state.context\n            )\n          )\n          .then(() =>\n            this.options.onSettled?.(\n              undefined,\n              error,\n              this.state.variables!,\n              this.state.context\n            )\n          )\n          .then(() => {\n            this.dispatch({ type: 'error', error })\n            throw error\n          })\n      })\n  }\n\n  private executeMutation(): Promise<TData> {\n    this.retryer = new Retryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject('No mutationFn found')\n        }\n        return this.options.mutationFn(this.state.variables!)\n      },\n      onFail: () => {\n        this.dispatch({ type: 'failed' })\n      },\n      onPause: () => {\n        this.dispatch({ type: 'pause' })\n      },\n      onContinue: () => {\n        this.dispatch({ type: 'continue' })\n      },\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n    })\n\n    return this.retryer.promise\n  }\n\n  private dispatch(action: Action<TData, TError, TVariables, TContext>): void {\n    this.state = reducer(this.state, action)\n\n    notifyManager.batch(() => {\n      this.observers.forEach(observer => {\n        observer.onMutationUpdate(action)\n      })\n      this.mutationCache.notify(this)\n    })\n  }\n}\n\nexport function getDefaultState<\n  TData,\n  TError,\n  TVariables,\n  TContext\n>(): MutationState<TData, TError, TVariables, TContext> {\n  return {\n    context: undefined,\n    data: undefined,\n    error: null,\n    failureCount: 0,\n    isPaused: false,\n    status: 'idle',\n    variables: undefined,\n  }\n}\n\nfunction reducer<TData, TError, TVariables, TContext>(\n  state: MutationState<TData, TError, TVariables, TContext>,\n  action: Action<TData, TError, TVariables, TContext>\n): MutationState<TData, TError, TVariables, TContext> {\n  switch (action.type) {\n    case 'failed':\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case 'pause':\n      return {\n        ...state,\n        isPaused: true,\n      }\n    case 'continue':\n      return {\n        ...state,\n        isPaused: false,\n      }\n    case 'loading':\n      return {\n        ...state,\n        context: action.context,\n        data: undefined,\n        error: null,\n        isPaused: false,\n        status: 'loading',\n        variables: action.variables,\n      }\n    case 'success':\n      return {\n        ...state,\n        data: action.data,\n        error: null,\n        status: 'success',\n        isPaused: false,\n      }\n    case 'error':\n      return {\n        ...state,\n        data: undefined,\n        error: action.error,\n        failureCount: state.failureCount + 1,\n        isPaused: false,\n        status: 'error',\n      }\n    case 'setState':\n      return {\n        ...state,\n        ...action.state,\n      }\n    default:\n      return state\n  }\n}\n","import type { MutationOptions } from './types'\nimport type { QueryClient } from './queryClient'\nimport { notifyManager } from './notifyManager'\nimport { Mutation, MutationState } from './mutation'\nimport { noop } from './utils'\nimport { Subscribable } from './subscribable'\n\n// TYPES\n\ntype MutationCacheListener = (mutation?: Mutation) => void\n\n// CLASS\n\nexport class MutationCache extends Subscribable<MutationCacheListener> {\n  private mutations: Mutation<any, any, any, any>[]\n  private mutationId: number\n\n  constructor() {\n    super()\n    this.mutations = []\n    this.mutationId = 0\n  }\n\n  build<TData, TError, TVariables, TContext>(\n    client: QueryClient,\n    options: MutationOptions<TData, TError, TVariables, TContext>,\n    state?: MutationState<TData, TError, TVariables, TContext>\n  ): Mutation<TData, TError, TVariables, TContext> {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state,\n      defaultOptions: options.mutationKey\n        ? client.getMutationDefaults(options.mutationKey)\n        : undefined,\n    })\n\n    this.add(mutation)\n\n    return mutation\n  }\n\n  add(mutation: Mutation<any, any, any, any>): void {\n    this.mutations.push(mutation)\n    this.notify(mutation)\n  }\n\n  remove(mutation: Mutation<any, any, any, any>): void {\n    this.mutations = this.mutations.filter(x => x !== mutation)\n    mutation.cancel()\n    this.notify(mutation)\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.mutations.forEach(mutation => {\n        this.remove(mutation)\n      })\n    })\n  }\n\n  getAll(): Mutation[] {\n    return this.mutations\n  }\n\n  notify(mutation?: Mutation<any, any, any, any>) {\n    notifyManager.batch(() => {\n      this.listeners.forEach(listener => {\n        listener(mutation)\n      })\n    })\n  }\n\n  onFocus(): void {\n    this.resumePausedMutations()\n  }\n\n  onOnline(): void {\n    this.resumePausedMutations()\n  }\n\n  resumePausedMutations(): Promise<void> {\n    const pausedMutations = this.mutations.filter(x => x.state.isPaused)\n    return notifyManager.batch(() =>\n      pausedMutations.reduce(\n        (promise, mutation) =>\n          promise.then(() => mutation.continue().catch(noop)),\n        Promise.resolve()\n      )\n    )\n  }\n}\n","import {\n  QueryFilters,\n  Updater,\n  hashQueryKey,\n  noop,\n  parseFilterArgs,\n  parseQueryArgs,\n  partialMatchKey,\n} from './utils'\nimport type {\n  DefaultOptions,\n  FetchQueryOptions,\n  InvalidateOptions,\n  InvalidateQueryFilters,\n  MutationKey,\n  MutationObserverOptions,\n  MutationOptions,\n  QueryFunction,\n  QueryKey,\n  QueryObserverOptions,\n  QueryOptions,\n  RefetchOptions,\n  ResetOptions,\n} from './types'\nimport type { QueryState, SetDataOptions } from './query'\nimport { QueryCache } from './queryCache'\nimport { MutationCache } from './mutationCache'\nimport { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { notifyManager } from './notifyManager'\nimport { CancelOptions } from './retryer'\n\n// TYPES\n\ninterface QueryClientConfig {\n  queryCache?: QueryCache\n  mutationCache?: MutationCache\n  defaultOptions?: DefaultOptions\n}\n\ninterface QueryDefaults {\n  queryKey: QueryKey\n  defaultOptions: QueryOptions<any, any, any>\n}\n\ninterface MutationDefaults {\n  mutationKey: MutationKey\n  defaultOptions: MutationOptions<any, any, any, any>\n}\n\n// CLASS\n\nexport class QueryClient {\n  private queryCache: QueryCache\n  private mutationCache: MutationCache\n  private defaultOptions: DefaultOptions\n  private queryDefaults: QueryDefaults[]\n  private mutationDefaults: MutationDefaults[]\n  private unsubscribeFocus?: () => void\n  private unsubscribeOnline?: () => void\n\n  constructor(config: QueryClientConfig = {}) {\n    this.queryCache = config.queryCache || new QueryCache()\n    this.mutationCache = config.mutationCache || new MutationCache()\n    this.defaultOptions = config.defaultOptions || {}\n    this.queryDefaults = []\n    this.mutationDefaults = []\n  }\n\n  mount(): void {\n    this.unsubscribeFocus = focusManager.subscribe(() => {\n      if (focusManager.isFocused() && onlineManager.isOnline()) {\n        this.mutationCache.onFocus()\n        this.queryCache.onFocus()\n      }\n    })\n    this.unsubscribeOnline = onlineManager.subscribe(() => {\n      if (focusManager.isFocused() && onlineManager.isOnline()) {\n        this.mutationCache.onOnline()\n        this.queryCache.onOnline()\n      }\n    })\n  }\n\n  unmount(): void {\n    this.unsubscribeFocus?.()\n    this.unsubscribeOnline?.()\n  }\n\n  isFetching(filters?: QueryFilters): number\n  isFetching(queryKey?: QueryKey, filters?: QueryFilters): number\n  isFetching(arg1?: QueryKey | QueryFilters, arg2?: QueryFilters): number {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    filters.fetching = true\n    return this.queryCache.findAll(filters).length\n  }\n\n  getQueryData<TData = unknown>(\n    queryKey: QueryKey,\n    filters?: QueryFilters\n  ): TData | undefined {\n    return this.queryCache.find<TData>(queryKey, filters)?.state.data\n  }\n\n  setQueryData<TData>(\n    queryKey: QueryKey,\n    updater: Updater<TData | undefined, TData>,\n    options?: SetDataOptions\n  ): TData {\n    const parsedOptions = parseQueryArgs(queryKey)\n    const defaultedOptions = this.defaultQueryOptions(parsedOptions)\n    return this.queryCache\n      .build(this, defaultedOptions)\n      .setData(updater, options)\n  }\n\n  getQueryState<TData = unknown, TError = undefined>(\n    queryKey: QueryKey,\n    filters?: QueryFilters\n  ): QueryState<TData, TError> | undefined {\n    return this.queryCache.find<TData, TError>(queryKey, filters)?.state\n  }\n\n  removeQueries(filters?: QueryFilters): void\n  removeQueries(queryKey?: QueryKey, filters?: QueryFilters): void\n  removeQueries(arg1?: QueryKey | QueryFilters, arg2?: QueryFilters): void {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    const queryCache = this.queryCache\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach(query => {\n        queryCache.remove(query)\n      })\n    })\n  }\n\n  resetQueries(filters?: QueryFilters, options?: ResetOptions): Promise<void>\n  resetQueries(queryKey?: QueryKey, filters?: QueryFilters, options?: ResetOptions): Promise<void>\n  resetQueries(arg1?: QueryKey | QueryFilters, arg2?: QueryFilters | ResetOptions, arg3?: ResetOptions): Promise<void> {\n    const [filters, options] = parseFilterArgs(arg1, arg2, arg3)\n    const queryCache = this.queryCache\n\n    const refetchFilters: QueryFilters = {\n      ...filters,\n      active: true,\n    }\n\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach(query => {\n        query.reset()\n      })\n      return this.refetchQueries(refetchFilters, options)\n    })\n  }\n\n  cancelQueries(filters?: QueryFilters, options?: CancelOptions): Promise<void>\n  cancelQueries(\n    queryKey?: QueryKey,\n    filters?: QueryFilters,\n    options?: CancelOptions\n  ): Promise<void>\n  cancelQueries(\n    arg1?: QueryKey | QueryFilters,\n    arg2?: QueryFilters | CancelOptions,\n    arg3?: CancelOptions\n  ): Promise<void> {\n    const [filters, cancelOptions = {}] = parseFilterArgs(arg1, arg2, arg3)\n\n    if (typeof cancelOptions.revert === 'undefined') {\n      cancelOptions.revert = true\n    }\n\n    const promises = notifyManager.batch(() =>\n      this.queryCache.findAll(filters).map(query => query.cancel(cancelOptions))\n    )\n\n    return Promise.all(promises).then(noop).catch(noop)\n  }\n\n  invalidateQueries(\n    filters?: InvalidateQueryFilters,\n    options?: InvalidateOptions\n  ): Promise<void>\n  invalidateQueries(\n    queryKey?: QueryKey,\n    filters?: InvalidateQueryFilters,\n    options?: InvalidateOptions\n  ): Promise<void>\n  invalidateQueries(\n    arg1?: QueryKey | InvalidateQueryFilters,\n    arg2?: InvalidateQueryFilters | InvalidateOptions,\n    arg3?: InvalidateOptions\n  ): Promise<void> {\n    const [filters, options] = parseFilterArgs(arg1, arg2, arg3)\n\n    const refetchFilters: QueryFilters = {\n      ...filters,\n      active: filters.refetchActive ?? true,\n      inactive: filters.refetchInactive ?? false,\n    }\n\n    return notifyManager.batch(() => {\n      this.queryCache.findAll(filters).forEach(query => {\n        query.invalidate()\n      })\n      return this.refetchQueries(refetchFilters, options)\n    })\n  }\n\n  refetchQueries(\n    filters?: QueryFilters,\n    options?: RefetchOptions\n  ): Promise<void>\n  refetchQueries(\n    queryKey?: QueryKey,\n    filters?: QueryFilters,\n    options?: RefetchOptions\n  ): Promise<void>\n  refetchQueries(\n    arg1?: QueryKey | QueryFilters,\n    arg2?: QueryFilters | RefetchOptions,\n    arg3?: RefetchOptions\n  ): Promise<void> {\n    const [filters, options] = parseFilterArgs(arg1, arg2, arg3)\n\n    const promises = notifyManager.batch(() =>\n      this.queryCache.findAll(filters).map(query => query.fetch())\n    )\n\n    let promise = Promise.all(promises).then(noop)\n\n    if (!options?.throwOnError) {\n      promise = promise.catch(noop)\n    }\n\n    return promise\n  }\n\n  fetchQuery<TData = unknown, TError = unknown, TQueryFnData = TData>(\n    options: FetchQueryOptions<TData, TError, TQueryFnData>\n  ): Promise<TData>\n  fetchQuery<TData = unknown, TError = unknown, TQueryFnData = TData>(\n    queryKey: QueryKey,\n    options?: FetchQueryOptions<TData, TError, TQueryFnData>\n  ): Promise<TData>\n  fetchQuery<TData = unknown, TError = unknown, TQueryFnData = TData>(\n    queryKey: QueryKey,\n    queryFn: QueryFunction<TQueryFnData | TData>,\n    options?: FetchQueryOptions<TData, TError, TQueryFnData>\n  ): Promise<TData>\n  fetchQuery<TData, TError, TQueryFnData = TData>(\n    arg1: QueryKey | FetchQueryOptions<TData, TError, TQueryFnData>,\n    arg2?:\n      | QueryFunction<TQueryFnData | TData>\n      | FetchQueryOptions<TData, TError, TQueryFnData>,\n    arg3?: FetchQueryOptions<TData, TError, TQueryFnData>\n  ): Promise<TData> {\n    const parsedOptions = parseQueryArgs(arg1, arg2, arg3)\n    const defaultedOptions = this.defaultQueryOptions(parsedOptions)\n\n    // https://github.com/tannerlinsley/react-query/issues/652\n    if (typeof defaultedOptions.retry === 'undefined') {\n      defaultedOptions.retry = false\n    }\n\n    const query = this.queryCache.build(this, defaultedOptions)\n\n    return query.isStaleByTime(defaultedOptions.staleTime)\n      ? query.fetch(defaultedOptions)\n      : Promise.resolve(query.state.data as TData)\n  }\n\n  prefetchQuery(options: FetchQueryOptions): Promise<void>\n  prefetchQuery(queryKey: QueryKey, options?: FetchQueryOptions): Promise<void>\n  prefetchQuery(\n    queryKey: QueryKey,\n    queryFn: QueryFunction,\n    options?: FetchQueryOptions\n  ): Promise<void>\n  prefetchQuery(\n    arg1: QueryKey | FetchQueryOptions,\n    arg2?: QueryFunction | FetchQueryOptions,\n    arg3?: FetchQueryOptions\n  ): Promise<void> {\n    return this.fetchQuery(arg1 as any, arg2 as any, arg3)\n      .then(noop)\n      .catch(noop)\n  }\n\n  cancelMutations(): Promise<void> {\n    const promises = notifyManager.batch(() =>\n      this.mutationCache.getAll().map(mutation => mutation.cancel())\n    )\n    return Promise.all(promises).then(noop).catch(noop)\n  }\n\n  resumePausedMutations(): Promise<void> {\n    return this.getMutationCache().resumePausedMutations()\n  }\n\n  executeMutation<\n    TData = unknown,\n    TError = unknown,\n    TVariables = void,\n    TContext = unknown\n  >(\n    options: MutationOptions<TData, TError, TVariables, TContext>\n  ): Promise<TData> {\n    return this.mutationCache.build(this, options).execute()\n  }\n\n  getQueryCache(): QueryCache {\n    return this.queryCache\n  }\n\n  getMutationCache(): MutationCache {\n    return this.mutationCache\n  }\n\n  getDefaultOptions(): DefaultOptions {\n    return this.defaultOptions\n  }\n\n  setDefaultOptions(options: DefaultOptions): void {\n    this.defaultOptions = options\n  }\n\n  setQueryDefaults(\n    queryKey: QueryKey,\n    options: QueryObserverOptions<any, any, any, any>\n  ): void {\n    const result = this.queryDefaults.find(\n      x => hashQueryKey(queryKey) === hashQueryKey(x.queryKey)\n    )\n    if (result) {\n      result.defaultOptions = options\n    } else {\n      this.queryDefaults.push({ queryKey, defaultOptions: options })\n    }\n  }\n\n  getQueryDefaults(\n    queryKey?: QueryKey\n  ): QueryObserverOptions<any, any, any, any> | undefined {\n    return queryKey\n      ? this.queryDefaults.find(x => partialMatchKey(queryKey, x.queryKey))\n          ?.defaultOptions\n      : undefined\n  }\n\n  setMutationDefaults(\n    mutationKey: MutationKey,\n    options: MutationObserverOptions<any, any, any, any>\n  ): void {\n    const result = this.mutationDefaults.find(\n      x => hashQueryKey(mutationKey) === hashQueryKey(x.mutationKey)\n    )\n    if (result) {\n      result.defaultOptions = options\n    } else {\n      this.mutationDefaults.push({ mutationKey, defaultOptions: options })\n    }\n  }\n\n  getMutationDefaults(\n    mutationKey?: MutationKey\n  ): MutationObserverOptions<any, any, any, any> | undefined {\n    return mutationKey\n      ? this.mutationDefaults.find(x =>\n          partialMatchKey(mutationKey, x.mutationKey)\n        )?.defaultOptions\n      : undefined\n  }\n\n  defaultQueryOptions<T extends QueryOptions<any, any, any>>(options?: T): T {\n    if (options?._defaulted) {\n      return options\n    }\n    return {\n      ...this.defaultOptions.queries,\n      ...this.getQueryDefaults(options?.queryKey),\n      ...options,\n      _defaulted: true,\n    } as T\n  }\n\n  defaultQueryObserverOptions<\n    T extends QueryObserverOptions<any, any, any, any>\n  >(options?: T): T {\n    return this.defaultQueryOptions(options)\n  }\n\n  defaultMutationOptions<T extends MutationOptions<any, any, any, any>>(\n    options?: T\n  ): T {\n    if (options?._defaulted) {\n      return options\n    }\n    return {\n      ...this.defaultOptions.mutations,\n      ...this.getMutationDefaults(options?.mutationKey),\n      ...options,\n      _defaulted: true,\n    } as T\n  }\n\n  clear(): void {\n    this.queryCache.clear()\n    this.mutationCache.clear()\n  }\n}\n","import {\n  getStatusProps,\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceEqualDeep,\n  shallowEqualObjects,\n  timeUntilStale,\n} from './utils'\nimport { notifyManager } from './notifyManager'\nimport type {\n  PlaceholderDataFunction,\n  QueryObserverBaseResult,\n  QueryObserverOptions,\n  QueryObserverResult,\n  QueryOptions,\n  RefetchOptions,\n  ResultOptions,\n} from './types'\nimport type { Query, QueryState, Action, FetchOptions } from './query'\nimport type { QueryClient } from './queryClient'\nimport { focusManager } from './focusManager'\nimport { Subscribable } from './subscribable'\n\ntype QueryObserverListener<TData, TError> = (\n  result: QueryObserverResult<TData, TError>\n) => void\n\ninterface NotifyOptions {\n  cache?: boolean\n  listeners?: boolean\n  onError?: boolean\n  onSuccess?: boolean\n}\n\nexport interface ObserverFetchOptions extends FetchOptions {\n  throwOnError?: boolean\n}\n\nexport class QueryObserver<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData,\n  TQueryData = TQueryFnData\n> extends Subscribable<QueryObserverListener<TData, TError>> {\n  options: QueryObserverOptions<TData, TError, TQueryFnData, TQueryData>\n\n  private client: QueryClient\n  private currentQuery!: Query<TQueryData, TError, TQueryFnData>\n  private currentResult!: QueryObserverResult<TData, TError>\n  private currentResultState?: QueryState<TQueryData, TError>\n  private previousQueryResult?: QueryObserverResult<TData, TError>\n  private initialDataUpdateCount: number\n  private initialErrorUpdateCount: number\n  private staleTimeoutId?: number\n  private refetchIntervalId?: number\n\n  constructor(\n    client: QueryClient,\n    options: QueryObserverOptions<TData, TError, TQueryFnData, TQueryData>\n  ) {\n    super()\n\n    this.client = client\n    this.options = options\n    this.initialDataUpdateCount = 0\n    this.initialErrorUpdateCount = 0\n    this.bindMethods()\n    this.setOptions(options)\n  }\n\n  protected bindMethods(): void {\n    this.remove = this.remove.bind(this)\n    this.refetch = this.refetch.bind(this)\n  }\n\n  protected onSubscribe(): void {\n    if (this.listeners.length === 1) {\n      this.updateQuery()\n\n      this.currentQuery.addObserver(this)\n\n      if (this.willFetchOnMount()) {\n        this.executeFetch()\n      }\n\n      this.updateTimers()\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.listeners.length) {\n      this.destroy()\n    }\n  }\n\n  willLoadOnMount(): boolean {\n    return (\n      this.options.enabled !== false && !this.currentQuery.state.dataUpdatedAt\n    )\n  }\n\n  willRefetchOnMount(): boolean {\n    return (\n      this.options.enabled !== false &&\n      this.currentQuery.state.dataUpdatedAt > 0 &&\n      (this.options.refetchOnMount === 'always' ||\n        (this.options.refetchOnMount !== false && this.isStale()))\n    )\n  }\n\n  willFetchOnMount(): boolean {\n    return this.willLoadOnMount() || this.willRefetchOnMount()\n  }\n\n  willFetchOnReconnect(): boolean {\n    return (\n      this.options.enabled !== false &&\n      (this.options.refetchOnReconnect === 'always' ||\n        (this.options.refetchOnReconnect !== false && this.isStale()))\n    )\n  }\n\n  willFetchOnWindowFocus(): boolean {\n    return (\n      this.options.enabled !== false &&\n      (this.options.refetchOnWindowFocus === 'always' ||\n        (this.options.refetchOnWindowFocus !== false && this.isStale()))\n    )\n  }\n\n  private willFetchOptionally(): boolean {\n    return this.options.enabled !== false && this.isStale()\n  }\n\n  private isStale(): boolean {\n    return this.currentQuery.isStaleByTime(this.options.staleTime)\n  }\n\n  destroy(): void {\n    this.listeners = []\n    this.clearTimers()\n    this.currentQuery.removeObserver(this)\n  }\n\n  setOptions(\n    options?: QueryObserverOptions<TData, TError, TQueryFnData, TQueryData>\n  ): void {\n    const prevOptions = this.options\n    const prevQuery = this.currentQuery\n\n    this.options = this.client.defaultQueryObserverOptions(options)\n\n    if (\n      typeof this.options.enabled !== 'undefined' &&\n      typeof this.options.enabled !== 'boolean'\n    ) {\n      throw new Error('Expected enabled to be a boolean')\n    }\n\n    // Keep previous query key if the user does not supply one\n    if (!this.options.queryKey) {\n      this.options.queryKey = prevOptions.queryKey\n    }\n\n    this.updateQuery()\n\n    // Take no further actions if there are no subscribers\n    if (!this.listeners.length) {\n      return\n    }\n\n    // If we subscribed to a new query, optionally fetch and update refetch\n    if (this.currentQuery !== prevQuery) {\n      this.optionalFetch()\n      this.updateTimers()\n      return\n    }\n\n    // Optionally fetch if the query became enabled\n    if (this.options.enabled !== false && prevOptions.enabled === false) {\n      this.optionalFetch()\n    }\n\n    // Update stale interval if needed\n    if (\n      this.options.enabled !== prevOptions.enabled ||\n      this.options.staleTime !== prevOptions.staleTime\n    ) {\n      this.updateStaleTimeout()\n    }\n\n    // Update refetch interval if needed\n    if (\n      this.options.enabled !== prevOptions.enabled ||\n      this.options.refetchInterval !== prevOptions.refetchInterval\n    ) {\n      this.updateRefetchInterval()\n    }\n  }\n\n  getCurrentResult(): QueryObserverResult<TData, TError> {\n    return this.currentResult\n  }\n\n  getNextResult(\n    options?: ResultOptions\n  ): Promise<QueryObserverResult<TData, TError>> {\n    return new Promise((resolve, reject) => {\n      const unsubscribe = this.subscribe(result => {\n        if (!result.isFetching) {\n          unsubscribe()\n          if (result.isError && options?.throwOnError) {\n            reject(result.error)\n          } else {\n            resolve(result)\n          }\n        }\n      })\n    })\n  }\n\n  getCurrentQuery(): Query<TQueryData, TError, TQueryFnData> {\n    return this.currentQuery\n  }\n\n  remove(): void {\n    this.client.getQueryCache().remove(this.currentQuery)\n  }\n\n  refetch(\n    options?: RefetchOptions\n  ): Promise<QueryObserverResult<TData, TError>> {\n    return this.fetch(options)\n  }\n\n  protected fetch(\n    fetchOptions?: ObserverFetchOptions\n  ): Promise<QueryObserverResult<TData, TError>> {\n    return this.executeFetch(fetchOptions).then(() => {\n      this.updateResult()\n      return this.currentResult\n    })\n  }\n\n  private optionalFetch(): void {\n    if (this.willFetchOptionally()) {\n      this.executeFetch()\n    }\n  }\n\n  private executeFetch(\n    fetchOptions?: ObserverFetchOptions\n  ): Promise<TQueryData | undefined> {\n    // Make sure we reference the latest query as the current one might have been removed\n    this.updateQuery()\n\n    // Fetch\n    let promise: Promise<TQueryData | undefined> = this.currentQuery.fetch(\n      this.options as QueryOptions<TQueryData, TError, TQueryFnData>,\n      fetchOptions\n    )\n\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop)\n    }\n\n    return promise\n  }\n\n  private updateStaleTimeout(): void {\n    this.clearStaleTimeout()\n\n    if (\n      isServer ||\n      this.currentResult.isStale ||\n      !isValidTimeout(this.options.staleTime)\n    ) {\n      return\n    }\n\n    const time = timeUntilStale(\n      this.currentResult.dataUpdatedAt,\n      this.options.staleTime\n    )\n\n    // The timeout is sometimes triggered 1 ms before the stale time expiration.\n    // To mitigate this issue we always add 1 ms to the timeout.\n    const timeout = time + 1\n\n    this.staleTimeoutId = setTimeout(() => {\n      if (!this.currentResult.isStale) {\n        const prevResult = this.currentResult\n        this.updateResult()\n        this.notify({\n          listeners: this.shouldNotifyListeners(prevResult, this.currentResult),\n          cache: true,\n        })\n      }\n    }, timeout)\n  }\n\n  private updateRefetchInterval(): void {\n    this.clearRefetchInterval()\n\n    if (\n      isServer ||\n      this.options.enabled === false ||\n      !isValidTimeout(this.options.refetchInterval)\n    ) {\n      return\n    }\n\n    this.refetchIntervalId = setInterval(() => {\n      if (\n        this.options.refetchIntervalInBackground ||\n        focusManager.isFocused()\n      ) {\n        this.executeFetch()\n      }\n    }, this.options.refetchInterval)\n  }\n\n  private updateTimers(): void {\n    this.updateStaleTimeout()\n    this.updateRefetchInterval()\n  }\n\n  private clearTimers(): void {\n    this.clearStaleTimeout()\n    this.clearRefetchInterval()\n  }\n\n  private clearStaleTimeout(): void {\n    clearTimeout(this.staleTimeoutId)\n    this.staleTimeoutId = undefined\n  }\n\n  private clearRefetchInterval(): void {\n    clearInterval(this.refetchIntervalId)\n    this.refetchIntervalId = undefined\n  }\n\n  protected getNewResult(\n    willFetch?: boolean\n  ): QueryObserverResult<TData, TError> {\n    const { state } = this.currentQuery\n    let { isFetching, status } = state\n    let isPreviousData = false\n    let isPlaceholderData = false\n    let data: TData | undefined\n    let dataUpdatedAt = state.dataUpdatedAt\n\n    // Optimistically set status to loading if we will start fetching\n    if (willFetch) {\n      isFetching = true\n      if (status === 'idle') {\n        status = 'loading'\n      }\n    }\n\n    // Keep previous data if needed\n    if (\n      this.options.keepPreviousData &&\n      !state.dataUpdateCount &&\n      this.previousQueryResult?.isSuccess\n    ) {\n      data = this.previousQueryResult.data\n      dataUpdatedAt = this.previousQueryResult.dataUpdatedAt\n      status = this.previousQueryResult.status\n      isPreviousData = true\n    }\n    // Select data if needed\n    else if (this.options.select && typeof state.data !== 'undefined') {\n      // Use the previous select result if the query data did not change\n      if (this.currentResult && state.data === this.currentResultState?.data) {\n        data = this.currentResult.data\n      } else {\n        data = this.options.select(state.data)\n        if (this.options.structuralSharing !== false) {\n          data = replaceEqualDeep(this.currentResult?.data, data)\n        }\n      }\n    }\n    // Use query data\n    else {\n      data = (state.data as unknown) as TData\n    }\n\n    // Show placeholder data if needed\n    if (\n      typeof this.options.placeholderData !== 'undefined' &&\n      typeof data === 'undefined' &&\n      status === 'loading'\n    ) {\n      const placeholderData =\n        typeof this.options.placeholderData === 'function'\n          ? (this.options.placeholderData as PlaceholderDataFunction<TData>)()\n          : this.options.placeholderData\n      if (typeof placeholderData !== 'undefined') {\n        status = 'success'\n        data = placeholderData\n        isPlaceholderData = true\n      }\n    }\n\n    const result: QueryObserverBaseResult<TData, TError> = {\n      ...getStatusProps(status),\n      data,\n      dataUpdatedAt,\n      error: state.error,\n      errorUpdatedAt: state.errorUpdateCount,\n      failureCount: state.fetchFailureCount,\n      isFetched: state.dataUpdateCount > 0 || state.errorUpdateCount > 0,\n      isFetchedAfterMount:\n        state.dataUpdateCount > this.initialDataUpdateCount ||\n        state.errorUpdateCount > this.initialErrorUpdateCount,\n      isFetching,\n      isLoadingError: status === 'error' && state.dataUpdatedAt === 0,\n      isPlaceholderData,\n      isPreviousData,\n      isRefetchError: status === 'error' && state.dataUpdatedAt !== 0,\n      isStale: this.isStale(),\n      refetch: this.refetch,\n      remove: this.remove,\n    }\n\n    return result as QueryObserverResult<TData, TError>\n  }\n\n  private shouldNotifyListeners(\n    prevResult: QueryObserverResult,\n    result: QueryObserverResult\n  ): boolean {\n    const { notifyOnChangeProps, notifyOnChangePropsExclusions } = this.options\n\n    if (prevResult === result) {\n      return false\n    }\n\n    if (!notifyOnChangeProps && !notifyOnChangePropsExclusions) {\n      return true\n    }\n\n    const keys = Object.keys(result)\n\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i] as keyof QueryObserverResult\n      const changed = prevResult[key] !== result[key]\n      const isIncluded = notifyOnChangeProps?.some(x => x === key)\n      const isExcluded = notifyOnChangePropsExclusions?.some(x => x === key)\n\n      if (changed) {\n        if (notifyOnChangePropsExclusions && isExcluded) {\n          continue\n        }\n\n        if (!notifyOnChangeProps || isIncluded) {\n          return true\n        }\n      }\n    }\n\n    return false\n  }\n\n  private updateResult(willFetch?: boolean): void {\n    const result = this.getNewResult(willFetch)\n\n    // Keep reference to the current state on which the current result is based on\n    this.currentResultState = this.currentQuery.state\n\n    // Only update if something has changed\n    if (!shallowEqualObjects(result, this.currentResult)) {\n      this.currentResult = result\n    }\n  }\n\n  private updateQuery(): void {\n    const prevQuery = this.currentQuery\n\n    const query = this.client\n      .getQueryCache()\n      .build(\n        this.client,\n        this.options as QueryOptions<TQueryData, TError, TQueryFnData>\n      )\n\n    if (query === prevQuery) {\n      return\n    }\n\n    this.previousQueryResult = this.currentResult\n    this.currentQuery = query\n    this.initialDataUpdateCount = query.state.dataUpdateCount\n    this.initialErrorUpdateCount = query.state.errorUpdateCount\n\n    const willFetch = prevQuery\n      ? this.willFetchOptionally()\n      : this.willFetchOnMount()\n\n    this.updateResult(willFetch)\n\n    if (!this.hasListeners()) {\n      return\n    }\n\n    prevQuery?.removeObserver(this)\n    this.currentQuery.addObserver(this)\n\n    if (\n      this.shouldNotifyListeners(this.previousQueryResult, this.currentResult)\n    ) {\n      this.notify({ listeners: true })\n    }\n  }\n\n  onQueryUpdate(action: Action<TData, TError>): void {\n    // Store current result and get new result\n    const prevResult = this.currentResult\n    this.updateResult()\n    const currentResult = this.currentResult\n\n    // Update timers\n    this.updateTimers()\n\n    // Do not notify if the nothing has changed\n    if (prevResult === currentResult) {\n      return\n    }\n\n    // Determine which callbacks to trigger\n    const notifyOptions: NotifyOptions = {}\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true\n    }\n\n    if (this.shouldNotifyListeners(prevResult, currentResult)) {\n      notifyOptions.listeners = true\n    }\n\n    this.notify(notifyOptions)\n  }\n\n  private notify(notifyOptions: NotifyOptions): void {\n    notifyManager.batch(() => {\n      // First trigger the configuration callbacks\n      if (notifyOptions.onSuccess) {\n        this.options.onSuccess?.(this.currentResult.data!)\n        this.options.onSettled?.(this.currentResult.data!, null)\n      } else if (notifyOptions.onError) {\n        this.options.onError?.(this.currentResult.error!)\n        this.options.onSettled?.(undefined, this.currentResult.error!)\n      }\n\n      // Then trigger the listeners\n      if (notifyOptions.listeners) {\n        this.listeners.forEach(listener => {\n          listener(this.currentResult)\n        })\n      }\n\n      // Then the cache listeners\n      if (notifyOptions.cache) {\n        this.client.getQueryCache().notify(this.currentQuery)\n      }\n    })\n  }\n}\n","import { difference, getQueryKeyHashFn, replaceAt } from './utils'\nimport { notifyManager } from './notifyManager'\nimport type { QueryObserverOptions, QueryObserverResult } from './types'\nimport type { QueryClient } from './queryClient'\nimport { QueryObserver } from './queryObserver'\nimport { Subscribable } from './subscribable'\n\ntype QueriesObserverListener = (result: QueryObserverResult[]) => void\n\nexport class QueriesObserver extends Subscribable<QueriesObserverListener> {\n  private client: QueryClient\n  private result: QueryObserverResult[]\n  private queries: QueryObserverOptions[]\n  private observers: QueryObserver[]\n\n  constructor(client: QueryClient, queries?: QueryObserverOptions[]) {\n    super()\n\n    this.client = client\n    this.queries = queries || []\n    this.result = []\n    this.observers = []\n\n    // Subscribe to queries\n    this.updateObservers()\n  }\n\n  protected onSubscribe(): void {\n    if (this.listeners.length === 1) {\n      this.observers.forEach(observer => {\n        observer.subscribe(result => {\n          this.onUpdate(observer, result)\n        })\n      })\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.listeners.length) {\n      this.destroy()\n    }\n  }\n\n  destroy(): void {\n    this.listeners = []\n    this.observers.forEach(observer => {\n      observer.destroy()\n    })\n  }\n\n  setQueries(queries: QueryObserverOptions[]): void {\n    this.queries = queries\n    this.updateObservers()\n  }\n\n  getCurrentResult(): QueryObserverResult[] {\n    return this.result\n  }\n\n  private updateObservers(): void {\n    let hasIndexChange = false\n\n    const prevObservers = this.observers\n    const newObservers = this.queries.map((options, i) => {\n      let observer: QueryObserver | undefined = prevObservers[i]\n\n      const defaultedOptions = this.client.defaultQueryObserverOptions(options)\n      const hashFn = getQueryKeyHashFn(defaultedOptions)\n      defaultedOptions.queryHash = hashFn(defaultedOptions.queryKey!)\n\n      if (\n        !observer ||\n        observer.getCurrentQuery().queryHash !== defaultedOptions.queryHash\n      ) {\n        hasIndexChange = true\n        observer = prevObservers.find(\n          x => x.getCurrentQuery().queryHash === defaultedOptions.queryHash\n        )\n      }\n\n      if (observer) {\n        observer.setOptions(defaultedOptions)\n        return observer\n      }\n\n      return new QueryObserver(this.client, defaultedOptions)\n    })\n\n    if (prevObservers.length === newObservers.length && !hasIndexChange) {\n      return\n    }\n\n    this.observers = newObservers\n    this.result = newObservers.map(observer => observer.getCurrentResult())\n\n    if (!this.listeners.length) {\n      return\n    }\n\n    difference(prevObservers, newObservers).forEach(observer => {\n      observer.destroy()\n    })\n\n    difference(newObservers, prevObservers).forEach(observer => {\n      observer.subscribe(result => {\n        this.onUpdate(observer, result)\n      })\n    })\n\n    this.notify()\n  }\n\n  private onUpdate(observer: QueryObserver, result: QueryObserverResult): void {\n    const index = this.observers.indexOf(observer)\n    if (index !== -1) {\n      this.result = replaceAt(this.result, index, result)\n      this.notify()\n    }\n  }\n\n  private notify(): void {\n    notifyManager.batch(() => {\n      this.listeners.forEach(listener => {\n        listener(this.result)\n      })\n    })\n  }\n}\n","import type { QueryBehavior } from './query'\nimport type { InfiniteData, QueryFunctionContext, QueryOptions } from './types'\n\nexport function infiniteQueryBehavior<\n  TData,\n  TError,\n  TQueryFnData\n>(): QueryBehavior<InfiniteData<TData>, TError, TQueryFnData> {\n  return {\n    onFetch: context => {\n      context.fetchFn = () => {\n        const fetchMore = context.fetchOptions?.meta?.fetchMore\n        const pageParam = fetchMore?.pageParam\n        const isFetchingNextPage = fetchMore?.direction === 'forward'\n        const isFetchingPreviousPage = fetchMore?.direction === 'backward'\n        const oldPages = context.state.data?.pages || []\n        const oldPageParams = context.state.data?.pageParams || []\n        let newPageParams = oldPageParams\n\n        // Get query function\n        const queryFn =\n          context.options.queryFn || (() => Promise.reject('Missing queryFn'))\n\n        // Create function to fetch a page\n        const fetchPage = (\n          pages: unknown[],\n          manual?: boolean,\n          param?: unknown,\n          previous?: boolean\n        ): Promise<unknown[]> => {\n          if (typeof param === 'undefined' && !manual && pages.length) {\n            return Promise.resolve(pages)\n          }\n\n          const queryFnContext: QueryFunctionContext = {\n            queryKey: context.queryKey,\n            pageParam: param,\n          }\n\n          let cancelFn: undefined | (() => any)\n          const queryFnResult = queryFn(queryFnContext)\n          if ((queryFnResult as any).cancel) {\n            cancelFn = (queryFnResult as any).cancel\n          }\n\n          const promise = Promise.resolve(queryFnResult).then(page => {\n            newPageParams = previous\n              ? [param, ...newPageParams]\n              : [...newPageParams, param]\n            return previous ? [page, ...pages] : [...pages, page]\n          })\n          if (cancelFn) {\n            (promise as any).cancel = cancelFn\n          }\n          return promise\n        }\n\n        let promise\n\n        // Fetch first page?\n        if (!oldPages.length) {\n          promise = fetchPage([])\n        }\n\n        // Fetch next page?\n        else if (isFetchingNextPage) {\n          const manual = typeof pageParam !== 'undefined'\n          const param = manual\n            ? pageParam\n            : getNextPageParam(context.options, oldPages)\n          promise = fetchPage(oldPages, manual, param)\n        }\n\n        // Fetch previous page?\n        else if (isFetchingPreviousPage) {\n          const manual = typeof pageParam !== 'undefined'\n          const param = manual\n            ? pageParam\n            : getPreviousPageParam(context.options, oldPages)\n          promise = fetchPage(oldPages, manual, param, true)\n        }\n\n        // Refetch pages\n        else {\n          newPageParams = []\n\n          const manual = typeof context.options.getNextPageParam === 'undefined'\n\n          // Fetch first page\n          promise = fetchPage([], manual, oldPageParams[0])\n\n          // Fetch remaining pages\n          for (let i = 1; i < oldPages.length; i++) {\n            promise = promise.then(pages => {\n              const param = manual\n                ? oldPageParams[i]\n                : getNextPageParam(context.options, pages)\n              return fetchPage(pages, manual, param)\n            })\n          }\n        }\n\n        const finalPromise = promise.then(pages => ({\n          pages,\n          pageParams: newPageParams,\n        }))\n        if ((promise as any).cancel) {\n          (finalPromise as any).cancel = (promise as any).cancel\n        }\n        return finalPromise\n      }\n    },\n  }\n}\n\nexport function getNextPageParam(\n  options: QueryOptions<any, any>,\n  pages: unknown[]\n): unknown | undefined {\n  return options.getNextPageParam?.(pages[pages.length - 1], pages)\n}\n\nexport function getPreviousPageParam(\n  options: QueryOptions<any, any>,\n  pages: unknown[]\n): unknown | undefined {\n  return options.getPreviousPageParam?.(pages[0], pages)\n}\n\n/**\n * Checks if there is a next page.\n * Returns `undefined` if it cannot be determined.\n */\nexport function hasNextPage(\n  options: QueryOptions<any, any>,\n  pages?: unknown\n): boolean | undefined {\n  if (options.getNextPageParam && Array.isArray(pages)) {\n    const nextPageParam = getNextPageParam(options, pages)\n    return (\n      typeof nextPageParam !== 'undefined' &&\n      nextPageParam !== null &&\n      nextPageParam !== false\n    )\n  }\n}\n\n/**\n * Checks if there is a previous page.\n * Returns `undefined` if it cannot be determined.\n */\nexport function hasPreviousPage(\n  options: QueryOptions<any, any>,\n  pages?: unknown\n): boolean | undefined {\n  if (options.getPreviousPageParam && Array.isArray(pages)) {\n    const previousPageParam = getPreviousPageParam(options, pages)\n    return (\n      typeof previousPageParam !== 'undefined' &&\n      previousPageParam !== null &&\n      previousPageParam !== false\n    )\n  }\n}\n","import type {\n  FetchNextPageOptions,\n  FetchPreviousPageOptions,\n  InfiniteData,\n  InfiniteQueryObserverOptions,\n  InfiniteQueryObserverResult,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport { ObserverFetchOptions, QueryObserver } from './queryObserver'\nimport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior,\n} from './infiniteQueryBehavior'\n\ntype InfiniteQueryObserverListener<TData, TError> = (\n  result: InfiniteQueryObserverResult<TData, TError>\n) => void\n\nexport class InfiniteQueryObserver<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData,\n  TQueryData = TQueryFnData\n> extends QueryObserver<\n  InfiniteData<TData>,\n  TError,\n  TQueryFnData,\n  InfiniteData<TQueryData>\n> {\n  // Type override\n  subscribe!: (\n    listener?: InfiniteQueryObserverListener<TData, TError>\n  ) => () => void\n\n  // Type override\n  getCurrentResult!: () => InfiniteQueryObserverResult<TData, TError>\n\n  // Type override\n  protected fetch!: (\n    fetchOptions?: ObserverFetchOptions\n  ) => Promise<InfiniteQueryObserverResult<TData, TError>>\n\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(\n    client: QueryClient,\n    options: InfiniteQueryObserverOptions<\n      TData,\n      TError,\n      TQueryFnData,\n      TQueryData\n    >\n  ) {\n    super(client, options)\n  }\n\n  protected bindMethods(): void {\n    super.bindMethods()\n    this.fetchNextPage = this.fetchNextPage.bind(this)\n    this.fetchPreviousPage = this.fetchPreviousPage.bind(this)\n  }\n\n  setOptions(\n    options?: InfiniteQueryObserverOptions<\n      TData,\n      TError,\n      TQueryFnData,\n      TQueryData\n    >\n  ): void {\n    super.setOptions({\n      ...options,\n      behavior: infiniteQueryBehavior<TData, TError, TQueryFnData>(),\n    })\n  }\n\n  fetchNextPage(\n    options?: FetchNextPageOptions\n  ): Promise<InfiniteQueryObserverResult<TData, TError>> {\n    return this.fetch({\n      cancelRefetch: true,\n      throwOnError: options?.throwOnError,\n      meta: {\n        fetchMore: { direction: 'forward', pageParam: options?.pageParam },\n      },\n    })\n  }\n\n  fetchPreviousPage(\n    options?: FetchPreviousPageOptions\n  ): Promise<InfiniteQueryObserverResult<TData, TError>> {\n    return this.fetch({\n      cancelRefetch: true,\n      throwOnError: options?.throwOnError,\n      meta: {\n        fetchMore: { direction: 'backward', pageParam: options?.pageParam },\n      },\n    })\n  }\n\n  protected getNewResult(\n    willFetch?: boolean\n  ): InfiniteQueryObserverResult<TData, TError> {\n    const { state } = this.getCurrentQuery()\n    const result = super.getNewResult(willFetch)\n    return {\n      ...result,\n      fetchNextPage: this.fetchNextPage,\n      fetchPreviousPage: this.fetchPreviousPage,\n      hasNextPage: hasNextPage(this.options, result.data?.pages),\n      hasPreviousPage: hasPreviousPage(this.options, result.data?.pages),\n      isFetchingNextPage:\n        state.isFetching && state.fetchMeta?.fetchMore?.direction === 'forward',\n      isFetchingPreviousPage:\n        state.isFetching &&\n        state.fetchMeta?.fetchMore?.direction === 'backward',\n    }\n  }\n}\n","import { Action, getDefaultState, Mutation } from './mutation'\nimport { notifyManager } from './notifyManager'\nimport type { QueryClient } from './queryClient'\nimport { Subscribable } from './subscribable'\nimport type {\n  MutateOptions,\n  MutationObserverResult,\n  MutationObserverOptions,\n} from './types'\nimport { getStatusProps } from './utils'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TContext> = (\n  result: MutationObserverResult<TData, TError, TVariables, TContext>\n) => void\n\ninterface NotifyOptions {\n  listeners?: boolean\n  onError?: boolean\n  onSuccess?: boolean\n}\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TContext>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TContext>\n\n  private client: QueryClient\n  private currentResult!: MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  >\n  private currentMutation?: Mutation<TData, TError, TVariables, TContext>\n  private mutateOptions?: MutateOptions<TData, TError, TVariables, TContext>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>\n  ) {\n    super()\n\n    this.client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options?: MutationObserverOptions<TData, TError, TVariables, TContext>\n  ) {\n    this.options = this.client.defaultMutationOptions(options)\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.listeners.length) {\n      this.currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(action: Action<TData, TError, TVariables, TContext>): void {\n    this.updateResult()\n\n    // Determine which callbacks to trigger\n    const notifyOptions: NotifyOptions = {\n      listeners: true,\n    }\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true\n    }\n\n    this.notify(notifyOptions)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  > {\n    return this.currentResult\n  }\n\n  reset(): void {\n    this.currentMutation = undefined\n    this.updateResult()\n    this.notify({ listeners: true })\n  }\n\n  mutate(\n    variables?: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TContext>\n  ): Promise<TData> {\n    this.mutateOptions = options\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this)\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, {\n      ...this.options,\n      variables: variables ?? this.options.variables,\n    })\n\n    this.currentMutation.addObserver(this)\n\n    return this.currentMutation.execute()\n  }\n\n  private updateResult(): void {\n    const state = this.currentMutation\n      ? this.currentMutation.state\n      : getDefaultState<TData, TError, TVariables, TContext>()\n\n    this.currentResult = {\n      ...state,\n      ...getStatusProps(state.status),\n      mutate: this.mutate,\n      reset: this.reset,\n    }\n  }\n\n  private notify(options: NotifyOptions) {\n    notifyManager.batch(() => {\n      // First trigger the mutate callbacks\n      if (this.mutateOptions) {\n        if (options.onSuccess) {\n          this.mutateOptions.onSuccess?.(\n            this.currentResult.data!,\n            this.currentResult.variables!,\n            this.currentResult.context!\n          )\n          this.mutateOptions.onSettled?.(\n            this.currentResult.data!,\n            null,\n            this.currentResult.variables!,\n            this.currentResult.context\n          )\n        } else if (options.onError) {\n          this.mutateOptions.onError?.(\n            this.currentResult.error!,\n            this.currentResult.variables!,\n            this.currentResult.context\n          )\n          this.mutateOptions.onSettled?.(\n            undefined,\n            this.currentResult.error,\n            this.currentResult.variables!,\n            this.currentResult.context\n          )\n        }\n      }\n\n      // Then trigger the listeners\n      if (options.listeners) {\n        this.listeners.forEach(listener => {\n          listener(this.currentResult)\n        })\n      }\n    })\n  }\n}\n","import React from 'react'\n\nimport { QueryClient } from '../core'\n\nconst QueryClientContext = (() => {\n  const context = React.createContext<QueryClient | undefined>(undefined)\n  if (typeof window !== 'undefined') {\n    // @ts-ignore\n    window.ReactQueryClientContext = context\n  }\n  return context\n})()\n\nfunction getQueryClientContext() {\n  return typeof window !== 'undefined'\n    ? // @ts-ignore\n      (window.ReactQueryClientContext as React.Context<\n        QueryClient | undefined\n      >) ?? QueryClientContext\n    : QueryClientContext\n}\n\nexport const useQueryClient = () => {\n  const queryClient = React.useContext(getQueryClientContext())\n\n  if (!queryClient) {\n    throw new Error('No QueryClient set, use QueryClientProvider to set one')\n  }\n\n  return queryClient\n}\n\nexport interface QueryClientProviderProps {\n  client: QueryClient\n}\n\nexport const QueryClientProvider: React.FC<QueryClientProviderProps> = ({\n  client,\n  children,\n}) => {\n  React.useEffect(() => {\n    client.mount()\n    return () => {\n      client.unmount()\n    }\n  }, [client])\n\n  const Context = getQueryClientContext()\n\n  return <Context.Provider value={client}>{children}</Context.Provider>\n}\n","import React from 'react'\n\n// CONTEXT\n\ninterface QueryErrorResetBoundaryValue {\n  clearReset: () => void\n  isReset: () => boolean\n  reset: () => void\n}\n\nfunction createValue(): QueryErrorResetBoundaryValue {\n  let isReset = false\n  return {\n    clearReset: () => {\n      isReset = false\n    },\n    reset: () => {\n      isReset = true\n    },\n    isReset: () => {\n      return isReset\n    },\n  }\n}\n\nconst QueryErrorResetBoundaryContext = React.createContext(createValue())\n\n// HOOK\n\nexport const useQueryErrorResetBoundary = () =>\n  React.useContext(QueryErrorResetBoundaryContext)\n\n// COMPONENT\n\nexport interface QueryErrorResetBoundaryProps {\n  children:\n    | ((value: QueryErrorResetBoundaryValue) => React.ReactNode)\n    | React.ReactNode\n}\n\nexport const QueryErrorResetBoundary: React.FC<QueryErrorResetBoundaryProps> = ({\n  children,\n}) => {\n  const value = React.useMemo(() => createValue(), [])\n  return (\n    <QueryErrorResetBoundaryContext.Provider value={value}>\n      {typeof children === 'function'\n        ? (children as Function)(value)\n        : children}\n    </QueryErrorResetBoundaryContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { notifyManager } from '../core/notifyManager'\nimport { QueryKey } from '../core/types'\nimport { parseFilterArgs, QueryFilters } from '../core/utils'\nimport { useQueryClient } from './QueryClientProvider'\n\nexport function useIsFetching(filters?: QueryFilters): number\nexport function useIsFetching(\n  queryKey?: QueryKey,\n  filters?: QueryFilters\n): number\nexport function useIsFetching(\n  arg1?: QueryKey | QueryFilters,\n  arg2?: QueryFilters\n): number {\n  const queryClient = useQueryClient()\n  const [filters] = parseFilterArgs(arg1, arg2)\n  const [isFetching, setIsFetching] = React.useState(\n    queryClient.isFetching(filters)\n  )\n\n  const filtersRef = React.useRef(filters)\n  filtersRef.current = filters\n  const isFetchingRef = React.useRef(isFetching)\n  isFetchingRef.current = isFetching\n\n  React.useEffect(\n    () =>\n      queryClient.getQueryCache().subscribe(\n        notifyManager.batchCalls(() => {\n          const newIsFetching = queryClient.isFetching(filtersRef.current)\n          if (isFetchingRef.current !== newIsFetching) {\n            setIsFetching(newIsFetching)\n          }\n        })\n      ),\n    [queryClient]\n  )\n\n  return isFetching\n}\n","import React from 'react'\n\nimport { notifyManager } from '../core/notifyManager'\nimport { noop, parseMutationArgs } from '../core/utils'\nimport { MutationObserver } from '../core/mutationObserver'\nimport { useQueryClient } from './QueryClientProvider'\nimport {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\nimport {\n  MutationFunction,\n  MutationKey,\n  MutationObserverResult,\n} from '../core/types'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  mutationFn: MutationFunction<TData, TVariables>,\n  options?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  mutationKey: MutationKey,\n  options?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  mutationKey: MutationKey,\n  mutationFn?: MutationFunction<TData, TVariables>,\n  options?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  arg1:\n    | MutationKey\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg2?:\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg3?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext> {\n  const options = parseMutationArgs(arg1, arg2, arg3)\n  const queryClient = useQueryClient()\n\n  // Create mutation observer\n  const observerRef = React.useRef<\n    MutationObserver<TData, TError, TVariables, TContext>\n  >()\n  const observer =\n    observerRef.current || new MutationObserver(queryClient, options)\n  observerRef.current = observer\n\n  // Update options\n  if (observer.hasListeners()) {\n    observer.setOptions(options)\n  }\n\n  const [currentResult, setCurrentResult] = React.useState(() =>\n    observer.getCurrentResult()\n  )\n\n  // Subscribe to the observer\n  React.useEffect(\n    () =>\n      observer.subscribe(\n        notifyManager.batchCalls(\n          (\n            result: MutationObserverResult<TData, TError, TVariables, TContext>\n          ) => {\n            // Check if the component is still mounted\n            if (observer.hasListeners()) {\n              setCurrentResult(result)\n            }\n          }\n        )\n      ),\n    [observer]\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TContext>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer]\n  )\n\n  if (currentResult.error && observer.options.useErrorBoundary) {\n    throw currentResult.error\n  }\n\n  return { ...currentResult, mutate, mutateAsync: currentResult.mutate }\n}\n","import React from 'react'\n\nimport { notifyManager } from '../core/notifyManager'\nimport { QueryObserver } from '../core/queryObserver'\nimport { useQueryErrorResetBoundary } from './QueryErrorResetBoundary'\nimport { useQueryClient } from './QueryClientProvider'\nimport { UseBaseQueryOptions } from './types'\n\nexport function useBaseQuery<TData, TError, TQueryFnData, TQueryData>(\n  options: UseBaseQueryOptions<TData, TError, TQueryFnData, TQueryData>,\n  Observer: typeof QueryObserver\n) {\n  const queryClient = useQueryClient()\n  const errorResetBoundary = useQueryErrorResetBoundary()\n  const defaultedOptions = queryClient.defaultQueryObserverOptions(options)\n\n  // Include callbacks in batch renders\n  if (defaultedOptions.onError) {\n    defaultedOptions.onError = notifyManager.batchCalls(\n      defaultedOptions.onError\n    )\n  }\n\n  if (defaultedOptions.onSuccess) {\n    defaultedOptions.onSuccess = notifyManager.batchCalls(\n      defaultedOptions.onSuccess\n    )\n  }\n\n  if (defaultedOptions.onSettled) {\n    defaultedOptions.onSettled = notifyManager.batchCalls(\n      defaultedOptions.onSettled\n    )\n  }\n\n  // Always set stale time when using suspense to prevent\n  // fetching again when directly re-mounting after suspense\n  if (\n    defaultedOptions.suspense &&\n    typeof defaultedOptions.staleTime !== 'number'\n  ) {\n    defaultedOptions.staleTime = 1000\n  }\n\n  // Create query observer\n  const observerRef = React.useRef<QueryObserver<any, any, any, any>>()\n  const observer =\n    observerRef.current || new Observer(queryClient, defaultedOptions)\n  observerRef.current = observer\n\n  // Update options\n  if (observer.hasListeners()) {\n    observer.setOptions(defaultedOptions)\n  }\n\n  const [currentResult, setCurrentResult] = React.useState(() =>\n    observer.getCurrentResult()\n  )\n\n  // Subscribe to the observer\n  React.useEffect(() => {\n    errorResetBoundary.clearReset()\n    return observer.subscribe(notifyManager.batchCalls(setCurrentResult))\n  }, [observer, errorResetBoundary])\n\n  // Handle suspense\n  if (observer.options.suspense || observer.options.useErrorBoundary) {\n    if (\n      currentResult.isError &&\n      !errorResetBoundary.isReset() &&\n      !observer.getCurrentQuery().isFetching()\n    ) {\n      throw currentResult.error\n    }\n\n    if (observer.options.suspense && currentResult.isLoading) {\n      errorResetBoundary.clearReset()\n      const unsubscribe = observer.subscribe()\n      throw observer.refetch().finally(unsubscribe)\n    }\n  }\n\n  return currentResult\n}\n","import { QueryObserver } from '../core'\nimport { QueryFunction, QueryKey } from '../core/types'\nimport { parseQueryArgs } from '../core/utils'\nimport { UseQueryOptions, UseQueryResult } from './types'\nimport { useBaseQuery } from './useBaseQuery'\n\n// HOOK\n\nexport function useQuery<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData\n>(\n  options: UseQueryOptions<TData, TError, TQueryFnData>\n): UseQueryResult<TData, TError>\nexport function useQuery<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData\n>(\n  queryKey: QueryKey,\n  options?: UseQueryOptions<TData, TError, TQueryFnData>\n): UseQueryResult<TData, TError>\nexport function useQuery<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData\n>(\n  queryKey: QueryKey,\n  queryFn: QueryFunction<TQueryFnData | TData>,\n  options?: UseQueryOptions<TData, TError, TQueryFnData>\n): UseQueryResult<TData, TError>\nexport function useQuery<TData, TError, TQueryFnData = TData>(\n  arg1: QueryKey | UseQueryOptions<TData, TError, TQueryFnData>,\n  arg2?:\n    | QueryFunction<TData | TQueryFnData>\n    | UseQueryOptions<TData, TError, TQueryFnData>,\n  arg3?: UseQueryOptions<TData, TError, TQueryFnData>\n): UseQueryResult<TData, TError> {\n  const parsedOptions = parseQueryArgs(arg1, arg2, arg3)\n  return useBaseQuery(parsedOptions, QueryObserver)\n}\n","import React from 'react'\n\nimport { notifyManager } from '../core/notifyManager'\nimport { QueriesObserver } from '../core/queriesObserver'\nimport { useQueryClient } from './QueryClientProvider'\nimport { UseQueryOptions, UseQueryResult } from './types'\n\nexport function useQueries(queries: UseQueryOptions[]): UseQueryResult[] {\n  const queryClient = useQueryClient()\n\n  // Create queries observer\n  const observerRef = React.useRef<QueriesObserver>()\n  const observer =\n    observerRef.current || new QueriesObserver(queryClient, queries)\n  observerRef.current = observer\n\n  // Update queries\n  if (observer.hasListeners()) {\n    observer.setQueries(queries)\n  }\n\n  const [currentResult, setCurrentResult] = React.useState(() =>\n    observer.getCurrentResult()\n  )\n\n  // Subscribe to the observer\n  React.useEffect(\n    () => observer.subscribe(notifyManager.batchCalls(setCurrentResult)),\n    [observer]\n  )\n\n  return currentResult\n}\n","import { QueryObserver } from '../core'\nimport { InfiniteQueryObserver } from '../core/infiniteQueryObserver'\nimport { QueryFunction, QueryKey } from '../core/types'\nimport { parseQueryArgs } from '../core/utils'\nimport { UseInfiniteQueryOptions, UseInfiniteQueryResult } from './types'\nimport { useBaseQuery } from './useBaseQuery'\n\n// HOOK\n\nexport function useInfiniteQuery<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData\n>(\n  options: UseInfiniteQueryOptions<TData, TError, TQueryFnData>\n): UseInfiniteQueryResult<TData, TError>\nexport function useInfiniteQuery<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData\n>(\n  queryKey: QueryKey,\n  options?: UseInfiniteQueryOptions<TData, TError, TQueryFnData>\n): UseInfiniteQueryResult<TData, TError>\nexport function useInfiniteQuery<\n  TData = unknown,\n  TError = unknown,\n  TQueryFnData = TData\n>(\n  queryKey: QueryKey,\n  queryFn: QueryFunction<TQueryFnData | TData>,\n  options?: UseInfiniteQueryOptions<TData, TError, TQueryFnData>\n): UseInfiniteQueryResult<TData, TError>\nexport function useInfiniteQuery<TData, TError, TQueryFnData = TData>(\n  arg1: QueryKey | UseInfiniteQueryOptions<TData, TError, TQueryFnData>,\n  arg2?:\n    | QueryFunction<TQueryFnData | TData>\n    | UseInfiniteQueryOptions<TData, TError, TQueryFnData>,\n  arg3?: UseInfiniteQueryOptions<TData, TError, TQueryFnData>\n): UseInfiniteQueryResult<TData, TError> {\n  const options = parseQueryArgs(arg1, arg2, arg3)\n  return useBaseQuery(\n    options,\n    InfiniteQueryObserver as typeof QueryObserver\n  ) as UseInfiniteQueryResult<TData, TError>\n}\n"],"names":["_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","isServer","window","noop","undefined","functionalUpdate","updater","input","isValidTimeout","value","Infinity","ensureArray","Array","isArray","difference","array1","array2","filter","x","indexOf","replaceAt","array","index","copy","slice","timeUntilStale","updatedAt","staleTime","Math","max","Date","now","parseQueryArgs","arg1","arg2","arg3","isQueryKey","queryKey","queryFn","parseMutationArgs","mutationKey","mutationFn","parseFilterArgs","matchQuery","filters","query","active","exact","fetching","inactive","predicate","stale","hashFn","getQueryKeyHashFn","options","queryHash","partialMatchKey","isActive","isStale","isFetching","queryKeyHashFn","hashQueryKey","stableValueHash","JSON","stringify","_","val","isPlainObject","keys","sort","reduce","result","a","b","partialDeepEqual","some","replaceEqualDeep","aSize","bItems","bSize","equalItems","shallowEqualObjects","o","hasObjectPrototype","ctor","prot","toString","isError","Error","sleep","timeout","Promise","resolve","setTimeout","getStatusProps","status","isLoading","isSuccess","isIdle","scheduleMicrotask","callback","then","catch","error","NotifyManager","queue","transactions","notifyFn","batchNotifyFn","batch","flush","schedule","push","batchCalls","args","forEach","setNotifyFunction","fn","setBatchNotifyFunction","notifyManager","logger","console","warn","log","getLogger","setLogger","newLogger","Subscribable","listeners","subscribe","listener","onSubscribe","onUnsubscribe","hasListeners","FocusManager","removeEventListener","setDefaultEventListener","setEventListener","setup","focused","setFocused","onFocus","isFocused","document","includes","visibilityState","addEventListener","focusManager","OnlineManager","online","setOnline","onOnline","isOnline","navigator","onLine","onlineManager","defaultRetryDelay","failureCount","min","isCancelable","cancel","CancelledError","revert","silent","isCancelledError","Retryer","config","cancelRetry","cancelFn","continueFn","promiseResolve","promiseReject","cancelOptions","continue","isPaused","isResolved","isTransportCancelable","promise","outerResolve","outerReject","reject","pause","continueResolve","onPause","onContinue","run","promiseOrValue","retry","retryDelay","delay","shouldRetry","onFail","Query","defaultOptions","setOptions","observers","cache","initialState","state","getDefaultState","scheduleGc","cacheTime","setDefaultOptions","clearGcTimeout","gcTimeout","remove","clearTimeout","setData","prevData","data","isDataEqual","structuralSharing","dispatch","type","dataUpdatedAt","setState","retryer","destroy","reset","observer","enabled","isInvalidated","getCurrentResult","isStaleByTime","find","willFetchOnWindowFocus","refetch","willFetchOnReconnect","addObserver","notify","removeObserver","invalidate","fetch","fetchOptions","cancelRefetch","queryFnContext","pageParam","fetchFn","context","behavior","onFetch","fetchMeta","meta","action","reducer","onQueryUpdate","initialData","hasData","dataUpdateCount","errorUpdateCount","errorUpdatedAt","fetchFailureCount","QueryCache","queries","queriesMap","build","client","get","defaultQueryOptions","getQueryDefaults","add","queryInMap","clear","getAll","findAll","Mutation","mutationId","mutationCache","execute","restored","variables","onMutate","executeMutation","onSuccess","onSettled","onError","onMutationUpdate","MutationCache","mutations","mutation","defaultMutationOptions","getMutationDefaults","resumePausedMutations","pausedMutations","QueryClient","queryCache","queryDefaults","mutationDefaults","mount","unsubscribeFocus","unsubscribeOnline","unmount","getQueryData","setQueryData","parsedOptions","defaultedOptions","getQueryState","removeQueries","resetQueries","refetchFilters","refetchQueries","cancelQueries","promises","map","all","invalidateQueries","refetchActive","refetchInactive","throwOnError","fetchQuery","prefetchQuery","cancelMutations","getMutationCache","getQueryCache","getDefaultOptions","setQueryDefaults","setMutationDefaults","_defaulted","defaultQueryObserverOptions","QueryObserver","initialDataUpdateCount","initialErrorUpdateCount","bindMethods","bind","updateQuery","currentQuery","willFetchOnMount","executeFetch","updateTimers","willLoadOnMount","willRefetchOnMount","refetchOnMount","refetchOnReconnect","refetchOnWindowFocus","willFetchOptionally","clearTimers","prevOptions","prevQuery","optionalFetch","updateStaleTimeout","refetchInterval","updateRefetchInterval","currentResult","getNextResult","unsubscribe","getCurrentQuery","updateResult","clearStaleTimeout","time","staleTimeoutId","prevResult","shouldNotifyListeners","clearRefetchInterval","refetchIntervalId","setInterval","refetchIntervalInBackground","clearInterval","getNewResult","willFetch","isPreviousData","isPlaceholderData","keepPreviousData","previousQueryResult","select","currentResultState","placeholderData","isFetched","isFetchedAfterMount","isLoadingError","isRefetchError","notifyOnChangeProps","notifyOnChangePropsExclusions","changed","isIncluded","isExcluded","notifyOptions","QueriesObserver","updateObservers","onUpdate","setQueries","hasIndexChange","prevObservers","newObservers","infiniteQueryBehavior","fetchMore","isFetchingNextPage","direction","isFetchingPreviousPage","oldPages","pages","oldPageParams","pageParams","newPageParams","fetchPage","manual","param","previous","queryFnResult","page","getNextPageParam","getPreviousPageParam","finalPromise","hasNextPage","nextPageParam","hasPreviousPage","previousPageParam","InfiniteQueryObserver","fetchNextPage","fetchPreviousPage","MutationObserver","mutate","currentMutation","mutateOptions","QueryClientContext","React","createContext","ReactQueryClientContext","getQueryClientContext","useQueryClient","queryClient","useContext","QueryClientProvider","children","useEffect","Context","createValue","isReset","clearReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","QueryErrorResetBoundary","useMemo","useIsFetching","useState","setIsFetching","filtersRef","useRef","current","isFetchingRef","newIsFetching","useMutation","observerRef","setCurrentResult","useCallback","useErrorBoundary","mutateAsync","useBaseQuery","Observer","errorResetBoundary","suspense","finally","useQuery","useQueries","useInfiniteQuery"],"mappings":";;;;;;;;EAAe,SAASA,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;EAC3DD,EAAAA,QAAQ,CAACE,SAAT,GAAqBC,MAAM,CAACC,MAAP,CAAcH,UAAU,CAACC,SAAzB,CAArB;EACAF,EAAAA,QAAQ,CAACE,SAAT,CAAmBG,WAAnB,GAAiCL,QAAjC;EACAA,EAAAA,QAAQ,CAACM,SAAT,GAAqBL,UAArB;EACD;;ECJc,SAASM,QAAT,GAAoB;EACjCA,EAAAA,QAAQ,GAAGJ,MAAM,CAACK,MAAP,IAAiB,UAAUC,MAAV,EAAkB;EAC5C,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;EACzC,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;EAEA,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;EACtB,YAAIV,MAAM,CAACD,SAAP,CAAiBa,cAAjB,CAAgCC,IAAhC,CAAqCH,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;EACrDL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;EACD;EACF;EACF;;EAED,WAAOL,MAAP;EACD,GAZD;;EAcA,SAAOF,QAAQ,CAACU,KAAT,CAAe,IAAf,EAAqBN,SAArB,CAAP;EACD;;ECJD;EAuCA;EAEO,IAAMO,QAAQ,GAAG,OAAOC,MAAP,KAAkB,WAAnC;EAEA,SAASC,IAAT,GAA2B;EAChC,SAAOC,SAAP;EACD;EAEM,SAASC,gBAAT,CACLC,OADK,EAELC,KAFK,EAGI;EACT,SAAO,OAAOD,OAAP,KAAmB,UAAnB,GACFA,OAAD,CAAiDC,KAAjD,CADG,GAEHD,OAFJ;EAGD;EAEM,SAASE,cAAT,CAAwBC,KAAxB,EAAqD;EAC1D,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,IAAI,CAAtC,IAA2CA,KAAK,KAAKC,QAA5D;EACD;EAEM,SAASC,WAAT,CAAwBF,KAAxB,EAA6C;EAClD,SAAOG,KAAK,CAACC,OAAN,CAAcJ,KAAd,IAAuBA,KAAvB,GAA+B,CAACA,KAAD,CAAtC;EACD;EAEM,SAASK,UAAT,CAAuBC,MAAvB,EAAoCC,MAApC,EAAsD;EAC3D,SAAOD,MAAM,CAACE,MAAP,CAAc,UAAAC,CAAC;EAAA,WAAIF,MAAM,CAACG,OAAP,CAAeD,CAAf,MAAsB,CAAC,CAA3B;EAAA,GAAf,CAAP;EACD;EAEM,SAASE,SAAT,CAAsBC,KAAtB,EAAkCC,KAAlC,EAAiDb,KAAjD,EAAgE;EACrE,MAAMc,IAAI,GAAGF,KAAK,CAACG,KAAN,CAAY,CAAZ,CAAb;EACAD,EAAAA,IAAI,CAACD,KAAD,CAAJ,GAAcb,KAAd;EACA,SAAOc,IAAP;EACD;EAEM,SAASE,cAAT,CAAwBC,SAAxB,EAA2CC,SAA3C,EAAuE;EAC5E,SAAOC,IAAI,CAACC,GAAL,CAASH,SAAS,IAAIC,SAAS,IAAI,CAAjB,CAAT,GAA+BG,IAAI,CAACC,GAAL,EAAxC,EAAoD,CAApD,CAAP;EACD;EAEM,SAASC,cAAT,CACLC,IADK,EAELC,IAFK,EAGLC,IAHK,EAIK;EACV,MAAI,CAACC,UAAU,CAACH,IAAD,CAAf,EAAuB;EACrB,WAAOA,IAAP;EACD;;EAED,MAAI,OAAOC,IAAP,KAAgB,UAApB,EAAgC;EAC9B,wBAAYC,IAAZ;EAAkBE,MAAAA,QAAQ,EAAEJ,IAA5B;EAAkCK,MAAAA,OAAO,EAAEJ;EAA3C;EACD;;EAED,sBAAYA,IAAZ;EAAkBG,IAAAA,QAAQ,EAAEJ;EAA5B;EACD;EAEM,SAASM,iBAAT,CAGLN,IAHK,EAILC,IAJK,EAKLC,IALK,EAMK;EACV,MAAIC,UAAU,CAACH,IAAD,CAAd,EAAsB;EACpB,QAAI,OAAOC,IAAP,KAAgB,UAApB,EAAgC;EAC9B,0BAAYC,IAAZ;EAAkBK,QAAAA,WAAW,EAAEP,IAA/B;EAAqCQ,QAAAA,UAAU,EAAEP;EAAjD;EACD;;EACD,wBAAYA,IAAZ;EAAkBM,MAAAA,WAAW,EAAEP;EAA/B;EACD;;EAED,MAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;EAC9B,wBAAYC,IAAZ;EAAkBO,MAAAA,UAAU,EAAER;EAA9B;EACD;;EAED,sBAAYA,IAAZ;EACD;EAEM,SAASS,eAAT,CAILT,IAJK,EAKLC,IALK,EAMLC,IANK,EAO6B;EAClC,SAAQC,UAAU,CAACH,IAAD,CAAV,GACJ,cAAMC,IAAN;EAAYG,IAAAA,QAAQ,EAAEJ;EAAtB,MAA8BE,IAA9B,CADI,GAEJ,CAACF,IAAI,IAAI,EAAT,EAAaC,IAAb,CAFJ;EAGD;EAEM,SAASS,UAAT,CACLC,OADK,EAELC,KAFK,EAGI;EAAA,MAEPC,MAFO,GASLF,OATK,CAEPE,MAFO;EAAA,MAGPC,KAHO,GASLH,OATK,CAGPG,KAHO;EAAA,MAIPC,QAJO,GASLJ,OATK,CAIPI,QAJO;EAAA,MAKPC,QALO,GASLL,OATK,CAKPK,QALO;EAAA,MAMPC,SANO,GASLN,OATK,CAMPM,SANO;EAAA,MAOPb,QAPO,GASLO,OATK,CAOPP,QAPO;EAAA,MAQPc,KARO,GASLP,OATK,CAQPO,KARO;;EAWT,MAAIf,UAAU,CAACC,QAAD,CAAd,EAA0B;EACxB,QAAIU,KAAJ,EAAW;EACT,UAAMK,MAAM,GAAGC,iBAAiB,CAACR,KAAK,CAACS,OAAP,CAAhC;;EACA,UAAIT,KAAK,CAACU,SAAN,KAAoBH,MAAM,CAACf,QAAD,CAA9B,EAA0C;EACxC,eAAO,KAAP;EACD;EACF,KALD,MAKO,IAAI,CAACmB,eAAe,CAACX,KAAK,CAACR,QAAP,EAAiBA,QAAjB,CAApB,EAAgD;EACrD,aAAO,KAAP;EACD;EACF;;EAED,MAAIoB,QAAJ;;EAEA,MAAIR,QAAQ,KAAK,KAAb,IAAuBH,MAAM,IAAI,CAACG,QAAtC,EAAiD;EAC/CQ,IAAAA,QAAQ,GAAG,IAAX;EACD,GAFD,MAEO,IAAIX,MAAM,KAAK,KAAX,IAAqBG,QAAQ,IAAI,CAACH,MAAtC,EAA+C;EACpDW,IAAAA,QAAQ,GAAG,KAAX;EACD;;EAED,MAAI,OAAOA,QAAP,KAAoB,SAApB,IAAiCZ,KAAK,CAACY,QAAN,OAAqBA,QAA1D,EAAoE;EAClE,WAAO,KAAP;EACD;;EAED,MAAI,OAAON,KAAP,KAAiB,SAAjB,IAA8BN,KAAK,CAACa,OAAN,OAAoBP,KAAtD,EAA6D;EAC3D,WAAO,KAAP;EACD;;EAED,MAAI,OAAOH,QAAP,KAAoB,SAApB,IAAiCH,KAAK,CAACc,UAAN,OAAuBX,QAA5D,EAAsE;EACpE,WAAO,KAAP;EACD;;EAED,MAAIE,SAAS,IAAI,CAACA,SAAS,CAACL,KAAD,CAA3B,EAAoC;EAClC,WAAO,KAAP;EACD;;EAED,SAAO,IAAP;EACD;EAEM,SAASQ,iBAAT,CACLC,OADK,EAEiB;EACtB,SAAO,CAAAA,OAAO,QAAP,YAAAA,OAAO,CAAEM,cAAT,KAA2BC,YAAlC;EACD;EAED;;;;EAGO,SAASA,YAAT,CAAsBxB,QAAtB,EAAkD;EACvD,SAAOyB,eAAe,CAACzB,QAAD,CAAtB;EACD;EAED;;;;EAGO,SAASyB,eAAT,CAAyBrD,KAAzB,EAA6C;EAClD,SAAOsD,IAAI,CAACC,SAAL,CAAevD,KAAf,EAAsB,UAACwD,CAAD,EAAIC,GAAJ;EAAA,WAC3BC,aAAa,CAACD,GAAD,CAAb,GACIhF,MAAM,CAACkF,IAAP,CAAYF,GAAZ,EACGG,IADH,GAEGC,MAFH,CAEU,UAACC,MAAD,EAAS1E,GAAT,EAAiB;EACvB0E,MAAAA,MAAM,CAAC1E,GAAD,CAAN,GAAcqE,GAAG,CAACrE,GAAD,CAAjB;EACA,aAAO0E,MAAP;EACD,KALH,EAKK,EALL,CADJ,GAOIL,GARuB;EAAA,GAAtB,CAAP;EAUD;EAED;;;;EAGO,SAASV,eAAT,CACLgB,CADK,EAELC,CAFK,EAGI;EACT,SAAOC,gBAAgB,CAAC/D,WAAW,CAAC6D,CAAD,CAAZ,EAAiB7D,WAAW,CAAC8D,CAAD,CAA5B,CAAvB;EACD;EAED;;;;EAGO,SAASC,gBAAT,CAA0BF,CAA1B,EAAkCC,CAAlC,EAAmD;EACxD,MAAID,CAAC,KAAKC,CAAV,EAAa;EACX,WAAO,IAAP;EACD;;EAED,MAAI,OAAOD,CAAP,KAAa,OAAOC,CAAxB,EAA2B;EACzB,WAAO,KAAP;EACD;;EAED,MAAI,OAAOD,CAAP,KAAa,QAAb,IAAyB,OAAOC,CAAP,KAAa,QAA1C,EAAoD;EAClD,WAAO,CAACvF,MAAM,CAACkF,IAAP,CAAYK,CAAZ,EAAeE,IAAf,CAAoB,UAAA9E,GAAG;EAAA,aAAI,CAAC6E,gBAAgB,CAACF,CAAC,CAAC3E,GAAD,CAAF,EAAS4E,CAAC,CAAC5E,GAAD,CAAV,CAArB;EAAA,KAAvB,CAAR;EACD;;EAED,SAAO,KAAP;EACD;EAED;;;;;;EAMO,SAAS+E,gBAAT,CAA0BJ,CAA1B,EAAkCC,CAAlC,EAA+C;EACpD,MAAID,CAAC,KAAKC,CAAV,EAAa;EACX,WAAOD,CAAP;EACD;;EAED,MAAMnD,KAAK,GAAGT,KAAK,CAACC,OAAN,CAAc2D,CAAd,KAAoB5D,KAAK,CAACC,OAAN,CAAc4D,CAAd,CAAlC;;EAEA,MAAIpD,KAAK,IAAK8C,aAAa,CAACK,CAAD,CAAb,IAAoBL,aAAa,CAACM,CAAD,CAA/C,EAAqD;EACnD,QAAMI,KAAK,GAAGxD,KAAK,GAAGmD,CAAC,CAAC7E,MAAL,GAAcT,MAAM,CAACkF,IAAP,CAAYI,CAAZ,EAAe7E,MAAhD;EACA,QAAMmF,MAAM,GAAGzD,KAAK,GAAGoD,CAAH,GAAOvF,MAAM,CAACkF,IAAP,CAAYK,CAAZ,CAA3B;EACA,QAAMM,KAAK,GAAGD,MAAM,CAACnF,MAArB;EACA,QAAM4B,IAAS,GAAGF,KAAK,GAAG,EAAH,GAAQ,EAA/B;EAEA,QAAI2D,UAAU,GAAG,CAAjB;;EAEA,SAAK,IAAIvF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsF,KAApB,EAA2BtF,CAAC,EAA5B,EAAgC;EAC9B,UAAMI,GAAG,GAAGwB,KAAK,GAAG5B,CAAH,GAAOqF,MAAM,CAACrF,CAAD,CAA9B;EACA8B,MAAAA,IAAI,CAAC1B,GAAD,CAAJ,GAAY+E,gBAAgB,CAACJ,CAAC,CAAC3E,GAAD,CAAF,EAAS4E,CAAC,CAAC5E,GAAD,CAAV,CAA5B;;EACA,UAAI0B,IAAI,CAAC1B,GAAD,CAAJ,KAAc2E,CAAC,CAAC3E,GAAD,CAAnB,EAA0B;EACxBmF,QAAAA,UAAU;EACX;EACF;;EAED,WAAOH,KAAK,KAAKE,KAAV,IAAmBC,UAAU,KAAKH,KAAlC,GAA0CL,CAA1C,GAA8CjD,IAArD;EACD;;EAED,SAAOkD,CAAP;EACD;EAED;;;;EAGO,SAASQ,mBAAT,CAAgCT,CAAhC,EAAsCC,CAAtC,EAAqD;EAC1D,MAAKD,CAAC,IAAI,CAACC,CAAP,IAAcA,CAAC,IAAI,CAACD,CAAxB,EAA4B;EAC1B,WAAO,KAAP;EACD;;EAED,OAAK,IAAM3E,GAAX,IAAkB2E,CAAlB,EAAqB;EACnB,QAAIA,CAAC,CAAC3E,GAAD,CAAD,KAAW4E,CAAC,CAAC5E,GAAD,CAAhB,EAAuB;EACrB,aAAO,KAAP;EACD;EACF;;EAED,SAAO,IAAP;EACD;;EAGM,SAASsE,aAAT,CAAuBe,CAAvB,EAA4C;EACjD,MAAI,CAACC,kBAAkB,CAACD,CAAD,CAAvB,EAA4B;EAC1B,WAAO,KAAP;EACD,GAHgD;;;EAMjD,MAAME,IAAI,GAAGF,CAAC,CAAC9F,WAAf;;EACA,MAAI,OAAOgG,IAAP,KAAgB,WAApB,EAAiC;EAC/B,WAAO,IAAP;EACD,GATgD;;;EAYjD,MAAMC,IAAI,GAAGD,IAAI,CAACnG,SAAlB;;EACA,MAAI,CAACkG,kBAAkB,CAACE,IAAD,CAAvB,EAA+B;EAC7B,WAAO,KAAP;EACD,GAfgD;;;EAkBjD,MAAI,CAACA,IAAI,CAACvF,cAAL,CAAoB,eAApB,CAAL,EAA2C;EACzC,WAAO,KAAP;EACD,GApBgD;;;EAuBjD,SAAO,IAAP;EACD;;EAED,SAASqF,kBAAT,CAA4BD,CAA5B,EAA6C;EAC3C,SAAOhG,MAAM,CAACD,SAAP,CAAiBqG,QAAjB,CAA0BvF,IAA1B,CAA+BmF,CAA/B,MAAsC,iBAA7C;EACD;;EAEM,SAAS9C,UAAT,CAAoB3B,KAApB,EAAmD;EACxD,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BG,KAAK,CAACC,OAAN,CAAcJ,KAAd,CAApC;EACD;EAEM,SAAS8E,OAAT,CAAiB9E,KAAjB,EAA6C;EAClD,SAAOA,KAAK,YAAY+E,KAAxB;EACD;EAEM,SAASC,KAAT,CAAeC,OAAf,EAA+C;EACpD,SAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;EAC5BC,IAAAA,UAAU,CAACD,OAAD,EAAUF,OAAV,CAAV;EACD,GAFM,CAAP;EAGD;EAEM,SAASI,cAAT,CAA+CC,MAA/C,EAA0D;EAC/D,SAAO;EACLA,IAAAA,MAAM,EAANA,MADK;EAELC,IAAAA,SAAS,EAAED,MAAM,KAAK,SAFjB;EAGLE,IAAAA,SAAS,EAAEF,MAAM,KAAK,SAHjB;EAILR,IAAAA,OAAO,EAAEQ,MAAM,KAAK,OAJf;EAKLG,IAAAA,MAAM,EAAEH,MAAM,KAAK;EALd,GAAP;EAOD;EAED;;;;;EAIO,SAASI,iBAAT,CAA2BC,QAA3B,EAAuD;EAC5DT,EAAAA,OAAO,CAACC,OAAR,GACGS,IADH,CACQD,QADR,EAEGE,KAFH,CAES,UAAAC,KAAK;EAAA,WACVV,UAAU,CAAC,YAAM;EACf,YAAMU,KAAN;EACD,KAFS,CADA;EAAA,GAFd;EAOD;;ECvWD;MAEMC;EAMJ,2BAAc;EACZ,SAAKC,KAAL,GAAa,EAAb;EACA,SAAKC,YAAL,GAAoB,CAApB;;EAEA,SAAKC,QAAL,GAAgB,UAACP,QAAD,EAA0B;EACxCA,MAAAA,QAAQ;EACT,KAFD;;EAIA,SAAKQ,aAAL,GAAqB,UAACR,QAAD,EAA0B;EAC7CA,MAAAA,QAAQ;EACT,KAFD;EAGD;;;;WAEDS,QAAA,eAAST,QAAT,EAA+B;EAC7B,SAAKM,YAAL;EACA,QAAMnC,MAAM,GAAG6B,QAAQ,EAAvB;EACA,SAAKM,YAAL;;EACA,QAAI,CAAC,KAAKA,YAAV,EAAwB;EACtB,WAAKI,KAAL;EACD;;EACD,WAAOvC,MAAP;EACD;;WAEDwC,WAAA,kBAASX,QAAT,EAAyC;EAAA;;EACvC,QAAI,KAAKM,YAAT,EAAuB;EACrB,WAAKD,KAAL,CAAWO,IAAX,CAAgBZ,QAAhB;EACD,KAFD,MAEO;EACLD,MAAAA,iBAAiB,CAAC,YAAM;EACtB,QAAA,KAAI,CAACQ,QAAL,CAAcP,QAAd;EACD,OAFgB,CAAjB;EAGD;EACF;EAED;;;;;WAGAa,aAAA,oBAA+Bb,QAA/B,EAA+C;EAAA;;EAC7C,WAAQ,YAAoB;EAAA,wCAAhBc,IAAgB;EAAhBA,QAAAA,IAAgB;EAAA;;EAC1B,MAAA,MAAI,CAACH,QAAL,CAAc,YAAM;EAClBX,QAAAA,QAAQ,MAAR,SAAYc,IAAZ;EACD,OAFD;EAGD,KAJD;EAKD;;WAEDJ,QAAA,iBAAc;EAAA;;EACZ,QAAML,KAAK,GAAG,KAAKA,KAAnB;EACA,SAAKA,KAAL,GAAa,EAAb;;EACA,QAAIA,KAAK,CAAC9G,MAAV,EAAkB;EAChBwG,MAAAA,iBAAiB,CAAC,YAAM;EACtB,QAAA,MAAI,CAACS,aAAL,CAAmB,YAAM;EACvBH,UAAAA,KAAK,CAACU,OAAN,CAAc,UAAAf,QAAQ,EAAI;EACxB,YAAA,MAAI,CAACO,QAAL,CAAcP,QAAd;EACD,WAFD;EAGD,SAJD;EAKD,OANgB,CAAjB;EAOD;EACF;EAED;;;;;;WAIAgB,oBAAA,2BAAkBC,EAAlB,EAAsC;EACpC,SAAKV,QAAL,GAAgBU,EAAhB;EACD;EAED;;;;;;WAIAC,yBAAA,gCAAuBD,EAAvB,EAAgD;EAC9C,SAAKT,aAAL,GAAqBS,EAArB;EACD;;;;;;MAKUE,aAAa,GAAG,IAAIf,aAAJ;;ECnF7B;EAEA,IAAIgB,MAAc,GAAGC,OAAO,IAAI;EAC9BlB,EAAAA,KAAK,EAAEpG,IADuB;EAE9BuH,EAAAA,IAAI,EAAEvH,IAFwB;EAG9BwH,EAAAA,GAAG,EAAExH;EAHyB,CAAhC;EAMO,SAASyH,SAAT,GAA6B;EAClC,SAAOJ,MAAP;EACD;EAEM,SAASK,SAAT,CAAmBC,SAAnB,EAAsC;EAC3CN,EAAAA,MAAM,GAAGM,SAAT;EACD;;MCxBYC,YAAb;EAGE,0BAAc;EACZ,SAAKC,SAAL,GAAiB,EAAjB;EACD;;EALH;;EAAA,SAOEC,SAPF,GAOE,mBAAUC,QAAV,EAA4C;EAAA;;EAC1C,QAAM9B,QAAQ,GAAG8B,QAAQ,IAAK;EAAA,aAAM9H,SAAN;EAAA,KAA9B;;EAEA,SAAK4H,SAAL,CAAehB,IAAf,CAAoBZ,QAApB;EAEA,SAAK+B,WAAL;EAEA,WAAO,YAAM;EACX,MAAA,KAAI,CAACH,SAAL,GAAiB,KAAI,CAACA,SAAL,CAAe/G,MAAf,CAAsB,UAAAC,CAAC;EAAA,eAAIA,CAAC,KAAKkF,QAAV;EAAA,OAAvB,CAAjB;;EACA,MAAA,KAAI,CAACgC,aAAL;EACD,KAHD;EAID,GAlBH;;EAAA,SAoBEC,YApBF,GAoBE,wBAAwB;EACtB,WAAO,KAAKL,SAAL,CAAerI,MAAf,GAAwB,CAA/B;EACD,GAtBH;;EAAA,SAwBYwI,WAxBZ,GAwBE,uBAA8B;EAE7B,GA1BH;;EAAA,SA4BYC,aA5BZ,GA4BE,yBAAgC;EAE/B,GA9BH;;EAAA;EAAA;;MCCME;;;;;;;;;WAIMH,cAAV,uBAA8B;EAC5B,QAAI,CAAC,KAAKI,mBAAV,EAA+B;EAC7B,WAAKC,uBAAL;EACD;EACF;;WAEDC,mBAAA,0BACEC,KADF,EAEQ;EAAA;;EACN,QAAI,KAAKH,mBAAT,EAA8B;EAC5B,WAAKA,mBAAL;EACD;;EACD,SAAKA,mBAAL,GAA2BG,KAAK,CAAC,UAACC,OAAD,EAAuB;EACtD,UAAI,OAAOA,OAAP,KAAmB,SAAvB,EAAkC;EAChC,QAAA,KAAI,CAACC,UAAL,CAAgBD,OAAhB;EACD,OAFD,MAEO;EACL,QAAA,KAAI,CAACE,OAAL;EACD;EACF,KAN+B,CAAhC;EAOD;;WAEDD,aAAA,oBAAWD,OAAX,EAAoC;EAClC,SAAKA,OAAL,GAAeA,OAAf;;EAEA,QAAIA,OAAJ,EAAa;EACX,WAAKE,OAAL;EACD;EACF;;WAEDA,UAAA,mBAAgB;EACd,SAAKb,SAAL,CAAeb,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,MAAAA,QAAQ;EACT,KAFD;EAGD;;WAEDY,YAAA,qBAAqB;EACnB,QAAI,OAAO,KAAKH,OAAZ,KAAwB,SAA5B,EAAuC;EACrC,aAAO,KAAKA,OAAZ;EACD,KAHkB;;;EAMnB,QAAI,OAAOI,QAAP,KAAoB,WAAxB,EAAqC;EACnC,aAAO,IAAP;EACD;;EAED,WAAO,CAAC3I,SAAD,EAAY,SAAZ,EAAuB,WAAvB,EAAoC4I,QAApC,CACLD,QAAQ,CAACE,eADJ,CAAP;EAGD;;WAEOT,0BAAR,mCAAkC;EAAA;;EAChC,QAAI,CAACvI,QAAD,gBAAaC,MAAb,qBAAa,QAAQgJ,gBAArB,CAAJ,EAA2C;EACzC,WAAKT,gBAAL,CAAsB,UAAAI,OAAO,EAAI;EAC/B;EACA3I,QAAAA,MAAM,CAACgJ,gBAAP,CAAwB,kBAAxB,EAA4CL,OAA5C,EAAqD,KAArD;EACA3I,QAAAA,MAAM,CAACgJ,gBAAP,CAAwB,OAAxB,EAAiCL,OAAjC,EAA0C,KAA1C;EAEA,eAAO,YAAM;EACX;EACA3I,UAAAA,MAAM,CAACqI,mBAAP,CAA2B,kBAA3B,EAA+CM,OAA/C;EACA3I,UAAAA,MAAM,CAACqI,mBAAP,CAA2B,OAA3B,EAAoCM,OAApC;EACD,SAJD;EAKD,OAVD;EAWD;EACF;;;IApEwBd;;MAuEdoB,YAAY,GAAG,IAAIb,YAAJ;;MCvEtBc;;;;;;;;;WAIMjB,cAAV,uBAA8B;EAC5B,QAAI,CAAC,KAAKI,mBAAV,EAA+B;EAC7B,WAAKC,uBAAL;EACD;EACF;;WAEDC,mBAAA,0BACEC,KADF,EAEQ;EAAA;;EACN,QAAI,KAAKH,mBAAT,EAA8B;EAC5B,WAAKA,mBAAL;EACD;;EACD,SAAKA,mBAAL,GAA2BG,KAAK,CAAC,UAACW,MAAD,EAAsB;EACrD,UAAI,OAAOA,MAAP,KAAkB,SAAtB,EAAiC;EAC/B,QAAA,KAAI,CAACC,SAAL,CAAeD,MAAf;EACD,OAFD,MAEO;EACL,QAAA,KAAI,CAACE,QAAL;EACD;EACF,KAN+B,CAAhC;EAOD;;WAEDD,YAAA,mBAAUD,MAAV,EAAkC;EAChC,SAAKA,MAAL,GAAcA,MAAd;;EAEA,QAAIA,MAAJ,EAAY;EACV,WAAKE,QAAL;EACD;EACF;;WAEDA,WAAA,oBAAiB;EACf,SAAKvB,SAAL,CAAeb,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,MAAAA,QAAQ;EACT,KAFD;EAGD;;WAEDsB,WAAA,oBAAoB;EAClB,QAAI,OAAO,KAAKH,MAAZ,KAAuB,SAA3B,EAAsC;EACpC,aAAO,KAAKA,MAAZ;EACD;;EAED,WAAOI,SAAS,CAACC,MAAV,KAAqBtJ,SAArB,IAAkCqJ,SAAS,CAACC,MAAnD;EACD;;WAEOlB,0BAAR,mCAAkC;EAAA;;EAChC,QAAI,CAACvI,QAAD,gBAAaC,MAAb,qBAAa,QAAQgJ,gBAArB,CAAJ,EAA2C;EACzC,WAAKT,gBAAL,CAAsB,UAAAc,QAAQ,EAAI;EAChC;EACArJ,QAAAA,MAAM,CAACgJ,gBAAP,CAAwB,QAAxB,EAAkCK,QAAlC,EAA4C,KAA5C;EAEA,eAAO,YAAM;EACX;EACArJ,UAAAA,MAAM,CAACqI,mBAAP,CAA2B,QAA3B,EAAqCgB,QAArC;EACD,SAHD;EAID,OARD;EASD;EACF;;;IA3DyBxB;;MA8Df4B,aAAa,GAAG,IAAIP,aAAJ;;ECvC7B,SAASQ,iBAAT,CAA2BC,YAA3B,EAAiD;EAC/C,SAAOjI,IAAI,CAACkI,GAAL,CAAS,gBAAO,CAAP,EAAYD,YAAZ,CAAT,EAAmC,KAAnC,CAAP;EACD;;EAMD,SAASE,YAAT,CAAsBtJ,KAAtB,EAAuD;EACrD,SAAO,QAAOA,KAAP,oBAAOA,KAAK,CAAEuJ,MAAd,MAAyB,UAAhC;EACD;;MAOYC,cAAb,GAGE,wBAAY3G,OAAZ,EAAqC;EACnC,OAAK4G,MAAL,GAAc5G,OAAd,oBAAcA,OAAO,CAAE4G,MAAvB;EACA,OAAKC,MAAL,GAAc7G,OAAd,oBAAcA,OAAO,CAAE6G,MAAvB;EACD,CANH;EASO,SAASC,gBAAT,CAA0B3J,KAA1B,EAA+D;EACpE,SAAOA,KAAK,YAAYwJ,cAAxB;EACD;;MAIYI,OAAb,GAUE,iBAAYC,MAAZ,EAAkD;EAAA;;EAChD,MAAIC,WAAW,GAAG,KAAlB;EACA,MAAIC,QAAJ;EACA,MAAIC,UAAJ;EACA,MAAIC,cAAJ;EACA,MAAIC,aAAJ;;EAEA,OAAKX,MAAL,GAAc,UAAAY,aAAa;EAAA,WAAIJ,QAAJ,oBAAIA,QAAQ,CAAGI,aAAH,CAAZ;EAAA,GAA3B;;EACA,OAAKL,WAAL,GAAmB,YAAM;EACvBA,IAAAA,WAAW,GAAG,IAAd;EACD,GAFD;;EAGA,OAAKM,QAAL,GAAgB;EAAA,WAAMJ,UAAN,oBAAMA,UAAU,EAAhB;EAAA,GAAhB;;EACA,OAAKZ,YAAL,GAAoB,CAApB;EACA,OAAKiB,QAAL,GAAgB,KAAhB;EACA,OAAKC,UAAL,GAAkB,KAAlB;EACA,OAAKC,qBAAL,GAA6B,KAA7B;EACA,OAAKC,OAAL,GAAe,IAAItF,OAAJ,CAAmB,UAACuF,YAAD,EAAeC,WAAf,EAA+B;EAC/DT,IAAAA,cAAc,GAAGQ,YAAjB;EACAP,IAAAA,aAAa,GAAGQ,WAAhB;EACD,GAHc,CAAf;;EAKA,MAAMvF,OAAO,GAAG,SAAVA,OAAU,CAACnF,KAAD,EAAgB;EAC9B,IAAA,KAAI,CAACsK,UAAL,GAAkB,IAAlB;EACAN,IAAAA,UAAU,QAAV,YAAAA,UAAU;EACVC,IAAAA,cAAc,CAACjK,KAAD,CAAd;EACD,GAJD;;EAMA,MAAM2K,MAAM,GAAG,SAATA,MAAS,CAAC3K,KAAD,EAAgB;EAC7B,IAAA,KAAI,CAACsK,UAAL,GAAkB,IAAlB;EACAN,IAAAA,UAAU,QAAV,YAAAA,UAAU;EACVE,IAAAA,aAAa,CAAClK,KAAD,CAAb;EACD,GAJD;;EAMA,MAAM4K,KAAK,GAAG,SAARA,KAAQ,GAAM;EAClB,WAAO,IAAI1F,OAAJ,CAAY,UAAA2F,eAAe,EAAI;EACpCb,MAAAA,UAAU,GAAGa,eAAb;EACA,MAAA,KAAI,CAACR,QAAL,GAAgB,IAAhB;EACAR,MAAAA,MAAM,CAACiB,OAAP,oBAAAjB,MAAM,CAACiB,OAAP;EACD,KAJM,EAIJlF,IAJI,CAIC,YAAM;EACZoE,MAAAA,UAAU,GAAGrK,SAAb;EACA,MAAA,KAAI,CAAC0K,QAAL,GAAgB,KAAhB;EACAR,MAAAA,MAAM,CAACkB,UAAP,oBAAAlB,MAAM,CAACkB,UAAP;EACD,KARM,CAAP;EASD,GAVD,CAjCgD;;;EA8ChD,MAAMC,GAAG,GAAG,SAANA,GAAM,GAAM;EAChB;EACA,QAAI,KAAI,CAACV,UAAT,EAAqB;EACnB;EACD;;EAED,QAAIW,cAAJ,CANgB;;EAShB,QAAI;EACFA,MAAAA,cAAc,GAAGpB,MAAM,CAACjD,EAAP,EAAjB;EACD,KAFD,CAEE,OAAOd,KAAP,EAAc;EACdmF,MAAAA,cAAc,GAAG/F,OAAO,CAACyF,MAAR,CAAe7E,KAAf,CAAjB;EACD,KAbe;;;EAgBhBiE,IAAAA,QAAQ,GAAG,kBAAAI,aAAa,EAAI;EAC1BQ,MAAAA,MAAM,CAAC,IAAInB,cAAJ,CAAmBW,aAAnB,CAAD,CAAN,CAD0B;;EAI1B,UAAIb,YAAY,CAAC2B,cAAD,CAAhB,EAAkC;EAChC,YAAI;EACFA,UAAAA,cAAc,CAAC1B,MAAf;EACD,SAFD,CAEE,gBAAM;EACT;EACF,KATD,CAhBgB;;;EA4BhB,IAAA,KAAI,CAACgB,qBAAL,GAA6BjB,YAAY,CAAC2B,cAAD,CAAzC;EAEA/F,IAAAA,OAAO,CAACC,OAAR,CAAgB8F,cAAhB,EACGrF,IADH,CACQT,OADR,EAEGU,KAFH,CAES,UAAAC,KAAK,EAAI;EAAA;;EACd;EACA,UAAI,KAAI,CAACwE,UAAT,EAAqB;EACnB;EACD,OAJa;;;EAOd,UAAMY,KAAK,oBAAGrB,MAAM,CAACqB,KAAV,4BAAmB,CAA9B;EACA,UAAMC,UAAU,yBAAGtB,MAAM,CAACsB,UAAV,iCAAwBhC,iBAAxC;EACA,UAAMiC,KAAK,GAAGxL,gBAAgB,CAACuL,UAAD,EAAa,KAAI,CAAC/B,YAAlB,CAAhB,IAAmD,CAAjE;EACA,UAAMiC,WAAW,GACfH,KAAK,KAAK,IAAV,IACC,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,KAAI,CAAC9B,YAAL,GAAoB8B,KADlD,IAEC,OAAOA,KAAP,KAAiB,UAAjB,IAA+BA,KAAK,CAAC,KAAI,CAAC9B,YAAN,EAAoBtD,KAApB,CAHvC;;EAKA,UAAIgE,WAAW,IAAI,CAACuB,WAApB,EAAiC;EAC/B;EACAV,QAAAA,MAAM,CAAC7E,KAAD,CAAN;EACA;EACD;;EAED,MAAA,KAAI,CAACsD,YAAL,GArBc;;EAwBdS,MAAAA,MAAM,CAACyB,MAAP,oBAAAzB,MAAM,CAACyB,MAAP,CAAgB,KAAI,CAAClC,YAArB,EAAmCtD,KAAnC,EAxBc;;EA2Bdd,MAAAA,KAAK,CAACoG,KAAD,CAAL;EAAA,OAEGxF,IAFH,CAEQ,YAAM;EACV,YAAI,CAAC8C,YAAY,CAACL,SAAb,EAAD,IAA6B,CAACa,aAAa,CAACH,QAAd,EAAlC,EAA4D;EAC1D,iBAAO6B,KAAK,EAAZ;EACD;EACF,OANH,EAOGhF,IAPH,CAOQ,YAAM;EACV,YAAIkE,WAAJ,EAAiB;EACfa,UAAAA,MAAM,CAAC7E,KAAD,CAAN;EACD,SAFD,MAEO;EACLkF,UAAAA,GAAG;EACJ;EACF,OAbH;EAcD,KA3CH;EA4CD,GA1ED,CA9CgD;;;EA2HhDA,EAAAA,GAAG;EACJ,CAtIH;;EC8DA;MAEaO,KAAb;EAeE,iBAAY1B,MAAZ,EAA8D;EAC5D,SAAK2B,cAAL,GAAsB3B,MAAM,CAAC2B,cAA7B;EACA,SAAKC,UAAL,CAAgB5B,MAAM,CAAChH,OAAvB;EACA,SAAK6I,SAAL,GAAiB,EAAjB;EACA,SAAKC,KAAL,GAAa9B,MAAM,CAAC8B,KAApB;EACA,SAAK/J,QAAL,GAAgBiI,MAAM,CAACjI,QAAvB;EACA,SAAKkB,SAAL,GAAiB+G,MAAM,CAAC/G,SAAxB;EACA,SAAK8I,YAAL,GAAoB/B,MAAM,CAACgC,KAAP,IAAgB,KAAKC,eAAL,CAAqB,KAAKjJ,OAA1B,CAApC;EACA,SAAKgJ,KAAL,GAAa,KAAKD,YAAlB;EACA,SAAKG,UAAL;EACD;;EAzBH;;EAAA,SA2BUN,UA3BV,GA2BE,oBACE5I,OADF,EAEQ;EAAA;;EACN,SAAKA,OAAL,gBAAoB,KAAK2I,cAAzB,EAA4C3I,OAA5C,EADM;;EAIN,SAAKmJ,SAAL,GAAiB7K,IAAI,CAACC,GAAL,CACf,KAAK4K,SAAL,IAAkB,CADH,2BAEf,KAAKnJ,OAAL,CAAamJ,SAFE,oCAEW,IAAI,EAAJ,GAAS,IAFpB,CAAjB;EAID,GArCH;;EAAA,SAuCEC,iBAvCF,GAuCE,2BAAkBpJ,OAAlB,EAA4E;EAC1E,SAAK2I,cAAL,GAAsB3I,OAAtB;EACD,GAzCH;;EAAA,SA2CUkJ,UA3CV,GA2CE,sBAA2B;EAAA;;EACzB,SAAKG,cAAL;;EAEA,QAAInM,cAAc,CAAC,KAAKiM,SAAN,CAAlB,EAAoC;EAClC,WAAKG,SAAL,GAAiB/G,UAAU,CAAC,YAAM;EAChC,YAAI,CAAC,KAAI,CAACsG,SAAL,CAAexM,MAApB,EAA4B;EAC1B,UAAA,KAAI,CAACyM,KAAL,CAAWS,MAAX,CAAkB,KAAlB;EACD;EACF,OAJ0B,EAIxB,KAAKJ,SAJmB,CAA3B;EAKD;EACF,GArDH;;EAAA,SAuDUE,cAvDV,GAuDE,0BAAyB;EACvBG,IAAAA,YAAY,CAAC,KAAKF,SAAN,CAAZ;EACA,SAAKA,SAAL,GAAiBxM,SAAjB;EACD,GA1DH;;EAAA,SA4DE2M,OA5DF,GA4DE,iBACEzM,OADF,EAEEgD,OAFF,EAGS;EAAA;;EACP,QAAM0J,QAAQ,GAAG,KAAKV,KAAL,CAAWW,IAA5B,CADO;;EAIP,QAAIA,IAAI,GAAG5M,gBAAgB,CAACC,OAAD,EAAU0M,QAAV,CAA3B,CAJO;;EAOP,iCAAI,sBAAK1J,OAAL,EAAa4J,WAAjB,qBAAI,0CAA2BF,QAA3B,EAAqCC,IAArC,CAAJ,EAAgD;EAC9CA,MAAAA,IAAI,GAAGD,QAAP;EACD,KAFD,MAEO,IAAI,KAAK1J,OAAL,CAAa6J,iBAAb,KAAmC,KAAvC,EAA8C;EACnD;EACAF,MAAAA,IAAI,GAAGrI,gBAAgB,CAACoI,QAAD,EAAWC,IAAX,CAAvB;EACD,KAZM;;;EAeP,SAAKG,QAAL,CAAc;EACZH,MAAAA,IAAI,EAAJA,IADY;EAEZI,MAAAA,IAAI,EAAE,SAFM;EAGZC,MAAAA,aAAa,EAAEhK,OAAF,oBAAEA,OAAO,CAAE5B;EAHZ,KAAd;EAMA,WAAOuL,IAAP;EACD,GArFH;;EAAA,SAuFEM,QAvFF,GAuFE,kBAASjB,KAAT,EAAiD;EAC/C,SAAKc,QAAL,CAAc;EAAEC,MAAAA,IAAI,EAAE,UAAR;EAAoBf,MAAAA,KAAK,EAALA;EAApB,KAAd;EACD,GAzFH;;EAAA,SA2FEtC,MA3FF,GA2FE,gBAAO1G,OAAP,EAA+C;EAAA;;EAC7C,QAAM2H,OAAO,GAAG,KAAKA,OAArB;EACA,0BAAKuC,OAAL,mCAAcxD,MAAd,CAAqB1G,OAArB;EACA,WAAO2H,OAAO,GAAGA,OAAO,CAAC5E,IAAR,CAAalG,IAAb,EAAmBmG,KAAnB,CAAyBnG,IAAzB,CAAH,GAAoCwF,OAAO,CAACC,OAAR,EAAlD;EACD,GA/FH;;EAAA,SAiGE6H,OAjGF,GAiGE,mBAAgB;EACd,SAAKd,cAAL;EACA,SAAK3C,MAAL;EACD,GApGH;;EAAA,SAsGE0D,KAtGF,GAsGE,iBAAc;EACZ,SAAKD,OAAL;EACA,SAAKF,QAAL,CAAc,KAAKlB,YAAnB;EACD,GAzGH;;EAAA,SA2GE5I,QA3GF,GA2GE,oBAAoB;EAClB,WAAO,KAAK0I,SAAL,CAAexH,IAAf,CAAoB,UAAAgJ,QAAQ;EAAA,aAAIA,QAAQ,CAACrK,OAAT,CAAiBsK,OAAjB,KAA6B,KAAjC;EAAA,KAA5B,CAAP;EACD,GA7GH;;EAAA,SA+GEjK,UA/GF,GA+GE,sBAAsB;EACpB,WAAO,KAAK2I,KAAL,CAAW3I,UAAlB;EACD,GAjHH;;EAAA,SAmHED,OAnHF,GAmHE,mBAAmB;EACjB,WACE,KAAK4I,KAAL,CAAWuB,aAAX,IACA,CAAC,KAAKvB,KAAL,CAAWgB,aADZ,IAEA,KAAKnB,SAAL,CAAexH,IAAf,CAAoB,UAAAgJ,QAAQ;EAAA,aAAIA,QAAQ,CAACG,gBAAT,GAA4BpK,OAAhC;EAAA,KAA5B,CAHF;EAKD,GAzHH;;EAAA,SA2HEqK,aA3HF,GA2HE,uBAAcpM,SAAd,EAAsC;EAAA,QAAxBA,SAAwB;EAAxBA,MAAAA,SAAwB,GAAZ,CAAY;EAAA;;EACpC,WACE,KAAK2K,KAAL,CAAWuB,aAAX,IACA,CAAC,KAAKvB,KAAL,CAAWgB,aADZ,IAEA,CAAC7L,cAAc,CAAC,KAAK6K,KAAL,CAAWgB,aAAZ,EAA2B3L,SAA3B,CAHjB;EAKD,GAjIH;;EAAA,SAmIEkH,OAnIF,GAmIE,mBAAgB;EAAA;;EACd,QAAM8E,QAAQ,GAAG,KAAKxB,SAAL,CAAe6B,IAAf,CAAoB,UAAA9M,CAAC;EAAA,aAAIA,CAAC,CAAC+M,sBAAF,EAAJ;EAAA,KAArB,CAAjB;;EAEA,QAAIN,QAAJ,EAAc;EACZA,MAAAA,QAAQ,CAACO,OAAT;EACD,KALa;;;EAQd,2BAAKV,OAAL,oCAAc3C,QAAd;EACD,GA5IH;;EAAA,SA8IEtB,QA9IF,GA8IE,oBAAiB;EAAA;;EACf,QAAMoE,QAAQ,GAAG,KAAKxB,SAAL,CAAe6B,IAAf,CAAoB,UAAA9M,CAAC;EAAA,aAAIA,CAAC,CAACiN,oBAAF,EAAJ;EAAA,KAArB,CAAjB;;EAEA,QAAIR,QAAJ,EAAc;EACZA,MAAAA,QAAQ,CAACO,OAAT;EACD,KALc;;;EAQf,2BAAKV,OAAL,oCAAc3C,QAAd;EACD,GAvJH;;EAAA,SAyJEuD,WAzJF,GAyJE,qBAAYT,QAAZ,EAA+D;EAC7D,QAAI,KAAKxB,SAAL,CAAehL,OAAf,CAAuBwM,QAAvB,MAAqC,CAAC,CAA1C,EAA6C;EAC3C,WAAKxB,SAAL,CAAenF,IAAf,CAAoB2G,QAApB,EAD2C;;EAI3C,WAAKhB,cAAL;EAEA,WAAKP,KAAL,CAAWiC,MAAX,CAAkB,IAAlB;EACD;EACF,GAlKH;;EAAA,SAoKEC,cApKF,GAoKE,wBAAeX,QAAf,EAAkE;EAChE,QAAI,KAAKxB,SAAL,CAAehL,OAAf,CAAuBwM,QAAvB,MAAqC,CAAC,CAA1C,EAA6C;EAC3C,WAAKxB,SAAL,GAAiB,KAAKA,SAAL,CAAelL,MAAf,CAAsB,UAAAC,CAAC;EAAA,eAAIA,CAAC,KAAKyM,QAAV;EAAA,OAAvB,CAAjB;;EAEA,UAAI,CAAC,KAAKxB,SAAL,CAAexM,MAApB,EAA4B;EAC1B;EACA;EACA,YAAI,KAAK6N,OAAT,EAAkB;EAChB,cAAI,KAAKA,OAAL,CAAaxC,qBAAjB,EAAwC;EACtC,iBAAKwC,OAAL,CAAaxD,MAAb;EACD,WAFD,MAEO;EACL,iBAAKwD,OAAL,CAAajD,WAAb;EACD;EACF;;EAED,YAAI,KAAKkC,SAAT,EAAoB;EAClB,eAAKD,UAAL;EACD,SAFD,MAEO;EACL,eAAKJ,KAAL,CAAWS,MAAX,CAAkB,IAAlB;EACD;EACF;;EAED,WAAKT,KAAL,CAAWiC,MAAX,CAAkB,IAAlB;EACD;EACF,GA5LH;;EAAA,SA8LEE,UA9LF,GA8LE,sBAAmB;EACjB,QAAI,CAAC,KAAKjC,KAAL,CAAWuB,aAAhB,EAA+B;EAC7B,WAAKT,QAAL,CAAc;EAAEC,QAAAA,IAAI,EAAE;EAAR,OAAd;EACD;EACF,GAlMH;;EAAA,SAoMEmB,KApMF,GAoME,eACElL,OADF,EAEEmL,YAFF,EAGkB;EAAA;EAAA;EAAA;;EAChB,QAAI,KAAKnC,KAAL,CAAW3I,UAAf,EACE,IAAI,KAAK2I,KAAL,CAAWgB,aAAX,KAA4BmB,YAA5B,oBAA4BA,YAAY,CAAEC,aAA1C,CAAJ,EAA6D;EAC3D;EACA,WAAK1E,MAAL,CAAY;EAAEG,QAAAA,MAAM,EAAE;EAAV,OAAZ;EACD,KAHD,MAGO,IAAI,KAAKc,OAAT,EAAkB;EACvB;EACA,aAAO,KAAKA,OAAZ;EACD,KARa;;EAWhB,QAAI3H,OAAJ,EAAa;EACX,WAAK4I,UAAL,CAAgB5I,OAAhB;EACD,KAbe;EAgBhB;;;EACA,QAAI,CAAC,KAAKA,OAAL,CAAahB,OAAlB,EAA2B;EACzB,UAAMqL,QAAQ,GAAG,KAAKxB,SAAL,CAAe6B,IAAf,CAAoB,UAAA9M,CAAC;EAAA,eAAIA,CAAC,CAACoC,OAAF,CAAUhB,OAAd;EAAA,OAArB,CAAjB;;EACA,UAAIqL,QAAJ,EAAc;EACZ,aAAKzB,UAAL,CAAgByB,QAAQ,CAACrK,OAAzB;EACD;EACF,KAtBe;;;EAyBhB,QAAMjB,QAAQ,GAAG1B,WAAW,CAAC,KAAK0B,QAAN,CAA5B;EACA,QAAMsM,cAAoC,GAAG;EAC3CtM,MAAAA,QAAQ,EAARA,QAD2C;EAE3CuM,MAAAA,SAAS,EAAExO;EAFgC,KAA7C,CA1BgB;;EAgChB,QAAMyO,OAAO,GAAG,SAAVA,OAAU;EAAA,aACd,MAAI,CAACvL,OAAL,CAAahB,OAAb,GACI,MAAI,CAACgB,OAAL,CAAahB,OAAb,CAAqBqM,cAArB,CADJ,GAEIhJ,OAAO,CAACyF,MAAR,CAAe,iBAAf,CAHU;EAAA,KAAhB,CAhCgB;;;EAsChB,QAAM0D,OAAkD,GAAG;EACzDL,MAAAA,YAAY,EAAZA,YADyD;EAEzDnL,MAAAA,OAAO,EAAE,KAAKA,OAF2C;EAGzDjB,MAAAA,QAAQ,EAARA,QAHyD;EAIzDiK,MAAAA,KAAK,EAAE,KAAKA,KAJ6C;EAKzDuC,MAAAA,OAAO,EAAPA;EALyD,KAA3D;;EAQA,iCAAI,KAAKvL,OAAL,CAAayL,QAAjB,qBAAI,sBAAuBC,OAA3B,EAAoC;EAAA;;EAClC,qCAAK1L,OAAL,CAAayL,QAAb,4CAAuBC,OAAvB,CAA+BF,OAA/B;EACD,KAhDe;;;EAmDhB,QACE,CAAC,KAAKxC,KAAL,CAAW3I,UAAZ,IACA,KAAK2I,KAAL,CAAW2C,SAAX,+BAAyBH,OAAO,CAACL,YAAjC,qBAAyB,sBAAsBS,IAA/C,CAFF,EAGE;EAAA;;EACA,WAAK9B,QAAL,CAAc;EAAEC,QAAAA,IAAI,EAAE,OAAR;EAAiB6B,QAAAA,IAAI,4BAAEJ,OAAO,CAACL,YAAV,qBAAE,uBAAsBS;EAA7C,OAAd;EACD,KAxDe;;;EA2DhB,SAAK1B,OAAL,GAAe,IAAInD,OAAJ,CAAY;EACzBhD,MAAAA,EAAE,EAAEyH,OAAO,CAACD,OADa;EAEzB9C,MAAAA,MAAM,EAAE,kBAAM;EACZ,QAAA,MAAI,CAACqB,QAAL,CAAc;EAAEC,UAAAA,IAAI,EAAE;EAAR,SAAd;EACD,OAJwB;EAKzB9B,MAAAA,OAAO,EAAE,mBAAM;EACb,QAAA,MAAI,CAAC6B,QAAL,CAAc;EAAEC,UAAAA,IAAI,EAAE;EAAR,SAAd;EACD,OAPwB;EAQzB7B,MAAAA,UAAU,EAAE,sBAAM;EAChB,QAAA,MAAI,CAAC4B,QAAL,CAAc;EAAEC,UAAAA,IAAI,EAAE;EAAR,SAAd;EACD,OAVwB;EAWzB1B,MAAAA,KAAK,EAAEmD,OAAO,CAACxL,OAAR,CAAgBqI,KAXE;EAYzBC,MAAAA,UAAU,EAAEkD,OAAO,CAACxL,OAAR,CAAgBsI;EAZH,KAAZ,CAAf;EAeA,SAAKX,OAAL,GAAe,KAAKuC,OAAL,CAAavC,OAAb,CACZ5E,IADY,CACP,UAAA4G,IAAI;EAAA,aAAI,MAAI,CAACF,OAAL,CAAaE,IAAb,CAAJ;EAAA,KADG,EAEZ3G,KAFY,CAEN,UAAAC,KAAK,EAAI;EACd;EACA,UAAI,EAAE6D,gBAAgB,CAAC7D,KAAD,CAAhB,IAA2BA,KAAK,CAAC4D,MAAnC,CAAJ,EAAgD;EAC9C,QAAA,MAAI,CAACiD,QAAL,CAAc;EACZC,UAAAA,IAAI,EAAE,OADM;EAEZ9G,UAAAA,KAAK,EAALA;EAFY,SAAd;EAID,OAPa;;;EAUd,UAAI,CAAC6D,gBAAgB,CAAC7D,KAAD,CAArB,EAA8B;EAC5BqB,QAAAA,SAAS,GAAGrB,KAAZ,CAAkBA,KAAlB;EACD,OAZa;;;EAed,YAAMA,KAAN;EACD,KAlBY,CAAf;EAoBA,WAAO,KAAK0E,OAAZ;EACD,GAtSH;;EAAA,SAwSUmC,QAxSV,GAwSE,kBAAiB+B,MAAjB,EAAsD;EAAA;;EACpD,SAAK7C,KAAL,GAAa,KAAK8C,OAAL,CAAa,KAAK9C,KAAlB,EAAyB6C,MAAzB,CAAb;EAEA5H,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACsF,SAAL,CAAehF,OAAf,CAAuB,UAAAwG,QAAQ,EAAI;EACjCA,QAAAA,QAAQ,CAAC0B,aAAT,CAAuBF,MAAvB;EACD,OAFD;;EAIA,MAAA,MAAI,CAAC/C,KAAL,CAAWiC,MAAX,CAAkB,MAAlB;EACD,KAND;EAOD,GAlTH;;EAAA,SAoTY9B,eApTZ,GAoTE,yBACEjJ,OADF,EAE6B;EAC3B,QAAM2J,IAAI,GACR,OAAO3J,OAAO,CAACgM,WAAf,KAA+B,UAA/B,GACKhM,OAAO,CAACgM,WAAT,EADJ,GAEIhM,OAAO,CAACgM,WAHd;EAKA,QAAMC,OAAO,GAAG,OAAOtC,IAAP,KAAgB,WAAhC;EAEA,WAAO;EACLA,MAAAA,IAAI,EAAJA,IADK;EAELuC,MAAAA,eAAe,EAAE,CAFZ;EAGLlC,MAAAA,aAAa,EAAEiC,OAAO,GAAGzN,IAAI,CAACC,GAAL,EAAH,GAAgB,CAHjC;EAILwE,MAAAA,KAAK,EAAE,IAJF;EAKLkJ,MAAAA,gBAAgB,EAAE,CALb;EAMLC,MAAAA,cAAc,EAAE,CANX;EAOLC,MAAAA,iBAAiB,EAAE,CAPd;EAQLV,MAAAA,SAAS,EAAE,IARN;EASLtL,MAAAA,UAAU,EAAE,KATP;EAULkK,MAAAA,aAAa,EAAE,KAVV;EAWL/C,MAAAA,QAAQ,EAAE,KAXL;EAYL/E,MAAAA,MAAM,EAAEwJ,OAAO,GAAG,SAAH,GAAe;EAZzB,KAAP;EAcD,GA5UH;;EAAA,SA8UYH,OA9UZ,GA8UE,iBACE9C,KADF,EAEE6C,MAFF,EAG6B;EAAA;;EAC3B,YAAQA,MAAM,CAAC9B,IAAf;EACE,WAAK,QAAL;EACE,4BACKf,KADL;EAEEqD,UAAAA,iBAAiB,EAAErD,KAAK,CAACqD,iBAAN,GAA0B;EAF/C;;EAIF,WAAK,OAAL;EACE,4BACKrD,KADL;EAEExB,UAAAA,QAAQ,EAAE;EAFZ;;EAIF,WAAK,UAAL;EACE,4BACKwB,KADL;EAEExB,UAAAA,QAAQ,EAAE;EAFZ;;EAIF,WAAK,OAAL;EACE,4BACKwB,KADL;EAEEqD,UAAAA,iBAAiB,EAAE,CAFrB;EAGEV,UAAAA,SAAS,kBAAEE,MAAM,CAACD,IAAT,2BAAiB,IAH5B;EAIEvL,UAAAA,UAAU,EAAE,IAJd;EAKEmH,UAAAA,QAAQ,EAAE,KALZ;EAME/E,UAAAA,MAAM,EAAEuG,KAAK,CAACvG,MAAN,KAAiB,MAAjB,GAA0B,SAA1B,GAAsCuG,KAAK,CAACvG;EANtD;;EAQF,WAAK,SAAL;EACE,4BACKuG,KADL;EAEEW,UAAAA,IAAI,EAAEkC,MAAM,CAAClC,IAFf;EAGEuC,UAAAA,eAAe,EAAElD,KAAK,CAACkD,eAAN,GAAwB,CAH3C;EAIElC,UAAAA,aAAa,2BAAE6B,MAAM,CAAC7B,aAAT,oCAA0BxL,IAAI,CAACC,GAAL,EAJzC;EAKEwE,UAAAA,KAAK,EAAE,IALT;EAMEoJ,UAAAA,iBAAiB,EAAE,CANrB;EAOEhM,UAAAA,UAAU,EAAE,KAPd;EAQEkK,UAAAA,aAAa,EAAE,KARjB;EASE/C,UAAAA,QAAQ,EAAE,KATZ;EAUE/E,UAAAA,MAAM,EAAE;EAVV;;EAYF,WAAK,OAAL;EACE,YAAMQ,KAAK,GAAG4I,MAAM,CAAC5I,KAArB;;EAEA,YAAI6D,gBAAgB,CAAC7D,KAAD,CAAhB,IAA2BA,KAAK,CAAC2D,MAArC,EAA6C;EAC3C,8BACKoC,KADL;EAEEqD,YAAAA,iBAAiB,EAAE,CAFrB;EAGEhM,YAAAA,UAAU,EAAE,KAHd;EAIEmH,YAAAA,QAAQ,EAAE,KAJZ;EAKE/E,YAAAA,MAAM,EAAEuG,KAAK,CAACvG,MAAN,KAAiB,SAAjB,GAA6B,MAA7B,GAAsCuG,KAAK,CAACvG;EALtD;EAOD;;EAED,4BACKuG,KADL;EAEE/F,UAAAA,KAAK,EAAEA,KAFT;EAGEkJ,UAAAA,gBAAgB,EAAEnD,KAAK,CAACmD,gBAAN,GAAyB,CAH7C;EAIEC,UAAAA,cAAc,EAAE5N,IAAI,CAACC,GAAL,EAJlB;EAKE4N,UAAAA,iBAAiB,EAAErD,KAAK,CAACqD,iBAAN,GAA0B,CAL/C;EAMEhM,UAAAA,UAAU,EAAE,KANd;EAOEmH,UAAAA,QAAQ,EAAE,KAPZ;EAQE/E,UAAAA,MAAM,EAAE;EARV;;EAUF,WAAK,YAAL;EACE,4BACKuG,KADL;EAEEuB,UAAAA,aAAa,EAAE;EAFjB;;EAIF,WAAK,UAAL;EACE,4BACKvB,KADL,EAEK6C,MAAM,CAAC7C,KAFZ;;EAIF;EACE,eAAOA,KAAP;EAxEJ;EA0ED,GA5ZH;;EAAA;EAAA;;ECtGA;MAEasD,UAAb;EAAA;;EAIE,wBAAc;EAAA;;EACZ;EAEA,UAAKC,OAAL,GAAe,EAAf;EACA,UAAKC,UAAL,GAAkB,EAAlB;EAJY;EAKb;;EATH;;EAAA,SAWEC,KAXF,GAWE,eACEC,MADF,EAEE1M,OAFF,EAGEgJ,KAHF,EAIsC;EAAA;;EACpC,QAAMlJ,MAAM,GAAGC,iBAAiB,CAACC,OAAD,CAAhC;EACA,QAAMjB,QAAQ,GAAGiB,OAAO,CAACjB,QAAzB;EACA,QAAMkB,SAAS,yBAAGD,OAAO,CAACC,SAAX,iCAAwBH,MAAM,CAACf,QAAD,CAA7C;EACA,QAAIQ,KAAK,GAAG,KAAKoN,GAAL,CAAsC1M,SAAtC,CAAZ;;EAEA,QAAI,CAACV,KAAL,EAAY;EACVA,MAAAA,KAAK,GAAG,IAAImJ,KAAJ,CAAU;EAChBI,QAAAA,KAAK,EAAE,IADS;EAEhB/J,QAAAA,QAAQ,EAARA,QAFgB;EAGhBkB,QAAAA,SAAS,EAATA,SAHgB;EAIhBD,QAAAA,OAAO,EAAE0M,MAAM,CAACE,mBAAP,CAA2B5M,OAA3B,CAJO;EAKhBgJ,QAAAA,KAAK,EAALA,KALgB;EAMhBL,QAAAA,cAAc,EAAE+D,MAAM,CAACG,gBAAP,CAAwB9N,QAAxB;EANA,OAAV,CAAR;EAQA,WAAK+N,GAAL,CAASvN,KAAT;EACD;;EAED,WAAOA,KAAP;EACD,GAlCH;;EAAA,SAoCEuN,GApCF,GAoCE,aAAIvN,KAAJ,EAAkC;EAChC,QAAI,CAAC,KAAKiN,UAAL,CAAgBjN,KAAK,CAACU,SAAtB,CAAL,EAAuC;EACrC,WAAKuM,UAAL,CAAgBjN,KAAK,CAACU,SAAtB,IAAmCV,KAAnC;EACA,WAAKgN,OAAL,CAAa7I,IAAb,CAAkBnE,KAAlB;EACA,WAAKwL,MAAL,CAAYxL,KAAZ;EACD;EACF,GA1CH;;EAAA,SA4CEgK,MA5CF,GA4CE,gBAAOhK,KAAP,EAAqC;EACnC,QAAMwN,UAAU,GAAG,KAAKP,UAAL,CAAgBjN,KAAK,CAACU,SAAtB,CAAnB;;EAEA,QAAI8M,UAAJ,EAAgB;EACdxN,MAAAA,KAAK,CAAC4K,OAAN;EAEA,WAAKoC,OAAL,GAAe,KAAKA,OAAL,CAAa5O,MAAb,CAAoB,UAAAC,CAAC;EAAA,eAAIA,CAAC,KAAK2B,KAAV;EAAA,OAArB,CAAf;;EAEA,UAAIwN,UAAU,KAAKxN,KAAnB,EAA0B;EACxB,eAAO,KAAKiN,UAAL,CAAgBjN,KAAK,CAACU,SAAtB,CAAP;EACD;;EAED,WAAK8K,MAAL,CAAYxL,KAAZ;EACD;EACF,GA1DH;;EAAA,SA4DEyN,KA5DF,GA4DE,iBAAc;EAAA;;EACZ/I,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACgJ,OAAL,CAAa1I,OAAb,CAAqB,UAAAtE,KAAK,EAAI;EAC5B,QAAA,MAAI,CAACgK,MAAL,CAAYhK,KAAZ;EACD,OAFD;EAGD,KAJD;EAKD,GAlEH;;EAAA,SAoEEoN,GApEF,GAoEE,aACE1M,SADF,EAEkD;EAChD,WAAO,KAAKuM,UAAL,CAAgBvM,SAAhB,CAAP;EACD,GAxEH;;EAAA,SA0EEgN,MA1EF,GA0EE,kBAAkB;EAChB,WAAO,KAAKV,OAAZ;EACD,GA5EH;;EAAA,SA8EE7B,IA9EF,GA8EE,cACE/L,IADF,EAEEC,IAFF,EAGkD;EAAA,2BAC9BQ,eAAe,CAACT,IAAD,EAAOC,IAAP,CADe;EAAA,QACzCU,OADyC;;EAEhD,WAAO,KAAKiN,OAAL,CAAa7B,IAAb,CAAkB,UAAAnL,KAAK;EAAA,aAAIF,UAAU,CAACC,OAAD,EAAUC,KAAV,CAAd;EAAA,KAAvB,CAAP;EACD,GApFH;;EAAA,SAyFE2N,OAzFF,GAyFE,iBAAQvO,IAAR,EAAwCC,IAAxC,EAAsE;EAAA,4BAClDQ,eAAe,CAACT,IAAD,EAAOC,IAAP,CADmC;EAAA,QAC7DU,OAD6D;;EAEpE,WAAOA,OAAO,GACV,KAAKiN,OAAL,CAAa5O,MAAb,CAAoB,UAAA4B,KAAK;EAAA,aAAIF,UAAU,CAACC,OAAD,EAAUC,KAAV,CAAd;EAAA,KAAzB,CADU,GAEV,KAAKgN,OAFT;EAGD,GA9FH;;EAAA,SAgGExB,MAhGF,GAgGE,gBAAOxL,KAAP,EAAgC;EAAA;;EAC9B0E,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACmB,SAAL,CAAeb,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,QAAAA,QAAQ,CAACrF,KAAD,CAAR;EACD,OAFD;EAGD,KAJD;EAKD,GAtGH;;EAAA,SAwGEgG,OAxGF,GAwGE,mBAAgB;EAAA;;EACdtB,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACgJ,OAAL,CAAa1I,OAAb,CAAqB,UAAAtE,KAAK,EAAI;EAC5BA,QAAAA,KAAK,CAACgG,OAAN;EACD,OAFD;EAGD,KAJD;EAKD,GA9GH;;EAAA,SAgHEU,QAhHF,GAgHE,oBAAiB;EAAA;;EACfhC,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACgJ,OAAL,CAAa1I,OAAb,CAAqB,UAAAtE,KAAK,EAAI;EAC5BA,QAAAA,KAAK,CAAC0G,QAAN;EACD,OAFD;EAGD,KAJD;EAKD,GAtHH;;EAAA;EAAA,EAAgCxB,YAAhC;;ECqDA;MAEa0I,QAAb;EAcE,oBAAYnG,MAAZ,EAAyE;EACvE,SAAKhH,OAAL,gBACKgH,MAAM,CAAC2B,cADZ,EAEK3B,MAAM,CAAChH,OAFZ;EAIA,SAAKoN,UAAL,GAAkBpG,MAAM,CAACoG,UAAzB;EACA,SAAKC,aAAL,GAAqBrG,MAAM,CAACqG,aAA5B;EACA,SAAKxE,SAAL,GAAiB,EAAjB;EACA,SAAKG,KAAL,GAAahC,MAAM,CAACgC,KAAP,IAAgBC,eAAe,EAA5C;EACD;;EAvBH;;EAAA,SAyBEgB,QAzBF,GAyBE,kBAASjB,KAAT,EAA0E;EACxE,SAAKc,QAAL,CAAc;EAAEC,MAAAA,IAAI,EAAE,UAAR;EAAoBf,MAAAA,KAAK,EAALA;EAApB,KAAd;EACD,GA3BH;;EAAA,SA6BE8B,WA7BF,GA6BE,qBAAYT,QAAZ,EAAkE;EAChE,QAAI,KAAKxB,SAAL,CAAehL,OAAf,CAAuBwM,QAAvB,MAAqC,CAAC,CAA1C,EAA6C;EAC3C,WAAKxB,SAAL,CAAenF,IAAf,CAAoB2G,QAApB;EACD;EACF,GAjCH;;EAAA,SAmCEW,cAnCF,GAmCE,wBAAeX,QAAf,EAAqE;EACnE,SAAKxB,SAAL,GAAiB,KAAKA,SAAL,CAAelL,MAAf,CAAsB,UAAAC,CAAC;EAAA,aAAIA,CAAC,KAAKyM,QAAV;EAAA,KAAvB,CAAjB;EACD,GArCH;;EAAA,SAuCE3D,MAvCF,GAuCE,kBAAwB;EACtB,QAAI,KAAKwD,OAAT,EAAkB;EAChB,WAAKA,OAAL,CAAaxD,MAAb;EACA,aAAO,KAAKwD,OAAL,CAAavC,OAAb,CAAqB5E,IAArB,CAA0BlG,IAA1B,EAAgCmG,KAAhC,CAAsCnG,IAAtC,CAAP;EACD;;EACD,WAAOwF,OAAO,CAACC,OAAR,EAAP;EACD,GA7CH;;EAAA,SA+CEiF,QA/CF,GA+CE,qBAA2B;EACzB,QAAI,KAAK2C,OAAT,EAAkB;EAChB,WAAKA,OAAL,CAAa3C,QAAb;EACA,aAAO,KAAK2C,OAAL,CAAavC,OAApB;EACD;;EACD,WAAO,KAAK2F,OAAL,EAAP;EACD,GArDH;;EAAA,SAuDEA,OAvDF,GAuDE,mBAA0B;EAAA;;EACxB,QAAI3D,IAAJ;EAEA,QAAM4D,QAAQ,GAAG,KAAKvE,KAAL,CAAWvG,MAAX,KAAsB,SAAvC;EAEA,QAAIkF,OAAO,GAAGtF,OAAO,CAACC,OAAR,EAAd;;EAEA,QAAI,CAACiL,QAAL,EAAe;EACb,WAAKzD,QAAL,CAAc;EAAEC,QAAAA,IAAI,EAAE,SAAR;EAAmByD,QAAAA,SAAS,EAAE,KAAKxN,OAAL,CAAawN;EAA3C,OAAd;EACA7F,MAAAA,OAAO,GAAGA,OAAO,CACd5E,IADO,CACF;EAAA,eAAM,KAAI,CAAC/C,OAAL,CAAayN,QAAnB,oBAAM,KAAI,CAACzN,OAAL,CAAayN,QAAb,CAAwB,KAAI,CAACzE,KAAL,CAAWwE,SAAnC,CAAN;EAAA,OADE,EAEPzK,IAFO,CAEF,UAAAyI,OAAO,EAAI;EACf,YAAIA,OAAO,KAAK,KAAI,CAACxC,KAAL,CAAWwC,OAA3B,EAAoC;EAClC,UAAA,KAAI,CAAC1B,QAAL,CAAc;EACZC,YAAAA,IAAI,EAAE,SADM;EAEZyB,YAAAA,OAAO,EAAPA,OAFY;EAGZgC,YAAAA,SAAS,EAAE,KAAI,CAACxE,KAAL,CAAWwE;EAHV,WAAd;EAKD;EACF,OAVO,CAAV;EAWD;;EAED,WAAO7F,OAAO,CACX5E,IADI,CACC;EAAA,aAAM,KAAI,CAAC2K,eAAL,EAAN;EAAA,KADD,EAEJ3K,IAFI,CAEC,UAAA9B,MAAM,EAAI;EACd0I,MAAAA,IAAI,GAAG1I,MAAP;EACD,KAJI,EAKJ8B,IALI,CAKC;EAAA,aACJ,KAAI,CAAC/C,OAAL,CAAa2N,SADT,oBACJ,KAAI,CAAC3N,OAAL,CAAa2N,SAAb,CACEhE,IADF,EAEE,KAAI,CAACX,KAAL,CAAWwE,SAFb,EAGE,KAAI,CAACxE,KAAL,CAAWwC,OAHb,CADI;EAAA,KALD,EAYJzI,IAZI,CAYC;EAAA,aACJ,KAAI,CAAC/C,OAAL,CAAa4N,SADT,oBACJ,KAAI,CAAC5N,OAAL,CAAa4N,SAAb,CACEjE,IADF,EAEE,IAFF,EAGE,KAAI,CAACX,KAAL,CAAWwE,SAHb,EAIE,KAAI,CAACxE,KAAL,CAAWwC,OAJb,CADI;EAAA,KAZD,EAoBJzI,IApBI,CAoBC,YAAM;EACV,MAAA,KAAI,CAAC+G,QAAL,CAAc;EAAEC,QAAAA,IAAI,EAAE,SAAR;EAAmBJ,QAAAA,IAAI,EAAJA;EAAnB,OAAd;;EACA,aAAOA,IAAP;EACD,KAvBI,EAwBJ3G,KAxBI,CAwBE,UAAAC,KAAK,EAAI;EACdqB,MAAAA,SAAS,GAAGrB,KAAZ,CAAkBA,KAAlB;EACA,aAAOZ,OAAO,CAACC,OAAR,GACJS,IADI,CACC;EAAA,eACJ,KAAI,CAAC/C,OAAL,CAAa6N,OADT,oBACJ,KAAI,CAAC7N,OAAL,CAAa6N,OAAb,CACE5K,KADF,EAEE,KAAI,CAAC+F,KAAL,CAAWwE,SAFb,EAGE,KAAI,CAACxE,KAAL,CAAWwC,OAHb,CADI;EAAA,OADD,EAQJzI,IARI,CAQC;EAAA,eACJ,KAAI,CAAC/C,OAAL,CAAa4N,SADT,oBACJ,KAAI,CAAC5N,OAAL,CAAa4N,SAAb,CACE9Q,SADF,EAEEmG,KAFF,EAGE,KAAI,CAAC+F,KAAL,CAAWwE,SAHb,EAIE,KAAI,CAACxE,KAAL,CAAWwC,OAJb,CADI;EAAA,OARD,EAgBJzI,IAhBI,CAgBC,YAAM;EACV,QAAA,KAAI,CAAC+G,QAAL,CAAc;EAAEC,UAAAA,IAAI,EAAE,OAAR;EAAiB9G,UAAAA,KAAK,EAALA;EAAjB,SAAd;;EACA,cAAMA,KAAN;EACD,OAnBI,CAAP;EAoBD,KA9CI,CAAP;EA+CD,GA5HH;;EAAA,SA8HUyK,eA9HV,GA8HE,2BAA0C;EAAA;EAAA;;EACxC,SAAKxD,OAAL,GAAe,IAAInD,OAAJ,CAAY;EACzBhD,MAAAA,EAAE,EAAE,cAAM;EACR,YAAI,CAAC,MAAI,CAAC/D,OAAL,CAAab,UAAlB,EAA8B;EAC5B,iBAAOkD,OAAO,CAACyF,MAAR,CAAe,qBAAf,CAAP;EACD;;EACD,eAAO,MAAI,CAAC9H,OAAL,CAAab,UAAb,CAAwB,MAAI,CAAC6J,KAAL,CAAWwE,SAAnC,CAAP;EACD,OANwB;EAOzB/E,MAAAA,MAAM,EAAE,kBAAM;EACZ,QAAA,MAAI,CAACqB,QAAL,CAAc;EAAEC,UAAAA,IAAI,EAAE;EAAR,SAAd;EACD,OATwB;EAUzB9B,MAAAA,OAAO,EAAE,mBAAM;EACb,QAAA,MAAI,CAAC6B,QAAL,CAAc;EAAEC,UAAAA,IAAI,EAAE;EAAR,SAAd;EACD,OAZwB;EAazB7B,MAAAA,UAAU,EAAE,sBAAM;EAChB,QAAA,MAAI,CAAC4B,QAAL,CAAc;EAAEC,UAAAA,IAAI,EAAE;EAAR,SAAd;EACD,OAfwB;EAgBzB1B,MAAAA,KAAK,yBAAE,KAAKrI,OAAL,CAAaqI,KAAf,kCAAwB,CAhBJ;EAiBzBC,MAAAA,UAAU,EAAE,KAAKtI,OAAL,CAAasI;EAjBA,KAAZ,CAAf;EAoBA,WAAO,KAAK4B,OAAL,CAAavC,OAApB;EACD,GApJH;;EAAA,SAsJUmC,QAtJV,GAsJE,kBAAiB+B,MAAjB,EAA4E;EAAA;;EAC1E,SAAK7C,KAAL,GAAa8C,OAAO,CAAC,KAAK9C,KAAN,EAAa6C,MAAb,CAApB;EAEA5H,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACsF,SAAL,CAAehF,OAAf,CAAuB,UAAAwG,QAAQ,EAAI;EACjCA,QAAAA,QAAQ,CAACyD,gBAAT,CAA0BjC,MAA1B;EACD,OAFD;;EAGA,MAAA,MAAI,CAACwB,aAAL,CAAmBtC,MAAnB,CAA0B,MAA1B;EACD,KALD;EAMD,GA/JH;;EAAA;EAAA;EAkKO,SAAS9B,eAAT,GAKiD;EACtD,SAAO;EACLuC,IAAAA,OAAO,EAAE1O,SADJ;EAEL6M,IAAAA,IAAI,EAAE7M,SAFD;EAGLmG,IAAAA,KAAK,EAAE,IAHF;EAILsD,IAAAA,YAAY,EAAE,CAJT;EAKLiB,IAAAA,QAAQ,EAAE,KALL;EAML/E,IAAAA,MAAM,EAAE,MANH;EAOL+K,IAAAA,SAAS,EAAE1Q;EAPN,GAAP;EASD;;EAED,SAASgP,OAAT,CACE9C,KADF,EAEE6C,MAFF,EAGsD;EACpD,UAAQA,MAAM,CAAC9B,IAAf;EACE,SAAK,QAAL;EACE,0BACKf,KADL;EAEEzC,QAAAA,YAAY,EAAEyC,KAAK,CAACzC,YAAN,GAAqB;EAFrC;;EAIF,SAAK,OAAL;EACE,0BACKyC,KADL;EAEExB,QAAAA,QAAQ,EAAE;EAFZ;;EAIF,SAAK,UAAL;EACE,0BACKwB,KADL;EAEExB,QAAAA,QAAQ,EAAE;EAFZ;;EAIF,SAAK,SAAL;EACE,0BACKwB,KADL;EAEEwC,QAAAA,OAAO,EAAEK,MAAM,CAACL,OAFlB;EAGE7B,QAAAA,IAAI,EAAE7M,SAHR;EAIEmG,QAAAA,KAAK,EAAE,IAJT;EAKEuE,QAAAA,QAAQ,EAAE,KALZ;EAME/E,QAAAA,MAAM,EAAE,SANV;EAOE+K,QAAAA,SAAS,EAAE3B,MAAM,CAAC2B;EAPpB;;EASF,SAAK,SAAL;EACE,0BACKxE,KADL;EAEEW,QAAAA,IAAI,EAAEkC,MAAM,CAAClC,IAFf;EAGE1G,QAAAA,KAAK,EAAE,IAHT;EAIER,QAAAA,MAAM,EAAE,SAJV;EAKE+E,QAAAA,QAAQ,EAAE;EALZ;;EAOF,SAAK,OAAL;EACE,0BACKwB,KADL;EAEEW,QAAAA,IAAI,EAAE7M,SAFR;EAGEmG,QAAAA,KAAK,EAAE4I,MAAM,CAAC5I,KAHhB;EAIEsD,QAAAA,YAAY,EAAEyC,KAAK,CAACzC,YAAN,GAAqB,CAJrC;EAKEiB,QAAAA,QAAQ,EAAE,KALZ;EAME/E,QAAAA,MAAM,EAAE;EANV;;EAQF,SAAK,UAAL;EACE,0BACKuG,KADL,EAEK6C,MAAM,CAAC7C,KAFZ;;EAIF;EACE,aAAOA,KAAP;EAjDJ;EAmDD;;EC5SD;MAEa+E,aAAb;EAAA;;EAIE,2BAAc;EAAA;;EACZ;EACA,UAAKC,SAAL,GAAiB,EAAjB;EACA,UAAKZ,UAAL,GAAkB,CAAlB;EAHY;EAIb;;EARH;;EAAA,SAUEX,KAVF,GAUE,eACEC,MADF,EAEE1M,OAFF,EAGEgJ,KAHF,EAIiD;EAC/C,QAAMiF,QAAQ,GAAG,IAAId,QAAJ,CAAa;EAC5BE,MAAAA,aAAa,EAAE,IADa;EAE5BD,MAAAA,UAAU,EAAE,EAAE,KAAKA,UAFS;EAG5BpN,MAAAA,OAAO,EAAE0M,MAAM,CAACwB,sBAAP,CAA8BlO,OAA9B,CAHmB;EAI5BgJ,MAAAA,KAAK,EAALA,KAJ4B;EAK5BL,MAAAA,cAAc,EAAE3I,OAAO,CAACd,WAAR,GACZwN,MAAM,CAACyB,mBAAP,CAA2BnO,OAAO,CAACd,WAAnC,CADY,GAEZpC;EAPwB,KAAb,CAAjB;EAUA,SAAKgQ,GAAL,CAASmB,QAAT;EAEA,WAAOA,QAAP;EACD,GA5BH;;EAAA,SA8BEnB,GA9BF,GA8BE,aAAImB,QAAJ,EAAkD;EAChD,SAAKD,SAAL,CAAetK,IAAf,CAAoBuK,QAApB;EACA,SAAKlD,MAAL,CAAYkD,QAAZ;EACD,GAjCH;;EAAA,SAmCE1E,MAnCF,GAmCE,gBAAO0E,QAAP,EAAqD;EACnD,SAAKD,SAAL,GAAiB,KAAKA,SAAL,CAAerQ,MAAf,CAAsB,UAAAC,CAAC;EAAA,aAAIA,CAAC,KAAKqQ,QAAV;EAAA,KAAvB,CAAjB;EACAA,IAAAA,QAAQ,CAACvH,MAAT;EACA,SAAKqE,MAAL,CAAYkD,QAAZ;EACD,GAvCH;;EAAA,SAyCEjB,KAzCF,GAyCE,iBAAc;EAAA;;EACZ/I,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACyK,SAAL,CAAenK,OAAf,CAAuB,UAAAoK,QAAQ,EAAI;EACjC,QAAA,MAAI,CAAC1E,MAAL,CAAY0E,QAAZ;EACD,OAFD;EAGD,KAJD;EAKD,GA/CH;;EAAA,SAiDEhB,MAjDF,GAiDE,kBAAqB;EACnB,WAAO,KAAKe,SAAZ;EACD,GAnDH;;EAAA,SAqDEjD,MArDF,GAqDE,gBAAOkD,QAAP,EAAgD;EAAA;;EAC9ChK,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACmB,SAAL,CAAeb,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,QAAAA,QAAQ,CAACqJ,QAAD,CAAR;EACD,OAFD;EAGD,KAJD;EAKD,GA3DH;;EAAA,SA6DE1I,OA7DF,GA6DE,mBAAgB;EACd,SAAK6I,qBAAL;EACD,GA/DH;;EAAA,SAiEEnI,QAjEF,GAiEE,oBAAiB;EACf,SAAKmI,qBAAL;EACD,GAnEH;;EAAA,SAqEEA,qBArEF,GAqEE,iCAAuC;EACrC,QAAMC,eAAe,GAAG,KAAKL,SAAL,CAAerQ,MAAf,CAAsB,UAAAC,CAAC;EAAA,aAAIA,CAAC,CAACoL,KAAF,CAAQxB,QAAZ;EAAA,KAAvB,CAAxB;EACA,WAAOvD,aAAa,CAACV,KAAd,CAAoB;EAAA,aACzB8K,eAAe,CAACrN,MAAhB,CACE,UAAC2G,OAAD,EAAUsG,QAAV;EAAA,eACEtG,OAAO,CAAC5E,IAAR,CAAa;EAAA,iBAAMkL,QAAQ,CAAC1G,QAAT,GAAoBvE,KAApB,CAA0BnG,IAA1B,CAAN;EAAA,SAAb,CADF;EAAA,OADF,EAGEwF,OAAO,CAACC,OAAR,EAHF,CADyB;EAAA,KAApB,CAAP;EAOD,GA9EH;;EAAA;EAAA,EAAmCmC,YAAnC;;ECqCA;MAEa6J,WAAb;EASE,uBAAYtH,MAAZ,EAA4C;EAAA,QAAhCA,MAAgC;EAAhCA,MAAAA,MAAgC,GAAJ,EAAI;EAAA;;EAC1C,SAAKuH,UAAL,GAAkBvH,MAAM,CAACuH,UAAP,IAAqB,IAAIjC,UAAJ,EAAvC;EACA,SAAKe,aAAL,GAAqBrG,MAAM,CAACqG,aAAP,IAAwB,IAAIU,aAAJ,EAA7C;EACA,SAAKpF,cAAL,GAAsB3B,MAAM,CAAC2B,cAAP,IAAyB,EAA/C;EACA,SAAK6F,aAAL,GAAqB,EAArB;EACA,SAAKC,gBAAL,GAAwB,EAAxB;EACD;;EAfH;;EAAA,SAiBEC,KAjBF,GAiBE,iBAAc;EAAA;;EACZ,SAAKC,gBAAL,GAAwB9I,YAAY,CAAClB,SAAb,CAAuB,YAAM;EACnD,UAAIkB,YAAY,CAACL,SAAb,MAA4Ba,aAAa,CAACH,QAAd,EAAhC,EAA0D;EACxD,QAAA,KAAI,CAACmH,aAAL,CAAmB9H,OAAnB;;EACA,QAAA,KAAI,CAACgJ,UAAL,CAAgBhJ,OAAhB;EACD;EACF,KALuB,CAAxB;EAMA,SAAKqJ,iBAAL,GAAyBvI,aAAa,CAAC1B,SAAd,CAAwB,YAAM;EACrD,UAAIkB,YAAY,CAACL,SAAb,MAA4Ba,aAAa,CAACH,QAAd,EAAhC,EAA0D;EACxD,QAAA,KAAI,CAACmH,aAAL,CAAmBpH,QAAnB;;EACA,QAAA,KAAI,CAACsI,UAAL,CAAgBtI,QAAhB;EACD;EACF,KALwB,CAAzB;EAMD,GA9BH;;EAAA,SAgCE4I,OAhCF,GAgCE,mBAAgB;EAAA;;EACd,kCAAKF,gBAAL;EACA,kCAAKC,iBAAL;EACD,GAnCH;;EAAA,SAuCEvO,UAvCF,GAuCE,oBAAW1B,IAAX,EAA2CC,IAA3C,EAAwE;EAAA,2BACpDQ,eAAe,CAACT,IAAD,EAAOC,IAAP,CADqC;EAAA,QAC/DU,OAD+D;;EAEtEA,IAAAA,OAAO,CAACI,QAAR,GAAmB,IAAnB;EACA,WAAO,KAAK6O,UAAL,CAAgBrB,OAAhB,CAAwB5N,OAAxB,EAAiCjD,MAAxC;EACD,GA3CH;;EAAA,SA6CEyS,YA7CF,GA6CE,sBACE/P,QADF,EAEEO,OAFF,EAGqB;EAAA;;EACnB,oCAAO,KAAKiP,UAAL,CAAgB7D,IAAhB,CAA4B3L,QAA5B,EAAsCO,OAAtC,CAAP,qBAAO,sBAAgD0J,KAAhD,CAAsDW,IAA7D;EACD,GAlDH;;EAAA,SAoDEoF,YApDF,GAoDE,sBACEhQ,QADF,EAEE/B,OAFF,EAGEgD,OAHF,EAIS;EACP,QAAMgP,aAAa,GAAGtQ,cAAc,CAACK,QAAD,CAApC;EACA,QAAMkQ,gBAAgB,GAAG,KAAKrC,mBAAL,CAAyBoC,aAAzB,CAAzB;EACA,WAAO,KAAKT,UAAL,CACJ9B,KADI,CACE,IADF,EACQwC,gBADR,EAEJxF,OAFI,CAEIzM,OAFJ,EAEagD,OAFb,CAAP;EAGD,GA9DH;;EAAA,SAgEEkP,aAhEF,GAgEE,uBACEnQ,QADF,EAEEO,OAFF,EAGyC;EAAA;;EACvC,qCAAO,KAAKiP,UAAL,CAAgB7D,IAAhB,CAAoC3L,QAApC,EAA8CO,OAA9C,CAAP,qBAAO,uBAAwD0J,KAA/D;EACD,GArEH;;EAAA,SAyEEmG,aAzEF,GAyEE,uBAAcxQ,IAAd,EAA8CC,IAA9C,EAAyE;EAAA,4BACrDQ,eAAe,CAACT,IAAD,EAAOC,IAAP,CADsC;EAAA,QAChEU,OADgE;;EAEvE,QAAMiP,UAAU,GAAG,KAAKA,UAAxB;EACAtK,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxBgL,MAAAA,UAAU,CAACrB,OAAX,CAAmB5N,OAAnB,EAA4BuE,OAA5B,CAAoC,UAAAtE,KAAK,EAAI;EAC3CgP,QAAAA,UAAU,CAAChF,MAAX,CAAkBhK,KAAlB;EACD,OAFD;EAGD,KAJD;EAKD,GAjFH;;EAAA,SAqFE6P,YArFF,GAqFE,sBAAazQ,IAAb,EAA6CC,IAA7C,EAAiFC,IAAjF,EAAqH;EAAA;;EAAA,4BACxFO,eAAe,CAACT,IAAD,EAAOC,IAAP,EAAaC,IAAb,CADyE;EAAA,QAC5GS,OAD4G;EAAA,QACnGU,OADmG;;EAEnH,QAAMuO,UAAU,GAAG,KAAKA,UAAxB;;EAEA,QAAMc,cAA4B,gBAC7B/P,OAD6B;EAEhCE,MAAAA,MAAM,EAAE;EAFwB,MAAlC;;EAKA,WAAOyE,aAAa,CAACV,KAAd,CAAoB,YAAM;EAC/BgL,MAAAA,UAAU,CAACrB,OAAX,CAAmB5N,OAAnB,EAA4BuE,OAA5B,CAAoC,UAAAtE,KAAK,EAAI;EAC3CA,QAAAA,KAAK,CAAC6K,KAAN;EACD,OAFD;EAGA,aAAO,MAAI,CAACkF,cAAL,CAAoBD,cAApB,EAAoCrP,OAApC,CAAP;EACD,KALM,CAAP;EAMD,GApGH;;EAAA,SA4GEuP,aA5GF,GA4GE,uBACE5Q,IADF,EAEEC,IAFF,EAGEC,IAHF,EAIiB;EAAA;;EAAA,4BACuBO,eAAe,CAACT,IAAD,EAAOC,IAAP,EAAaC,IAAb,CADtC;EAAA,QACRS,OADQ;EAAA;EAAA,QACCgI,aADD,mCACiB,EADjB;;EAGf,QAAI,OAAOA,aAAa,CAACV,MAArB,KAAgC,WAApC,EAAiD;EAC/CU,MAAAA,aAAa,CAACV,MAAd,GAAuB,IAAvB;EACD;;EAED,QAAM4I,QAAQ,GAAGvL,aAAa,CAACV,KAAd,CAAoB;EAAA,aACnC,MAAI,CAACgL,UAAL,CAAgBrB,OAAhB,CAAwB5N,OAAxB,EAAiCmQ,GAAjC,CAAqC,UAAAlQ,KAAK;EAAA,eAAIA,KAAK,CAACmH,MAAN,CAAaY,aAAb,CAAJ;EAAA,OAA1C,CADmC;EAAA,KAApB,CAAjB;EAIA,WAAOjF,OAAO,CAACqN,GAAR,CAAYF,QAAZ,EAAsBzM,IAAtB,CAA2BlG,IAA3B,EAAiCmG,KAAjC,CAAuCnG,IAAvC,CAAP;EACD,GA5HH;;EAAA,SAuIE8S,iBAvIF,GAuIE,2BACEhR,IADF,EAEEC,IAFF,EAGEC,IAHF,EAIiB;EAAA;EAAA;EAAA;;EAAA,4BACYO,eAAe,CAACT,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAD3B;EAAA,QACRS,OADQ;EAAA,QACCU,OADD;;EAGf,QAAMqP,cAA4B,gBAC7B/P,OAD6B;EAEhCE,MAAAA,MAAM,2BAAEF,OAAO,CAACsQ,aAAV,oCAA2B,IAFD;EAGhCjQ,MAAAA,QAAQ,2BAAEL,OAAO,CAACuQ,eAAV,oCAA6B;EAHL,MAAlC;;EAMA,WAAO5L,aAAa,CAACV,KAAd,CAAoB,YAAM;EAC/B,MAAA,MAAI,CAACgL,UAAL,CAAgBrB,OAAhB,CAAwB5N,OAAxB,EAAiCuE,OAAjC,CAAyC,UAAAtE,KAAK,EAAI;EAChDA,QAAAA,KAAK,CAAC0L,UAAN;EACD,OAFD;;EAGA,aAAO,MAAI,CAACqE,cAAL,CAAoBD,cAApB,EAAoCrP,OAApC,CAAP;EACD,KALM,CAAP;EAMD,GA1JH;;EAAA,SAqKEsP,cArKF,GAqKE,wBACE3Q,IADF,EAEEC,IAFF,EAGEC,IAHF,EAIiB;EAAA;;EAAA,4BACYO,eAAe,CAACT,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAD3B;EAAA,QACRS,OADQ;EAAA,QACCU,OADD;;EAGf,QAAMwP,QAAQ,GAAGvL,aAAa,CAACV,KAAd,CAAoB;EAAA,aACnC,MAAI,CAACgL,UAAL,CAAgBrB,OAAhB,CAAwB5N,OAAxB,EAAiCmQ,GAAjC,CAAqC,UAAAlQ,KAAK;EAAA,eAAIA,KAAK,CAAC2L,KAAN,EAAJ;EAAA,OAA1C,CADmC;EAAA,KAApB,CAAjB;EAIA,QAAIvD,OAAO,GAAGtF,OAAO,CAACqN,GAAR,CAAYF,QAAZ,EAAsBzM,IAAtB,CAA2BlG,IAA3B,CAAd;;EAEA,QAAI,EAACmD,OAAD,oBAACA,OAAO,CAAE8P,YAAV,CAAJ,EAA4B;EAC1BnI,MAAAA,OAAO,GAAGA,OAAO,CAAC3E,KAAR,CAAcnG,IAAd,CAAV;EACD;;EAED,WAAO8K,OAAP;EACD,GAvLH;;EAAA,SAqMEoI,UArMF,GAqME,oBACEpR,IADF,EAEEC,IAFF,EAKEC,IALF,EAMkB;EAChB,QAAMmQ,aAAa,GAAGtQ,cAAc,CAACC,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAApC;EACA,QAAMoQ,gBAAgB,GAAG,KAAKrC,mBAAL,CAAyBoC,aAAzB,CAAzB,CAFgB;;EAKhB,QAAI,OAAOC,gBAAgB,CAAC5G,KAAxB,KAAkC,WAAtC,EAAmD;EACjD4G,MAAAA,gBAAgB,CAAC5G,KAAjB,GAAyB,KAAzB;EACD;;EAED,QAAM9I,KAAK,GAAG,KAAKgP,UAAL,CAAgB9B,KAAhB,CAAsB,IAAtB,EAA4BwC,gBAA5B,CAAd;EAEA,WAAO1P,KAAK,CAACkL,aAAN,CAAoBwE,gBAAgB,CAAC5Q,SAArC,IACHkB,KAAK,CAAC2L,KAAN,CAAY+D,gBAAZ,CADG,GAEH5M,OAAO,CAACC,OAAR,CAAgB/C,KAAK,CAACyJ,KAAN,CAAYW,IAA5B,CAFJ;EAGD,GAzNH;;EAAA,SAkOEqG,aAlOF,GAkOE,uBACErR,IADF,EAEEC,IAFF,EAGEC,IAHF,EAIiB;EACf,WAAO,KAAKkR,UAAL,CAAgBpR,IAAhB,EAA6BC,IAA7B,EAA0CC,IAA1C,EACJkE,IADI,CACClG,IADD,EAEJmG,KAFI,CAEEnG,IAFF,CAAP;EAGD,GA1OH;;EAAA,SA4OEoT,eA5OF,GA4OE,2BAAiC;EAAA;;EAC/B,QAAMT,QAAQ,GAAGvL,aAAa,CAACV,KAAd,CAAoB;EAAA,aACnC,MAAI,CAAC8J,aAAL,CAAmBJ,MAAnB,GAA4BwC,GAA5B,CAAgC,UAAAxB,QAAQ;EAAA,eAAIA,QAAQ,CAACvH,MAAT,EAAJ;EAAA,OAAxC,CADmC;EAAA,KAApB,CAAjB;EAGA,WAAOrE,OAAO,CAACqN,GAAR,CAAYF,QAAZ,EAAsBzM,IAAtB,CAA2BlG,IAA3B,EAAiCmG,KAAjC,CAAuCnG,IAAvC,CAAP;EACD,GAjPH;;EAAA,SAmPEuR,qBAnPF,GAmPE,iCAAuC;EACrC,WAAO,KAAK8B,gBAAL,GAAwB9B,qBAAxB,EAAP;EACD,GArPH;;EAAA,SAuPEV,eAvPF,GAuPE,yBAME1N,OANF,EAOkB;EAChB,WAAO,KAAKqN,aAAL,CAAmBZ,KAAnB,CAAyB,IAAzB,EAA+BzM,OAA/B,EAAwCsN,OAAxC,EAAP;EACD,GAhQH;;EAAA,SAkQE6C,aAlQF,GAkQE,yBAA4B;EAC1B,WAAO,KAAK5B,UAAZ;EACD,GApQH;;EAAA,SAsQE2B,gBAtQF,GAsQE,4BAAkC;EAChC,WAAO,KAAK7C,aAAZ;EACD,GAxQH;;EAAA,SA0QE+C,iBA1QF,GA0QE,6BAAoC;EAClC,WAAO,KAAKzH,cAAZ;EACD,GA5QH;;EAAA,SA8QES,iBA9QF,GA8QE,2BAAkBpJ,OAAlB,EAAiD;EAC/C,SAAK2I,cAAL,GAAsB3I,OAAtB;EACD,GAhRH;;EAAA,SAkREqQ,gBAlRF,GAkRE,0BACEtR,QADF,EAEEiB,OAFF,EAGQ;EACN,QAAMiB,MAAM,GAAG,KAAKuN,aAAL,CAAmB9D,IAAnB,CACb,UAAA9M,CAAC;EAAA,aAAI2C,YAAY,CAACxB,QAAD,CAAZ,KAA2BwB,YAAY,CAAC3C,CAAC,CAACmB,QAAH,CAA3C;EAAA,KADY,CAAf;;EAGA,QAAIkC,MAAJ,EAAY;EACVA,MAAAA,MAAM,CAAC0H,cAAP,GAAwB3I,OAAxB;EACD,KAFD,MAEO;EACL,WAAKwO,aAAL,CAAmB9K,IAAnB,CAAwB;EAAE3E,QAAAA,QAAQ,EAARA,QAAF;EAAY4J,QAAAA,cAAc,EAAE3I;EAA5B,OAAxB;EACD;EACF,GA9RH;;EAAA,SAgSE6M,gBAhSF,GAgSE,0BACE9N,QADF,EAEwD;EAAA;;EACtD,WAAOA,QAAQ,4BACX,KAAKyP,aAAL,CAAmB9D,IAAnB,CAAwB,UAAA9M,CAAC;EAAA,aAAIsC,eAAe,CAACnB,QAAD,EAAWnB,CAAC,CAACmB,QAAb,CAAnB;EAAA,KAAzB,CADW,qBACX,sBACI4J,cAFO,GAGX7L,SAHJ;EAID,GAvSH;;EAAA,SAySEwT,mBAzSF,GAySE,6BACEpR,WADF,EAEEc,OAFF,EAGQ;EACN,QAAMiB,MAAM,GAAG,KAAKwN,gBAAL,CAAsB/D,IAAtB,CACb,UAAA9M,CAAC;EAAA,aAAI2C,YAAY,CAACrB,WAAD,CAAZ,KAA8BqB,YAAY,CAAC3C,CAAC,CAACsB,WAAH,CAA9C;EAAA,KADY,CAAf;;EAGA,QAAI+B,MAAJ,EAAY;EACVA,MAAAA,MAAM,CAAC0H,cAAP,GAAwB3I,OAAxB;EACD,KAFD,MAEO;EACL,WAAKyO,gBAAL,CAAsB/K,IAAtB,CAA2B;EAAExE,QAAAA,WAAW,EAAXA,WAAF;EAAeyJ,QAAAA,cAAc,EAAE3I;EAA/B,OAA3B;EACD;EACF,GArTH;;EAAA,SAuTEmO,mBAvTF,GAuTE,6BACEjP,WADF,EAE2D;EAAA;;EACzD,WAAOA,WAAW,4BACd,KAAKuP,gBAAL,CAAsB/D,IAAtB,CAA2B,UAAA9M,CAAC;EAAA,aAC1BsC,eAAe,CAAChB,WAAD,EAActB,CAAC,CAACsB,WAAhB,CADW;EAAA,KAA5B,CADc,qBACd,sBAEGyJ,cAHW,GAId7L,SAJJ;EAKD,GA/TH;;EAAA,SAiUE8P,mBAjUF,GAiUE,6BAA2D5M,OAA3D,EAA2E;EACzE,QAAIA,OAAJ,oBAAIA,OAAO,CAAEuQ,UAAb,EAAyB;EACvB,aAAOvQ,OAAP;EACD;;EACD,wBACK,KAAK2I,cAAL,CAAoB4D,OADzB,EAEK,KAAKM,gBAAL,CAAsB7M,OAAtB,oBAAsBA,OAAO,CAAEjB,QAA/B,CAFL,EAGKiB,OAHL;EAIEuQ,MAAAA,UAAU,EAAE;EAJd;EAMD,GA3UH;;EAAA,SA6UEC,2BA7UF,GA6UE,qCAEExQ,OAFF,EAEkB;EAChB,WAAO,KAAK4M,mBAAL,CAAyB5M,OAAzB,CAAP;EACD,GAjVH;;EAAA,SAmVEkO,sBAnVF,GAmVE,gCACElO,OADF,EAEK;EACH,QAAIA,OAAJ,oBAAIA,OAAO,CAAEuQ,UAAb,EAAyB;EACvB,aAAOvQ,OAAP;EACD;;EACD,wBACK,KAAK2I,cAAL,CAAoBqF,SADzB,EAEK,KAAKG,mBAAL,CAAyBnO,OAAzB,oBAAyBA,OAAO,CAAEd,WAAlC,CAFL,EAGKc,OAHL;EAIEuQ,MAAAA,UAAU,EAAE;EAJd;EAMD,GA/VH;;EAAA,SAiWEvD,KAjWF,GAiWE,iBAAc;EACZ,SAAKuB,UAAL,CAAgBvB,KAAhB;EACA,SAAKK,aAAL,CAAmBL,KAAnB;EACD,GApWH;;EAAA;EAAA;;MCbayD,aAAb;EAAA;;EAkBE,yBACE/D,MADF,EAEE1M,OAFF,EAGE;EAAA;;EACA;EAEA,UAAK0M,MAAL,GAAcA,MAAd;EACA,UAAK1M,OAAL,GAAeA,OAAf;EACA,UAAK0Q,sBAAL,GAA8B,CAA9B;EACA,UAAKC,uBAAL,GAA+B,CAA/B;;EACA,UAAKC,WAAL;;EACA,UAAKhI,UAAL,CAAgB5I,OAAhB;;EARA;EASD;;EA9BH;;EAAA,SAgCY4Q,WAhCZ,GAgCE,uBAA8B;EAC5B,SAAKrH,MAAL,GAAc,KAAKA,MAAL,CAAYsH,IAAZ,CAAiB,IAAjB,CAAd;EACA,SAAKjG,OAAL,GAAe,KAAKA,OAAL,CAAaiG,IAAb,CAAkB,IAAlB,CAAf;EACD,GAnCH;;EAAA,SAqCYhM,WArCZ,GAqCE,uBAA8B;EAC5B,QAAI,KAAKH,SAAL,CAAerI,MAAf,KAA0B,CAA9B,EAAiC;EAC/B,WAAKyU,WAAL;EAEA,WAAKC,YAAL,CAAkBjG,WAAlB,CAA8B,IAA9B;;EAEA,UAAI,KAAKkG,gBAAL,EAAJ,EAA6B;EAC3B,aAAKC,YAAL;EACD;;EAED,WAAKC,YAAL;EACD;EACF,GAjDH;;EAAA,SAmDYpM,aAnDZ,GAmDE,yBAAgC;EAC9B,QAAI,CAAC,KAAKJ,SAAL,CAAerI,MAApB,EAA4B;EAC1B,WAAK8N,OAAL;EACD;EACF,GAvDH;;EAAA,SAyDEgH,eAzDF,GAyDE,2BAA2B;EACzB,WACE,KAAKnR,OAAL,CAAasK,OAAb,KAAyB,KAAzB,IAAkC,CAAC,KAAKyG,YAAL,CAAkB/H,KAAlB,CAAwBgB,aAD7D;EAGD,GA7DH;;EAAA,SA+DEoH,kBA/DF,GA+DE,8BAA8B;EAC5B,WACE,KAAKpR,OAAL,CAAasK,OAAb,KAAyB,KAAzB,IACA,KAAKyG,YAAL,CAAkB/H,KAAlB,CAAwBgB,aAAxB,GAAwC,CADxC,KAEC,KAAKhK,OAAL,CAAaqR,cAAb,KAAgC,QAAhC,IACE,KAAKrR,OAAL,CAAaqR,cAAb,KAAgC,KAAhC,IAAyC,KAAKjR,OAAL,EAH5C,CADF;EAMD,GAtEH;;EAAA,SAwEE4Q,gBAxEF,GAwEE,4BAA4B;EAC1B,WAAO,KAAKG,eAAL,MAA0B,KAAKC,kBAAL,EAAjC;EACD,GA1EH;;EAAA,SA4EEvG,oBA5EF,GA4EE,gCAAgC;EAC9B,WACE,KAAK7K,OAAL,CAAasK,OAAb,KAAyB,KAAzB,KACC,KAAKtK,OAAL,CAAasR,kBAAb,KAAoC,QAApC,IACE,KAAKtR,OAAL,CAAasR,kBAAb,KAAoC,KAApC,IAA6C,KAAKlR,OAAL,EAFhD,CADF;EAKD,GAlFH;;EAAA,SAoFEuK,sBApFF,GAoFE,kCAAkC;EAChC,WACE,KAAK3K,OAAL,CAAasK,OAAb,KAAyB,KAAzB,KACC,KAAKtK,OAAL,CAAauR,oBAAb,KAAsC,QAAtC,IACE,KAAKvR,OAAL,CAAauR,oBAAb,KAAsC,KAAtC,IAA+C,KAAKnR,OAAL,EAFlD,CADF;EAKD,GA1FH;;EAAA,SA4FUoR,mBA5FV,GA4FE,+BAAuC;EACrC,WAAO,KAAKxR,OAAL,CAAasK,OAAb,KAAyB,KAAzB,IAAkC,KAAKlK,OAAL,EAAzC;EACD,GA9FH;;EAAA,SAgGUA,OAhGV,GAgGE,mBAA2B;EACzB,WAAO,KAAK2Q,YAAL,CAAkBtG,aAAlB,CAAgC,KAAKzK,OAAL,CAAa3B,SAA7C,CAAP;EACD,GAlGH;;EAAA,SAoGE8L,OApGF,GAoGE,mBAAgB;EACd,SAAKzF,SAAL,GAAiB,EAAjB;EACA,SAAK+M,WAAL;EACA,SAAKV,YAAL,CAAkB/F,cAAlB,CAAiC,IAAjC;EACD,GAxGH;;EAAA,SA0GEpC,UA1GF,GA0GE,oBACE5I,OADF,EAEQ;EACN,QAAM0R,WAAW,GAAG,KAAK1R,OAAzB;EACA,QAAM2R,SAAS,GAAG,KAAKZ,YAAvB;EAEA,SAAK/Q,OAAL,GAAe,KAAK0M,MAAL,CAAY8D,2BAAZ,CAAwCxQ,OAAxC,CAAf;;EAEA,QACE,OAAO,KAAKA,OAAL,CAAasK,OAApB,KAAgC,WAAhC,IACA,OAAO,KAAKtK,OAAL,CAAasK,OAApB,KAAgC,SAFlC,EAGE;EACA,YAAM,IAAIpI,KAAJ,CAAU,kCAAV,CAAN;EACD,KAXK;;;EAcN,QAAI,CAAC,KAAKlC,OAAL,CAAajB,QAAlB,EAA4B;EAC1B,WAAKiB,OAAL,CAAajB,QAAb,GAAwB2S,WAAW,CAAC3S,QAApC;EACD;;EAED,SAAK+R,WAAL,GAlBM;;EAqBN,QAAI,CAAC,KAAKpM,SAAL,CAAerI,MAApB,EAA4B;EAC1B;EACD,KAvBK;;;EA0BN,QAAI,KAAK0U,YAAL,KAAsBY,SAA1B,EAAqC;EACnC,WAAKC,aAAL;EACA,WAAKV,YAAL;EACA;EACD,KA9BK;;;EAiCN,QAAI,KAAKlR,OAAL,CAAasK,OAAb,KAAyB,KAAzB,IAAkCoH,WAAW,CAACpH,OAAZ,KAAwB,KAA9D,EAAqE;EACnE,WAAKsH,aAAL;EACD,KAnCK;;;EAsCN,QACE,KAAK5R,OAAL,CAAasK,OAAb,KAAyBoH,WAAW,CAACpH,OAArC,IACA,KAAKtK,OAAL,CAAa3B,SAAb,KAA2BqT,WAAW,CAACrT,SAFzC,EAGE;EACA,WAAKwT,kBAAL;EACD,KA3CK;;;EA8CN,QACE,KAAK7R,OAAL,CAAasK,OAAb,KAAyBoH,WAAW,CAACpH,OAArC,IACA,KAAKtK,OAAL,CAAa8R,eAAb,KAAiCJ,WAAW,CAACI,eAF/C,EAGE;EACA,WAAKC,qBAAL;EACD;EACF,GAhKH;;EAAA,SAkKEvH,gBAlKF,GAkKE,4BAAuD;EACrD,WAAO,KAAKwH,aAAZ;EACD,GApKH;;EAAA,SAsKEC,aAtKF,GAsKE,uBACEjS,OADF,EAE+C;EAAA;;EAC7C,WAAO,IAAIqC,OAAJ,CAAY,UAACC,OAAD,EAAUwF,MAAV,EAAqB;EACtC,UAAMoK,WAAW,GAAG,MAAI,CAACvN,SAAL,CAAe,UAAA1D,MAAM,EAAI;EAC3C,YAAI,CAACA,MAAM,CAACZ,UAAZ,EAAwB;EACtB6R,UAAAA,WAAW;;EACX,cAAIjR,MAAM,CAACgB,OAAP,KAAkBjC,OAAlB,oBAAkBA,OAAO,CAAE8P,YAA3B,CAAJ,EAA6C;EAC3ChI,YAAAA,MAAM,CAAC7G,MAAM,CAACgC,KAAR,CAAN;EACD,WAFD,MAEO;EACLX,YAAAA,OAAO,CAACrB,MAAD,CAAP;EACD;EACF;EACF,OATmB,CAApB;EAUD,KAXM,CAAP;EAYD,GArLH;;EAAA,SAuLEkR,eAvLF,GAuLE,2BAA2D;EACzD,WAAO,KAAKpB,YAAZ;EACD,GAzLH;;EAAA,SA2LExH,MA3LF,GA2LE,kBAAe;EACb,SAAKmD,MAAL,CAAYyD,aAAZ,GAA4B5G,MAA5B,CAAmC,KAAKwH,YAAxC;EACD,GA7LH;;EAAA,SA+LEnG,OA/LF,GA+LE,iBACE5K,OADF,EAE+C;EAC7C,WAAO,KAAKkL,KAAL,CAAWlL,OAAX,CAAP;EACD,GAnMH;;EAAA,SAqMYkL,KArMZ,GAqME,eACEC,YADF,EAE+C;EAAA;;EAC7C,WAAO,KAAK8F,YAAL,CAAkB9F,YAAlB,EAAgCpI,IAAhC,CAAqC,YAAM;EAChD,MAAA,MAAI,CAACqP,YAAL;;EACA,aAAO,MAAI,CAACJ,aAAZ;EACD,KAHM,CAAP;EAID,GA5MH;;EAAA,SA8MUJ,aA9MV,GA8ME,yBAA8B;EAC5B,QAAI,KAAKJ,mBAAL,EAAJ,EAAgC;EAC9B,WAAKP,YAAL;EACD;EACF,GAlNH;;EAAA,SAoNUA,YApNV,GAoNE,sBACE9F,YADF,EAEmC;EACjC;EACA,SAAK2F,WAAL,GAFiC;;EAKjC,QAAInJ,OAAwC,GAAG,KAAKoJ,YAAL,CAAkB7F,KAAlB,CAC7C,KAAKlL,OADwC,EAE7CmL,YAF6C,CAA/C;;EAKA,QAAI,EAACA,YAAD,oBAACA,YAAY,CAAE2E,YAAf,CAAJ,EAAiC;EAC/BnI,MAAAA,OAAO,GAAGA,OAAO,CAAC3E,KAAR,CAAcnG,IAAd,CAAV;EACD;;EAED,WAAO8K,OAAP;EACD,GArOH;;EAAA,SAuOUkK,kBAvOV,GAuOE,8BAAmC;EAAA;;EACjC,SAAKQ,iBAAL;;EAEA,QACE1V,QAAQ,IACR,KAAKqV,aAAL,CAAmB5R,OADnB,IAEA,CAAClD,cAAc,CAAC,KAAK8C,OAAL,CAAa3B,SAAd,CAHjB,EAIE;EACA;EACD;;EAED,QAAMiU,IAAI,GAAGnU,cAAc,CACzB,KAAK6T,aAAL,CAAmBhI,aADM,EAEzB,KAAKhK,OAAL,CAAa3B,SAFY,CAA3B,CAXiC;EAiBjC;;EACA,QAAM+D,OAAO,GAAGkQ,IAAI,GAAG,CAAvB;EAEA,SAAKC,cAAL,GAAsBhQ,UAAU,CAAC,YAAM;EACrC,UAAI,CAAC,MAAI,CAACyP,aAAL,CAAmB5R,OAAxB,EAAiC;EAC/B,YAAMoS,UAAU,GAAG,MAAI,CAACR,aAAxB;;EACA,QAAA,MAAI,CAACI,YAAL;;EACA,QAAA,MAAI,CAACrH,MAAL,CAAY;EACVrG,UAAAA,SAAS,EAAE,MAAI,CAAC+N,qBAAL,CAA2BD,UAA3B,EAAuC,MAAI,CAACR,aAA5C,CADD;EAEVlJ,UAAAA,KAAK,EAAE;EAFG,SAAZ;EAID;EACF,KAT+B,EAS7B1G,OAT6B,CAAhC;EAUD,GArQH;;EAAA,SAuQU2P,qBAvQV,GAuQE,iCAAsC;EAAA;;EACpC,SAAKW,oBAAL;;EAEA,QACE/V,QAAQ,IACR,KAAKqD,OAAL,CAAasK,OAAb,KAAyB,KADzB,IAEA,CAACpN,cAAc,CAAC,KAAK8C,OAAL,CAAa8R,eAAd,CAHjB,EAIE;EACA;EACD;;EAED,SAAKa,iBAAL,GAAyBC,WAAW,CAAC,YAAM;EACzC,UACE,MAAI,CAAC5S,OAAL,CAAa6S,2BAAb,IACAhN,YAAY,CAACL,SAAb,EAFF,EAGE;EACA,QAAA,MAAI,CAACyL,YAAL;EACD;EACF,KAPmC,EAOjC,KAAKjR,OAAL,CAAa8R,eAPoB,CAApC;EAQD,GA1RH;;EAAA,SA4RUZ,YA5RV,GA4RE,wBAA6B;EAC3B,SAAKW,kBAAL;EACA,SAAKE,qBAAL;EACD,GA/RH;;EAAA,SAiSUN,WAjSV,GAiSE,uBAA4B;EAC1B,SAAKY,iBAAL;EACA,SAAKK,oBAAL;EACD,GApSH;;EAAA,SAsSUL,iBAtSV,GAsSE,6BAAkC;EAChC7I,IAAAA,YAAY,CAAC,KAAK+I,cAAN,CAAZ;EACA,SAAKA,cAAL,GAAsBzV,SAAtB;EACD,GAzSH;;EAAA,SA2SU4V,oBA3SV,GA2SE,gCAAqC;EACnCI,IAAAA,aAAa,CAAC,KAAKH,iBAAN,CAAb;EACA,SAAKA,iBAAL,GAAyB7V,SAAzB;EACD,GA9SH;;EAAA,SAgTYiW,YAhTZ,GAgTE,sBACEC,SADF,EAEsC;EAAA;;EAAA,QAC5BhK,KAD4B,GAClB,KAAK+H,YADa,CAC5B/H,KAD4B;EAAA,QAE9B3I,UAF8B,GAEP2I,KAFO,CAE9B3I,UAF8B;EAAA,QAElBoC,MAFkB,GAEPuG,KAFO,CAElBvG,MAFkB;EAGpC,QAAIwQ,cAAc,GAAG,KAArB;EACA,QAAIC,iBAAiB,GAAG,KAAxB;EACA,QAAIvJ,IAAJ;EACA,QAAIK,aAAa,GAAGhB,KAAK,CAACgB,aAA1B,CANoC;;EASpC,QAAIgJ,SAAJ,EAAe;EACb3S,MAAAA,UAAU,GAAG,IAAb;;EACA,UAAIoC,MAAM,KAAK,MAAf,EAAuB;EACrBA,QAAAA,MAAM,GAAG,SAAT;EACD;EACF,KAdmC;;;EAiBpC,QACE,KAAKzC,OAAL,CAAamT,gBAAb,IACA,CAACnK,KAAK,CAACkD,eADP,8BAEA,KAAKkH,mBAFL,qBAEA,sBAA0BzQ,SAF1B,CADF,EAIE;EACAgH,MAAAA,IAAI,GAAG,KAAKyJ,mBAAL,CAAyBzJ,IAAhC;EACAK,MAAAA,aAAa,GAAG,KAAKoJ,mBAAL,CAAyBpJ,aAAzC;EACAvH,MAAAA,MAAM,GAAG,KAAK2Q,mBAAL,CAAyB3Q,MAAlC;EACAwQ,MAAAA,cAAc,GAAG,IAAjB;EACD,KATD;EAAA,SAWK,IAAI,KAAKjT,OAAL,CAAaqT,MAAb,IAAuB,OAAOrK,KAAK,CAACW,IAAb,KAAsB,WAAjD,EAA8D;EAAA;;EACjE;EACA,YAAI,KAAKqI,aAAL,IAAsBhJ,KAAK,CAACW,IAAN,+BAAe,KAAK2J,kBAApB,qBAAe,sBAAyB3J,IAAxC,CAA1B,EAAwE;EACtEA,UAAAA,IAAI,GAAG,KAAKqI,aAAL,CAAmBrI,IAA1B;EACD,SAFD,MAEO;EACLA,UAAAA,IAAI,GAAG,KAAK3J,OAAL,CAAaqT,MAAb,CAAoBrK,KAAK,CAACW,IAA1B,CAAP;;EACA,cAAI,KAAK3J,OAAL,CAAa6J,iBAAb,KAAmC,KAAvC,EAA8C;EAAA;;EAC5CF,YAAAA,IAAI,GAAGrI,gBAAgB,wBAAC,KAAK0Q,aAAN,qBAAC,oBAAoBrI,IAArB,EAA2BA,IAA3B,CAAvB;EACD;EACF;EACF,OAVI;EAAA,WAYA;EACHA,UAAAA,IAAI,GAAIX,KAAK,CAACW,IAAd;EACD,SA1CmC;;;EA6CpC,QACE,OAAO,KAAK3J,OAAL,CAAauT,eAApB,KAAwC,WAAxC,IACA,OAAO5J,IAAP,KAAgB,WADhB,IAEAlH,MAAM,KAAK,SAHb,EAIE;EACA,UAAM8Q,eAAe,GACnB,OAAO,KAAKvT,OAAL,CAAauT,eAApB,KAAwC,UAAxC,GACK,KAAKvT,OAAL,CAAauT,eAAd,EADJ,GAEI,KAAKvT,OAAL,CAAauT,eAHnB;;EAIA,UAAI,OAAOA,eAAP,KAA2B,WAA/B,EAA4C;EAC1C9Q,QAAAA,MAAM,GAAG,SAAT;EACAkH,QAAAA,IAAI,GAAG4J,eAAP;EACAL,QAAAA,iBAAiB,GAAG,IAApB;EACD;EACF;;EAED,QAAMjS,MAA8C,gBAC/CuB,cAAc,CAACC,MAAD,CADiC;EAElDkH,MAAAA,IAAI,EAAJA,IAFkD;EAGlDK,MAAAA,aAAa,EAAbA,aAHkD;EAIlD/G,MAAAA,KAAK,EAAE+F,KAAK,CAAC/F,KAJqC;EAKlDmJ,MAAAA,cAAc,EAAEpD,KAAK,CAACmD,gBAL4B;EAMlD5F,MAAAA,YAAY,EAAEyC,KAAK,CAACqD,iBAN8B;EAOlDmH,MAAAA,SAAS,EAAExK,KAAK,CAACkD,eAAN,GAAwB,CAAxB,IAA6BlD,KAAK,CAACmD,gBAAN,GAAyB,CAPf;EAQlDsH,MAAAA,mBAAmB,EACjBzK,KAAK,CAACkD,eAAN,GAAwB,KAAKwE,sBAA7B,IACA1H,KAAK,CAACmD,gBAAN,GAAyB,KAAKwE,uBAVkB;EAWlDtQ,MAAAA,UAAU,EAAVA,UAXkD;EAYlDqT,MAAAA,cAAc,EAAEjR,MAAM,KAAK,OAAX,IAAsBuG,KAAK,CAACgB,aAAN,KAAwB,CAZZ;EAalDkJ,MAAAA,iBAAiB,EAAjBA,iBAbkD;EAclDD,MAAAA,cAAc,EAAdA,cAdkD;EAelDU,MAAAA,cAAc,EAAElR,MAAM,KAAK,OAAX,IAAsBuG,KAAK,CAACgB,aAAN,KAAwB,CAfZ;EAgBlD5J,MAAAA,OAAO,EAAE,KAAKA,OAAL,EAhByC;EAiBlDwK,MAAAA,OAAO,EAAE,KAAKA,OAjBoC;EAkBlDrB,MAAAA,MAAM,EAAE,KAAKA;EAlBqC,MAApD;;EAqBA,WAAOtI,MAAP;EACD,GArYH;;EAAA,SAuYUwR,qBAvYV,GAuYE,+BACED,UADF,EAEEvR,MAFF,EAGW;EAAA,wBACsD,KAAKjB,OAD3D;EAAA,QACD4T,mBADC,iBACDA,mBADC;EAAA,QACoBC,6BADpB,iBACoBA,6BADpB;;EAGT,QAAIrB,UAAU,KAAKvR,MAAnB,EAA2B;EACzB,aAAO,KAAP;EACD;;EAED,QAAI,CAAC2S,mBAAD,IAAwB,CAACC,6BAA7B,EAA4D;EAC1D,aAAO,IAAP;EACD;;EAED,QAAM/S,IAAI,GAAGlF,MAAM,CAACkF,IAAP,CAAYG,MAAZ,CAAb;;EAXS,+BAaA9E,CAbA;EAcP,UAAMI,GAAG,GAAGuE,IAAI,CAAC3E,CAAD,CAAhB;EACA,UAAM2X,OAAO,GAAGtB,UAAU,CAACjW,GAAD,CAAV,KAAoB0E,MAAM,CAAC1E,GAAD,CAA1C;EACA,UAAMwX,UAAU,GAAGH,mBAAH,oBAAGA,mBAAmB,CAAEvS,IAArB,CAA0B,UAAAzD,CAAC;EAAA,eAAIA,CAAC,KAAKrB,GAAV;EAAA,OAA3B,CAAnB;EACA,UAAMyX,UAAU,GAAGH,6BAAH,oBAAGA,6BAA6B,CAAExS,IAA/B,CAAoC,UAAAzD,CAAC;EAAA,eAAIA,CAAC,KAAKrB,GAAV;EAAA,OAArC,CAAnB;;EAEA,UAAIuX,OAAJ,EAAa;EACX,YAAID,6BAA6B,IAAIG,UAArC,EAAiD;EAC/C;EACD;;EAED,YAAI,CAACJ,mBAAD,IAAwBG,UAA5B,EAAwC;EACtC;EAAA,eAAO;EAAP;EACD;EACF;EA3BM;;EAaT,SAAK,IAAI5X,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2E,IAAI,CAACzE,MAAzB,EAAiCF,CAAC,EAAlC,EAAsC;EAAA,uBAA7BA,CAA6B;;EAAA,+BAQhC;EARgC;EAerC;;EAED,WAAO,KAAP;EACD,GAzaH;;EAAA,SA2aUiW,YA3aV,GA2aE,sBAAqBY,SAArB,EAAgD;EAC9C,QAAM/R,MAAM,GAAG,KAAK8R,YAAL,CAAkBC,SAAlB,CAAf,CAD8C;;EAI9C,SAAKM,kBAAL,GAA0B,KAAKvC,YAAL,CAAkB/H,KAA5C,CAJ8C;;EAO9C,QAAI,CAACrH,mBAAmB,CAACV,MAAD,EAAS,KAAK+Q,aAAd,CAAxB,EAAsD;EACpD,WAAKA,aAAL,GAAqB/Q,MAArB;EACD;EACF,GArbH;;EAAA,SAubU6P,WAvbV,GAubE,uBAA4B;EAC1B,QAAMa,SAAS,GAAG,KAAKZ,YAAvB;EAEA,QAAMxR,KAAK,GAAG,KAAKmN,MAAL,CACXyD,aADW,GAEX1D,KAFW,CAGV,KAAKC,MAHK,EAIV,KAAK1M,OAJK,CAAd;;EAOA,QAAIT,KAAK,KAAKoS,SAAd,EAAyB;EACvB;EACD;;EAED,SAAKyB,mBAAL,GAA2B,KAAKpB,aAAhC;EACA,SAAKjB,YAAL,GAAoBxR,KAApB;EACA,SAAKmR,sBAAL,GAA8BnR,KAAK,CAACyJ,KAAN,CAAYkD,eAA1C;EACA,SAAKyE,uBAAL,GAA+BpR,KAAK,CAACyJ,KAAN,CAAYmD,gBAA3C;EAEA,QAAM6G,SAAS,GAAGrB,SAAS,GACvB,KAAKH,mBAAL,EADuB,GAEvB,KAAKR,gBAAL,EAFJ;EAIA,SAAKoB,YAAL,CAAkBY,SAAlB;;EAEA,QAAI,CAAC,KAAKjO,YAAL,EAAL,EAA0B;EACxB;EACD;;EAED4M,IAAAA,SAAS,QAAT,YAAAA,SAAS,CAAE3G,cAAX,CAA0B,IAA1B;EACA,SAAK+F,YAAL,CAAkBjG,WAAlB,CAA8B,IAA9B;;EAEA,QACE,KAAK2H,qBAAL,CAA2B,KAAKW,mBAAhC,EAAqD,KAAKpB,aAA1D,CADF,EAEE;EACA,WAAKjH,MAAL,CAAY;EAAErG,QAAAA,SAAS,EAAE;EAAb,OAAZ;EACD;EACF,GA5dH;;EAAA,SA8dEqH,aA9dF,GA8dE,uBAAcF,MAAd,EAAmD;EACjD;EACA,QAAM2G,UAAU,GAAG,KAAKR,aAAxB;EACA,SAAKI,YAAL;EACA,QAAMJ,aAAa,GAAG,KAAKA,aAA3B,CAJiD;;EAOjD,SAAKd,YAAL,GAPiD;;EAUjD,QAAIsB,UAAU,KAAKR,aAAnB,EAAkC;EAChC;EACD,KAZgD;;;EAejD,QAAMiC,aAA4B,GAAG,EAArC;;EAEA,QAAIpI,MAAM,CAAC9B,IAAP,KAAgB,SAApB,EAA+B;EAC7BkK,MAAAA,aAAa,CAACtG,SAAd,GAA0B,IAA1B;EACD,KAFD,MAEO,IAAI9B,MAAM,CAAC9B,IAAP,KAAgB,OAApB,EAA6B;EAClCkK,MAAAA,aAAa,CAACpG,OAAd,GAAwB,IAAxB;EACD;;EAED,QAAI,KAAK4E,qBAAL,CAA2BD,UAA3B,EAAuCR,aAAvC,CAAJ,EAA2D;EACzDiC,MAAAA,aAAa,CAACvP,SAAd,GAA0B,IAA1B;EACD;;EAED,SAAKqG,MAAL,CAAYkJ,aAAZ;EACD,GA1fH;;EAAA,SA4fUlJ,MA5fV,GA4fE,gBAAekJ,aAAf,EAAmD;EAAA;;EACjDhQ,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB;EACA,UAAI0Q,aAAa,CAACtG,SAAlB,EAA6B;EAC3B,QAAA,MAAI,CAAC3N,OAAL,CAAa2N,SAAb,oBAAA,MAAI,CAAC3N,OAAL,CAAa2N,SAAb,CAAyB,MAAI,CAACqE,aAAL,CAAmBrI,IAA5C;EACA,QAAA,MAAI,CAAC3J,OAAL,CAAa4N,SAAb,oBAAA,MAAI,CAAC5N,OAAL,CAAa4N,SAAb,CAAyB,MAAI,CAACoE,aAAL,CAAmBrI,IAA5C,EAAmD,IAAnD;EACD,OAHD,MAGO,IAAIsK,aAAa,CAACpG,OAAlB,EAA2B;EAChC,QAAA,MAAI,CAAC7N,OAAL,CAAa6N,OAAb,oBAAA,MAAI,CAAC7N,OAAL,CAAa6N,OAAb,CAAuB,MAAI,CAACmE,aAAL,CAAmB/O,KAA1C;EACA,QAAA,MAAI,CAACjD,OAAL,CAAa4N,SAAb,oBAAA,MAAI,CAAC5N,OAAL,CAAa4N,SAAb,CAAyB9Q,SAAzB,EAAoC,MAAI,CAACkV,aAAL,CAAmB/O,KAAvD;EACD,OARuB;;;EAWxB,UAAIgR,aAAa,CAACvP,SAAlB,EAA6B;EAC3B,QAAA,MAAI,CAACA,SAAL,CAAeb,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,UAAAA,QAAQ,CAAC,MAAI,CAACoN,aAAN,CAAR;EACD,SAFD;EAGD,OAfuB;;;EAkBxB,UAAIiC,aAAa,CAACnL,KAAlB,EAAyB;EACvB,QAAA,MAAI,CAAC4D,MAAL,CAAYyD,aAAZ,GAA4BpF,MAA5B,CAAmC,MAAI,CAACgG,YAAxC;EACD;EACF,KArBD;EAsBD,GAnhBH;;EAAA;EAAA,EAKUtM,YALV;;MC9BayP,eAAb;EAAA;;EAME,2BAAYxH,MAAZ,EAAiCH,OAAjC,EAAmE;EAAA;;EACjE;EAEA,UAAKG,MAAL,GAAcA,MAAd;EACA,UAAKH,OAAL,GAAeA,OAAO,IAAI,EAA1B;EACA,UAAKtL,MAAL,GAAc,EAAd;EACA,UAAK4H,SAAL,GAAiB,EAAjB,CANiE;;EASjE,UAAKsL,eAAL;;EATiE;EAUlE;;EAhBH;;EAAA,SAkBYtP,WAlBZ,GAkBE,uBAA8B;EAAA;;EAC5B,QAAI,KAAKH,SAAL,CAAerI,MAAf,KAA0B,CAA9B,EAAiC;EAC/B,WAAKwM,SAAL,CAAehF,OAAf,CAAuB,UAAAwG,QAAQ,EAAI;EACjCA,QAAAA,QAAQ,CAAC1F,SAAT,CAAmB,UAAA1D,MAAM,EAAI;EAC3B,UAAA,MAAI,CAACmT,QAAL,CAAc/J,QAAd,EAAwBpJ,MAAxB;EACD,SAFD;EAGD,OAJD;EAKD;EACF,GA1BH;;EAAA,SA4BY6D,aA5BZ,GA4BE,yBAAgC;EAC9B,QAAI,CAAC,KAAKJ,SAAL,CAAerI,MAApB,EAA4B;EAC1B,WAAK8N,OAAL;EACD;EACF,GAhCH;;EAAA,SAkCEA,OAlCF,GAkCE,mBAAgB;EACd,SAAKzF,SAAL,GAAiB,EAAjB;EACA,SAAKmE,SAAL,CAAehF,OAAf,CAAuB,UAAAwG,QAAQ,EAAI;EACjCA,MAAAA,QAAQ,CAACF,OAAT;EACD,KAFD;EAGD,GAvCH;;EAAA,SAyCEkK,UAzCF,GAyCE,oBAAW9H,OAAX,EAAkD;EAChD,SAAKA,OAAL,GAAeA,OAAf;EACA,SAAK4H,eAAL;EACD,GA5CH;;EAAA,SA8CE3J,gBA9CF,GA8CE,4BAA0C;EACxC,WAAO,KAAKvJ,MAAZ;EACD,GAhDH;;EAAA,SAkDUkT,eAlDV,GAkDE,2BAAgC;EAAA;;EAC9B,QAAIG,cAAc,GAAG,KAArB;EAEA,QAAMC,aAAa,GAAG,KAAK1L,SAA3B;EACA,QAAM2L,YAAY,GAAG,KAAKjI,OAAL,CAAakD,GAAb,CAAiB,UAACzP,OAAD,EAAU7D,CAAV,EAAgB;EACpD,UAAIkO,QAAmC,GAAGkK,aAAa,CAACpY,CAAD,CAAvD;;EAEA,UAAM8S,gBAAgB,GAAG,MAAI,CAACvC,MAAL,CAAY8D,2BAAZ,CAAwCxQ,OAAxC,CAAzB;;EACA,UAAMF,MAAM,GAAGC,iBAAiB,CAACkP,gBAAD,CAAhC;EACAA,MAAAA,gBAAgB,CAAChP,SAAjB,GAA6BH,MAAM,CAACmP,gBAAgB,CAAClQ,QAAlB,CAAnC;;EAEA,UACE,CAACsL,QAAD,IACAA,QAAQ,CAAC8H,eAAT,GAA2BlS,SAA3B,KAAyCgP,gBAAgB,CAAChP,SAF5D,EAGE;EACAqU,QAAAA,cAAc,GAAG,IAAjB;EACAjK,QAAAA,QAAQ,GAAGkK,aAAa,CAAC7J,IAAd,CACT,UAAA9M,CAAC;EAAA,iBAAIA,CAAC,CAACuU,eAAF,GAAoBlS,SAApB,KAAkCgP,gBAAgB,CAAChP,SAAvD;EAAA,SADQ,CAAX;EAGD;;EAED,UAAIoK,QAAJ,EAAc;EACZA,QAAAA,QAAQ,CAACzB,UAAT,CAAoBqG,gBAApB;EACA,eAAO5E,QAAP;EACD;;EAED,aAAO,IAAIoG,aAAJ,CAAkB,MAAI,CAAC/D,MAAvB,EAA+BuC,gBAA/B,CAAP;EACD,KAvBoB,CAArB;;EAyBA,QAAIsF,aAAa,CAAClY,MAAd,KAAyBmY,YAAY,CAACnY,MAAtC,IAAgD,CAACiY,cAArD,EAAqE;EACnE;EACD;;EAED,SAAKzL,SAAL,GAAiB2L,YAAjB;EACA,SAAKvT,MAAL,GAAcuT,YAAY,CAAC/E,GAAb,CAAiB,UAAApF,QAAQ;EAAA,aAAIA,QAAQ,CAACG,gBAAT,EAAJ;EAAA,KAAzB,CAAd;;EAEA,QAAI,CAAC,KAAK9F,SAAL,CAAerI,MAApB,EAA4B;EAC1B;EACD;;EAEDmB,IAAAA,UAAU,CAAC+W,aAAD,EAAgBC,YAAhB,CAAV,CAAwC3Q,OAAxC,CAAgD,UAAAwG,QAAQ,EAAI;EAC1DA,MAAAA,QAAQ,CAACF,OAAT;EACD,KAFD;EAIA3M,IAAAA,UAAU,CAACgX,YAAD,EAAeD,aAAf,CAAV,CAAwC1Q,OAAxC,CAAgD,UAAAwG,QAAQ,EAAI;EAC1DA,MAAAA,QAAQ,CAAC1F,SAAT,CAAmB,UAAA1D,MAAM,EAAI;EAC3B,QAAA,MAAI,CAACmT,QAAL,CAAc/J,QAAd,EAAwBpJ,MAAxB;EACD,OAFD;EAGD,KAJD;EAMA,SAAK8J,MAAL;EACD,GArGH;;EAAA,SAuGUqJ,QAvGV,GAuGE,kBAAiB/J,QAAjB,EAA0CpJ,MAA1C,EAA6E;EAC3E,QAAMjD,KAAK,GAAG,KAAK6K,SAAL,CAAehL,OAAf,CAAuBwM,QAAvB,CAAd;;EACA,QAAIrM,KAAK,KAAK,CAAC,CAAf,EAAkB;EAChB,WAAKiD,MAAL,GAAcnD,SAAS,CAAC,KAAKmD,MAAN,EAAcjD,KAAd,EAAqBiD,MAArB,CAAvB;EACA,WAAK8J,MAAL;EACD;EACF,GA7GH;;EAAA,SA+GUA,MA/GV,GA+GE,kBAAuB;EAAA;;EACrB9G,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB,MAAA,MAAI,CAACmB,SAAL,CAAeb,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,QAAAA,QAAQ,CAAC,MAAI,CAAC3D,MAAN,CAAR;EACD,OAFD;EAGD,KAJD;EAKD,GArHH;;EAAA;EAAA,EAAqCwD,YAArC;;ECNO,SAASgQ,qBAAT,GAIuD;EAC5D,SAAO;EACL/I,IAAAA,OAAO,EAAE,iBAAAF,OAAO,EAAI;EAClBA,MAAAA,OAAO,CAACD,OAAR,GAAkB,YAAM;EAAA;;EACtB,YAAMmJ,SAAS,4BAAGlJ,OAAO,CAACL,YAAX,+CAAG,sBAAsBS,IAAzB,qBAAG,uBAA4B8I,SAA9C;EACA,YAAMpJ,SAAS,GAAGoJ,SAAH,oBAAGA,SAAS,CAAEpJ,SAA7B;EACA,YAAMqJ,kBAAkB,GAAG,CAAAD,SAAS,QAAT,YAAAA,SAAS,CAAEE,SAAX,MAAyB,SAApD;EACA,YAAMC,sBAAsB,GAAG,CAAAH,SAAS,QAAT,YAAAA,SAAS,CAAEE,SAAX,MAAyB,UAAxD;EACA,YAAME,QAAQ,GAAG,wBAAAtJ,OAAO,CAACxC,KAAR,CAAcW,IAAd,yCAAoBoL,KAApB,KAA6B,EAA9C;EACA,YAAMC,aAAa,GAAG,yBAAAxJ,OAAO,CAACxC,KAAR,CAAcW,IAAd,0CAAoBsL,UAApB,KAAkC,EAAxD;EACA,YAAIC,aAAa,GAAGF,aAApB,CAPsB;;EAUtB,YAAMhW,OAAO,GACXwM,OAAO,CAACxL,OAAR,CAAgBhB,OAAhB,IAA4B;EAAA,iBAAMqD,OAAO,CAACyF,MAAR,CAAe,iBAAf,CAAN;EAAA,SAD9B,CAVsB;;;EActB,YAAMqN,SAAS,GAAG,SAAZA,SAAY,CAChBJ,KADgB,EAEhBK,MAFgB,EAGhBC,KAHgB,EAIhBC,QAJgB,EAKO;EACvB,cAAI,OAAOD,KAAP,KAAiB,WAAjB,IAAgC,CAACD,MAAjC,IAA2CL,KAAK,CAAC1Y,MAArD,EAA6D;EAC3D,mBAAOgG,OAAO,CAACC,OAAR,CAAgByS,KAAhB,CAAP;EACD;;EAED,cAAM1J,cAAoC,GAAG;EAC3CtM,YAAAA,QAAQ,EAAEyM,OAAO,CAACzM,QADyB;EAE3CuM,YAAAA,SAAS,EAAE+J;EAFgC,WAA7C;EAKA,cAAInO,QAAJ;EACA,cAAMqO,aAAa,GAAGvW,OAAO,CAACqM,cAAD,CAA7B;;EACA,cAAKkK,aAAD,CAAuB7O,MAA3B,EAAmC;EACjCQ,YAAAA,QAAQ,GAAIqO,aAAD,CAAuB7O,MAAlC;EACD;;EAED,cAAMiB,OAAO,GAAGtF,OAAO,CAACC,OAAR,CAAgBiT,aAAhB,EAA+BxS,IAA/B,CAAoC,UAAAyS,IAAI,EAAI;EAC1DN,YAAAA,aAAa,GAAGI,QAAQ,IACnBD,KADmB,SACTH,aADS,cAEhBA,aAFgB,GAEDG,KAFC,EAAxB;EAGA,mBAAOC,QAAQ,IAAIE,IAAJ,SAAaT,KAAb,cAA0BA,KAA1B,GAAiCS,IAAjC,EAAf;EACD,WALe,CAAhB;;EAMA,cAAItO,QAAJ,EAAc;EACXS,YAAAA,OAAD,CAAiBjB,MAAjB,GAA0BQ,QAA1B;EACD;;EACD,iBAAOS,OAAP;EACD,SA/BD;;EAiCA,YAAIA,OAAJ,CA/CsB;;EAkDtB,YAAI,CAACmN,QAAQ,CAACzY,MAAd,EAAsB;EACpBsL,UAAAA,OAAO,GAAGwN,SAAS,CAAC,EAAD,CAAnB;EACD,SAFD;EAAA,aAKK,IAAIR,kBAAJ,EAAwB;EAC3B,gBAAMS,MAAM,GAAG,OAAO9J,SAAP,KAAqB,WAApC;EACA,gBAAM+J,KAAK,GAAGD,MAAM,GAChB9J,SADgB,GAEhBmK,gBAAgB,CAACjK,OAAO,CAACxL,OAAT,EAAkB8U,QAAlB,CAFpB;EAGAnN,YAAAA,OAAO,GAAGwN,SAAS,CAACL,QAAD,EAAWM,MAAX,EAAmBC,KAAnB,CAAnB;EACD,WANI;EAAA,eASA,IAAIR,sBAAJ,EAA4B;EAC/B,kBAAMO,OAAM,GAAG,OAAO9J,SAAP,KAAqB,WAApC;;EACA,kBAAM+J,MAAK,GAAGD,OAAM,GAChB9J,SADgB,GAEhBoK,oBAAoB,CAAClK,OAAO,CAACxL,OAAT,EAAkB8U,QAAlB,CAFxB;;EAGAnN,cAAAA,OAAO,GAAGwN,SAAS,CAACL,QAAD,EAAWM,OAAX,EAAmBC,MAAnB,EAA0B,IAA1B,CAAnB;EACD,aANI;EAAA,iBASA;EAAA;EACHH,kBAAAA,aAAa,GAAG,EAAhB;EAEA,sBAAME,MAAM,GAAG,OAAO5J,OAAO,CAACxL,OAAR,CAAgByV,gBAAvB,KAA4C,WAA3D,CAHG;;EAMH9N,kBAAAA,OAAO,GAAGwN,SAAS,CAAC,EAAD,EAAKC,MAAL,EAAaJ,aAAa,CAAC,CAAD,CAA1B,CAAnB,CANG;;EAAA,6CASM7Y,CATN;EAUDwL,oBAAAA,OAAO,GAAGA,OAAO,CAAC5E,IAAR,CAAa,UAAAgS,KAAK,EAAI;EAC9B,0BAAMM,KAAK,GAAGD,MAAM,GAChBJ,aAAa,CAAC7Y,CAAD,CADG,GAEhBsZ,gBAAgB,CAACjK,OAAO,CAACxL,OAAT,EAAkB+U,KAAlB,CAFpB;EAGA,6BAAOI,SAAS,CAACJ,KAAD,EAAQK,MAAR,EAAgBC,KAAhB,CAAhB;EACD,qBALS,CAAV;EAVC;;EASH,uBAAK,IAAIlZ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2Y,QAAQ,CAACzY,MAA7B,EAAqCF,CAAC,EAAtC,EAA0C;EAAA,0BAAjCA,CAAiC;EAOzC;EAhBE;EAiBJ;;EAED,YAAMwZ,YAAY,GAAGhO,OAAO,CAAC5E,IAAR,CAAa,UAAAgS,KAAK;EAAA,iBAAK;EAC1CA,YAAAA,KAAK,EAALA,KAD0C;EAE1CE,YAAAA,UAAU,EAAEC;EAF8B,WAAL;EAAA,SAAlB,CAArB;;EAIA,YAAKvN,OAAD,CAAiBjB,MAArB,EAA6B;EAC1BiP,UAAAA,YAAD,CAAsBjP,MAAtB,GAAgCiB,OAAD,CAAiBjB,MAAhD;EACD;;EACD,eAAOiP,YAAP;EACD,OApGD;EAqGD;EAvGI,GAAP;EAyGD;EAEM,SAASF,gBAAT,CACLzV,OADK,EAEL+U,KAFK,EAGgB;EACrB,SAAO/U,OAAO,CAACyV,gBAAf,oBAAOzV,OAAO,CAACyV,gBAAR,CAA2BV,KAAK,CAACA,KAAK,CAAC1Y,MAAN,GAAe,CAAhB,CAAhC,EAAoD0Y,KAApD,CAAP;EACD;EAEM,SAASW,oBAAT,CACL1V,OADK,EAEL+U,KAFK,EAGgB;EACrB,SAAO/U,OAAO,CAAC0V,oBAAf,oBAAO1V,OAAO,CAAC0V,oBAAR,CAA+BX,KAAK,CAAC,CAAD,CAApC,EAAyCA,KAAzC,CAAP;EACD;EAED;;;;;EAIO,SAASa,WAAT,CACL5V,OADK,EAEL+U,KAFK,EAGgB;EACrB,MAAI/U,OAAO,CAACyV,gBAAR,IAA4BnY,KAAK,CAACC,OAAN,CAAcwX,KAAd,CAAhC,EAAsD;EACpD,QAAMc,aAAa,GAAGJ,gBAAgB,CAACzV,OAAD,EAAU+U,KAAV,CAAtC;EACA,WACE,OAAOc,aAAP,KAAyB,WAAzB,IACAA,aAAa,KAAK,IADlB,IAEAA,aAAa,KAAK,KAHpB;EAKD;EACF;EAED;;;;;EAIO,SAASC,eAAT,CACL9V,OADK,EAEL+U,KAFK,EAGgB;EACrB,MAAI/U,OAAO,CAAC0V,oBAAR,IAAgCpY,KAAK,CAACC,OAAN,CAAcwX,KAAd,CAApC,EAA0D;EACxD,QAAMgB,iBAAiB,GAAGL,oBAAoB,CAAC1V,OAAD,EAAU+U,KAAV,CAA9C;EACA,WACE,OAAOgB,iBAAP,KAA6B,WAA7B,IACAA,iBAAiB,KAAK,IADtB,IAEAA,iBAAiB,KAAK,KAHxB;EAKD;EACF;;MChJYC,qBAAb;EAAA;;EAWE;EAKA;EAGA;EAKA;EACA,iCACEtJ,MADF,EAEE1M,OAFF,EAQE;EAAA,WACA,0BAAM0M,MAAN,EAAc1M,OAAd,CADA;EAED;;EAnCH;;EAAA,SAqCY4Q,WArCZ,GAqCE,uBAA8B;EAC5B,6BAAMA,WAAN;;EACA,SAAKqF,aAAL,GAAqB,KAAKA,aAAL,CAAmBpF,IAAnB,CAAwB,IAAxB,CAArB;EACA,SAAKqF,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBrF,IAAvB,CAA4B,IAA5B,CAAzB;EACD,GAzCH;;EAAA,SA2CEjI,UA3CF,GA2CE,oBACE5I,OADF,EAOQ;EACN,6BAAM4I,UAAN,yBACK5I,OADL;EAEEyL,MAAAA,QAAQ,EAAEgJ,qBAAqB;EAFjC;EAID,GAvDH;;EAAA,SAyDEwB,aAzDF,GAyDE,uBACEjW,OADF,EAEuD;EACrD,WAAO,KAAKkL,KAAL,CAAW;EAChBE,MAAAA,aAAa,EAAE,IADC;EAEhB0E,MAAAA,YAAY,EAAE9P,OAAF,oBAAEA,OAAO,CAAE8P,YAFP;EAGhBlE,MAAAA,IAAI,EAAE;EACJ8I,QAAAA,SAAS,EAAE;EAAEE,UAAAA,SAAS,EAAE,SAAb;EAAwBtJ,UAAAA,SAAS,EAAEtL,OAAF,oBAAEA,OAAO,CAAEsL;EAA5C;EADP;EAHU,KAAX,CAAP;EAOD,GAnEH;;EAAA,SAqEE4K,iBArEF,GAqEE,2BACElW,OADF,EAEuD;EACrD,WAAO,KAAKkL,KAAL,CAAW;EAChBE,MAAAA,aAAa,EAAE,IADC;EAEhB0E,MAAAA,YAAY,EAAE9P,OAAF,oBAAEA,OAAO,CAAE8P,YAFP;EAGhBlE,MAAAA,IAAI,EAAE;EACJ8I,QAAAA,SAAS,EAAE;EAAEE,UAAAA,SAAS,EAAE,UAAb;EAAyBtJ,UAAAA,SAAS,EAAEtL,OAAF,oBAAEA,OAAO,CAAEsL;EAA7C;EADP;EAHU,KAAX,CAAP;EAOD,GA/EH;;EAAA,SAiFYyH,YAjFZ,GAiFE,sBACEC,SADF,EAE8C;EAAA;;EAAA,gCAC1B,KAAKb,eAAL,EAD0B;EAAA,QACpCnJ,KADoC,yBACpCA,KADoC;;EAE5C,QAAM/H,MAAM,4BAAS8R,YAAT,YAAsBC,SAAtB,CAAZ;;EACA,wBACK/R,MADL;EAEEgV,MAAAA,aAAa,EAAE,KAAKA,aAFtB;EAGEC,MAAAA,iBAAiB,EAAE,KAAKA,iBAH1B;EAIEN,MAAAA,WAAW,EAAEA,WAAW,CAAC,KAAK5V,OAAN,kBAAeiB,MAAM,CAAC0I,IAAtB,qBAAe,aAAaoL,KAA5B,CAJ1B;EAKEe,MAAAA,eAAe,EAAEA,eAAe,CAAC,KAAK9V,OAAN,mBAAeiB,MAAM,CAAC0I,IAAtB,qBAAe,cAAaoL,KAA5B,CALlC;EAMEJ,MAAAA,kBAAkB,EAChB3L,KAAK,CAAC3I,UAAN,IAAoB,qBAAA2I,KAAK,CAAC2C,SAAN,+DAAiB+I,SAAjB,2CAA4BE,SAA5B,MAA0C,SAPlE;EAQEC,MAAAA,sBAAsB,EACpB7L,KAAK,CAAC3I,UAAN,IACA,sBAAA2I,KAAK,CAAC2C,SAAN,gEAAiB+I,SAAjB,2CAA4BE,SAA5B,MAA0C;EAV9C;EAYD,GAlGH;;EAAA;EAAA,EAKUnE,aALV;;ECIA;MAEa0F,gBAAb;EAAA;;EAoBE,4BACEzJ,MADF,EAEE1M,OAFF,EAGE;EAAA;;EACA;EAEA,UAAK0M,MAAL,GAAcA,MAAd;;EACA,UAAK9D,UAAL,CAAgB5I,OAAhB;;EACA,UAAK4Q,WAAL;;EACA,UAAKwB,YAAL;;EANA;EAOD;;EA9BH;;EAAA,SAgCYxB,WAhCZ,GAgCE,uBAA8B;EAC5B,SAAKwF,MAAL,GAAc,KAAKA,MAAL,CAAYvF,IAAZ,CAAiB,IAAjB,CAAd;EACA,SAAKzG,KAAL,GAAa,KAAKA,KAAL,CAAWyG,IAAX,CAAgB,IAAhB,CAAb;EACD,GAnCH;;EAAA,SAqCEjI,UArCF,GAqCE,oBACE5I,OADF,EAEE;EACA,SAAKA,OAAL,GAAe,KAAK0M,MAAL,CAAYwB,sBAAZ,CAAmClO,OAAnC,CAAf;EACD,GAzCH;;EAAA,SA2CY8E,aA3CZ,GA2CE,yBAAgC;EAC9B,QAAI,CAAC,KAAKJ,SAAL,CAAerI,MAApB,EAA4B;EAAA;;EAC1B,oCAAKga,eAAL,2CAAsBrL,cAAtB,CAAqC,IAArC;EACD;EACF,GA/CH;;EAAA,SAiDE8C,gBAjDF,GAiDE,0BAAiBjC,MAAjB,EAA4E;EAC1E,SAAKuG,YAAL,GAD0E;;EAI1E,QAAM6B,aAA4B,GAAG;EACnCvP,MAAAA,SAAS,EAAE;EADwB,KAArC;;EAIA,QAAImH,MAAM,CAAC9B,IAAP,KAAgB,SAApB,EAA+B;EAC7BkK,MAAAA,aAAa,CAACtG,SAAd,GAA0B,IAA1B;EACD,KAFD,MAEO,IAAI9B,MAAM,CAAC9B,IAAP,KAAgB,OAApB,EAA6B;EAClCkK,MAAAA,aAAa,CAACpG,OAAd,GAAwB,IAAxB;EACD;;EAED,SAAK9C,MAAL,CAAYkJ,aAAZ;EACD,GAhEH;;EAAA,SAkEEzJ,gBAlEF,GAkEE,4BAKE;EACA,WAAO,KAAKwH,aAAZ;EACD,GAzEH;;EAAA,SA2EE5H,KA3EF,GA2EE,iBAAc;EACZ,SAAKiM,eAAL,GAAuBvZ,SAAvB;EACA,SAAKsV,YAAL;EACA,SAAKrH,MAAL,CAAY;EAAErG,MAAAA,SAAS,EAAE;EAAb,KAAZ;EACD,GA/EH;;EAAA,SAiFE0R,MAjFF,GAiFE,gBACE5I,SADF,EAEExN,OAFF,EAGkB;EAChB,SAAKsW,aAAL,GAAqBtW,OAArB;;EAEA,QAAI,KAAKqW,eAAT,EAA0B;EACxB,WAAKA,eAAL,CAAqBrL,cAArB,CAAoC,IAApC;EACD;;EAED,SAAKqL,eAAL,GAAuB,KAAK3J,MAAL,CAAYwD,gBAAZ,GAA+BzD,KAA/B,CAAqC,KAAKC,MAA1C,eAClB,KAAK1M,OADa;EAErBwN,MAAAA,SAAS,EAAEA,SAAF,WAAEA,SAAF,GAAe,KAAKxN,OAAL,CAAawN;EAFhB,OAAvB;EAKA,SAAK6I,eAAL,CAAqBvL,WAArB,CAAiC,IAAjC;EAEA,WAAO,KAAKuL,eAAL,CAAqB/I,OAArB,EAAP;EACD,GAnGH;;EAAA,SAqGU8E,YArGV,GAqGE,wBAA6B;EAC3B,QAAMpJ,KAAK,GAAG,KAAKqN,eAAL,GACV,KAAKA,eAAL,CAAqBrN,KADX,GAEVC,eAAe,EAFnB;EAIA,SAAK+I,aAAL,gBACKhJ,KADL,EAEKxG,cAAc,CAACwG,KAAK,CAACvG,MAAP,CAFnB;EAGE2T,MAAAA,MAAM,EAAE,KAAKA,MAHf;EAIEhM,MAAAA,KAAK,EAAE,KAAKA;EAJd;EAMD,GAhHH;;EAAA,SAkHUW,MAlHV,GAkHE,gBAAe/K,OAAf,EAAuC;EAAA;;EACrCiE,IAAAA,aAAa,CAACV,KAAd,CAAoB,YAAM;EACxB;EACA,UAAI,MAAI,CAAC+S,aAAT,EAAwB;EACtB,YAAItW,OAAO,CAAC2N,SAAZ,EAAuB;EACrB,UAAA,MAAI,CAAC2I,aAAL,CAAmB3I,SAAnB,oBAAA,MAAI,CAAC2I,aAAL,CAAmB3I,SAAnB,CACE,MAAI,CAACqE,aAAL,CAAmBrI,IADrB,EAEE,MAAI,CAACqI,aAAL,CAAmBxE,SAFrB,EAGE,MAAI,CAACwE,aAAL,CAAmBxG,OAHrB;EAKA,UAAA,MAAI,CAAC8K,aAAL,CAAmB1I,SAAnB,oBAAA,MAAI,CAAC0I,aAAL,CAAmB1I,SAAnB,CACE,MAAI,CAACoE,aAAL,CAAmBrI,IADrB,EAEE,IAFF,EAGE,MAAI,CAACqI,aAAL,CAAmBxE,SAHrB,EAIE,MAAI,CAACwE,aAAL,CAAmBxG,OAJrB;EAMD,SAZD,MAYO,IAAIxL,OAAO,CAAC6N,OAAZ,EAAqB;EAC1B,UAAA,MAAI,CAACyI,aAAL,CAAmBzI,OAAnB,oBAAA,MAAI,CAACyI,aAAL,CAAmBzI,OAAnB,CACE,MAAI,CAACmE,aAAL,CAAmB/O,KADrB,EAEE,MAAI,CAAC+O,aAAL,CAAmBxE,SAFrB,EAGE,MAAI,CAACwE,aAAL,CAAmBxG,OAHrB;EAKA,UAAA,MAAI,CAAC8K,aAAL,CAAmB1I,SAAnB,oBAAA,MAAI,CAAC0I,aAAL,CAAmB1I,SAAnB,CACE9Q,SADF,EAEE,MAAI,CAACkV,aAAL,CAAmB/O,KAFrB,EAGE,MAAI,CAAC+O,aAAL,CAAmBxE,SAHrB,EAIE,MAAI,CAACwE,aAAL,CAAmBxG,OAJrB;EAMD;EACF,OA5BuB;;;EA+BxB,UAAIxL,OAAO,CAAC0E,SAAZ,EAAuB;EACrB,QAAA,MAAI,CAACA,SAAL,CAAeb,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,UAAAA,QAAQ,CAAC,MAAI,CAACoN,aAAN,CAAR;EACD,SAFD;EAGD;EACF,KApCD;EAqCD,GAxJH;;EAAA;EAAA,EAKUvN,YALV;;ECrBA,IAAM8R,kBAAkB,GAAI,YAAM;EAChC,MAAM/K,OAAO,gBAAGgL,KAAK,CAACC,aAAN,CAA6C3Z,SAA7C,CAAhB;;EACA,MAAI,OAAOF,MAAP,KAAkB,WAAtB,EAAmC;EACjC;EACAA,IAAAA,MAAM,CAAC8Z,uBAAP,GAAiClL,OAAjC;EACD;;EACD,SAAOA,OAAP;EACD,CAP0B,EAA3B;;EASA,SAASmL,qBAAT,GAAiC;EAAA;;EAC/B,SAAO,OAAO/Z,MAAP,KAAkB,WAAlB;EAAA,UAEFA,MAAM,CAAC8Z,uBAFL,mBAIGH,kBAJH,GAKHA,kBALJ;EAMD;;MAEYK,cAAc,GAAG,SAAjBA,cAAiB,GAAM;EAClC,MAAMC,WAAW,GAAGL,KAAK,CAACM,UAAN,CAAiBH,qBAAqB,EAAtC,CAApB;;EAEA,MAAI,CAACE,WAAL,EAAkB;EAChB,UAAM,IAAI3U,KAAJ,CAAU,wDAAV,CAAN;EACD;;EAED,SAAO2U,WAAP;EACD;MAMYE,mBAAuD,GAAG,SAA1DA,mBAA0D,QAGjE;EAAA,MAFJrK,MAEI,SAFJA,MAEI;EAAA,MADJsK,QACI,SADJA,QACI;EACJR,EAAAA,KAAK,CAACS,SAAN,CAAgB,YAAM;EACpBvK,IAAAA,MAAM,CAACgC,KAAP;EACA,WAAO,YAAM;EACXhC,MAAAA,MAAM,CAACmC,OAAP;EACD,KAFD;EAGD,GALD,EAKG,CAACnC,MAAD,CALH;EAOA,MAAMwK,OAAO,GAAGP,qBAAqB,EAArC;EAEA,sBAAO,oBAAC,OAAD,CAAS,QAAT;EAAkB,IAAA,KAAK,EAAEjK;EAAzB,KAAkCsK,QAAlC,CAAP;EACD;;ECxCD,SAASG,WAAT,GAAqD;EACnD,MAAIC,QAAO,GAAG,KAAd;EACA,SAAO;EACLC,IAAAA,UAAU,EAAE,sBAAM;EAChBD,MAAAA,QAAO,GAAG,KAAV;EACD,KAHI;EAILhN,IAAAA,KAAK,EAAE,iBAAM;EACXgN,MAAAA,QAAO,GAAG,IAAV;EACD,KANI;EAOLA,IAAAA,OAAO,EAAE,mBAAM;EACb,aAAOA,QAAP;EACD;EATI,GAAP;EAWD;;EAED,IAAME,8BAA8B,gBAAGd,KAAK,CAACC,aAAN,CAAoBU,WAAW,EAA/B,CAAvC;;MAIaI,0BAA0B,GAAG,SAA7BA,0BAA6B;EAAA,SACxCf,KAAK,CAACM,UAAN,CAAiBQ,8BAAjB,CADwC;EAAA;;MAW7BE,uBAA+D,GAAG,SAAlEA,uBAAkE,OAEzE;EAAA,MADJR,QACI,QADJA,QACI;EACJ,MAAM7Z,KAAK,GAAGqZ,KAAK,CAACiB,OAAN,CAAc;EAAA,WAAMN,WAAW,EAAjB;EAAA,GAAd,EAAmC,EAAnC,CAAd;EACA,sBACE,oBAAC,8BAAD,CAAgC,QAAhC;EAAyC,IAAA,KAAK,EAAEha;EAAhD,KACG,OAAO6Z,QAAP,KAAoB,UAApB,GACIA,QAAD,CAAuB7Z,KAAvB,CADH,GAEG6Z,QAHN,CADF;EAOD;;ECvCM,SAASU,aAAT,CACL/Y,IADK,EAELC,IAFK,EAGG;EACR,MAAMiY,WAAW,GAAGD,cAAc,EAAlC;;EADQ,yBAEUxX,eAAe,CAACT,IAAD,EAAOC,IAAP,CAFzB;EAAA,MAEDU,OAFC;;EAAA,wBAG4BkX,KAAK,CAACmB,QAAN,CAClCd,WAAW,CAACxW,UAAZ,CAAuBf,OAAvB,CADkC,CAH5B;EAAA,MAGDe,UAHC;EAAA,MAGWuX,aAHX;;EAOR,MAAMC,UAAU,GAAGrB,KAAK,CAACsB,MAAN,CAAaxY,OAAb,CAAnB;EACAuY,EAAAA,UAAU,CAACE,OAAX,GAAqBzY,OAArB;EACA,MAAM0Y,aAAa,GAAGxB,KAAK,CAACsB,MAAN,CAAazX,UAAb,CAAtB;EACA2X,EAAAA,aAAa,CAACD,OAAd,GAAwB1X,UAAxB;EAEAmW,EAAAA,KAAK,CAACS,SAAN,CACE;EAAA,WACEJ,WAAW,CAAC1G,aAAZ,GAA4BxL,SAA5B,CACEV,aAAa,CAACN,UAAd,CAAyB,YAAM;EAC7B,UAAMsU,aAAa,GAAGpB,WAAW,CAACxW,UAAZ,CAAuBwX,UAAU,CAACE,OAAlC,CAAtB;;EACA,UAAIC,aAAa,CAACD,OAAd,KAA0BE,aAA9B,EAA6C;EAC3CL,QAAAA,aAAa,CAACK,aAAD,CAAb;EACD;EACF,KALD,CADF,CADF;EAAA,GADF,EAUE,CAACpB,WAAD,CAVF;EAaA,SAAOxW,UAAP;EACD;;ECcM,SAAS6X,WAAT,CAMLvZ,IANK,EAULC,IAVK,EAaLC,IAbK,EAcmD;EACxD,MAAMmB,OAAO,GAAGf,iBAAiB,CAACN,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAAjC;EACA,MAAMgY,WAAW,GAAGD,cAAc,EAAlC,CAFwD;;EAKxD,MAAMuB,WAAW,GAAG3B,KAAK,CAACsB,MAAN,EAApB;EAGA,MAAMzN,QAAQ,GACZ8N,WAAW,CAACJ,OAAZ,IAAuB,IAAI5B,gBAAJ,CAAqBU,WAArB,EAAkC7W,OAAlC,CADzB;EAEAmY,EAAAA,WAAW,CAACJ,OAAZ,GAAsB1N,QAAtB,CAVwD;;EAaxD,MAAIA,QAAQ,CAACtF,YAAT,EAAJ,EAA6B;EAC3BsF,IAAAA,QAAQ,CAACzB,UAAT,CAAoB5I,OAApB;EACD;;EAfuD,wBAiBdwW,KAAK,CAACmB,QAAN,CAAe;EAAA,WACvDtN,QAAQ,CAACG,gBAAT,EADuD;EAAA,GAAf,CAjBc;EAAA,MAiBjDwH,aAjBiD;EAAA,MAiBlCoG,gBAjBkC;;;EAsBxD5B,EAAAA,KAAK,CAACS,SAAN,CACE;EAAA,WACE5M,QAAQ,CAAC1F,SAAT,CACEV,aAAa,CAACN,UAAd,CACE,UACE1C,MADF,EAEK;EACH;EACA,UAAIoJ,QAAQ,CAACtF,YAAT,EAAJ,EAA6B;EAC3BqT,QAAAA,gBAAgB,CAACnX,MAAD,CAAhB;EACD;EACF,KARH,CADF,CADF;EAAA,GADF,EAcE,CAACoJ,QAAD,CAdF;EAiBA,MAAM+L,MAAM,GAAGI,KAAK,CAAC6B,WAAN,CAGb,UAAC7K,SAAD,EAAY8I,aAAZ,EAA8B;EAC5BjM,IAAAA,QAAQ,CAAC+L,MAAT,CAAgB5I,SAAhB,EAA2B8I,aAA3B,EAA0CtT,KAA1C,CAAgDnG,IAAhD;EACD,GALY,EAMb,CAACwN,QAAD,CANa,CAAf;;EASA,MAAI2H,aAAa,CAAC/O,KAAd,IAAuBoH,QAAQ,CAACrK,OAAT,CAAiBsY,gBAA5C,EAA8D;EAC5D,UAAMtG,aAAa,CAAC/O,KAApB;EACD;;EAED,sBAAY+O,aAAZ;EAA2BoE,IAAAA,MAAM,EAANA,MAA3B;EAAmCmC,IAAAA,WAAW,EAAEvG,aAAa,CAACoE;EAA9D;EACD;;EClHM,SAASoC,YAAT,CACLxY,OADK,EAELyY,QAFK,EAGL;EACA,MAAM5B,WAAW,GAAGD,cAAc,EAAlC;EACA,MAAM8B,kBAAkB,GAAGnB,0BAA0B,EAArD;EACA,MAAMtI,gBAAgB,GAAG4H,WAAW,CAACrG,2BAAZ,CAAwCxQ,OAAxC,CAAzB,CAHA;;EAMA,MAAIiP,gBAAgB,CAACpB,OAArB,EAA8B;EAC5BoB,IAAAA,gBAAgB,CAACpB,OAAjB,GAA2B5J,aAAa,CAACN,UAAd,CACzBsL,gBAAgB,CAACpB,OADQ,CAA3B;EAGD;;EAED,MAAIoB,gBAAgB,CAACtB,SAArB,EAAgC;EAC9BsB,IAAAA,gBAAgB,CAACtB,SAAjB,GAA6B1J,aAAa,CAACN,UAAd,CAC3BsL,gBAAgB,CAACtB,SADU,CAA7B;EAGD;;EAED,MAAIsB,gBAAgB,CAACrB,SAArB,EAAgC;EAC9BqB,IAAAA,gBAAgB,CAACrB,SAAjB,GAA6B3J,aAAa,CAACN,UAAd,CAC3BsL,gBAAgB,CAACrB,SADU,CAA7B;EAGD,GAtBD;EAyBA;;;EACA,MACEqB,gBAAgB,CAAC0J,QAAjB,IACA,OAAO1J,gBAAgB,CAAC5Q,SAAxB,KAAsC,QAFxC,EAGE;EACA4Q,IAAAA,gBAAgB,CAAC5Q,SAAjB,GAA6B,IAA7B;EACD,GA/BD;;;EAkCA,MAAM8Z,WAAW,GAAG3B,KAAK,CAACsB,MAAN,EAApB;EACA,MAAMzN,QAAQ,GACZ8N,WAAW,CAACJ,OAAZ,IAAuB,IAAIU,QAAJ,CAAa5B,WAAb,EAA0B5H,gBAA1B,CADzB;EAEAkJ,EAAAA,WAAW,CAACJ,OAAZ,GAAsB1N,QAAtB,CArCA;;EAwCA,MAAIA,QAAQ,CAACtF,YAAT,EAAJ,EAA6B;EAC3BsF,IAAAA,QAAQ,CAACzB,UAAT,CAAoBqG,gBAApB;EACD;;EA1CD,wBA4C0CuH,KAAK,CAACmB,QAAN,CAAe;EAAA,WACvDtN,QAAQ,CAACG,gBAAT,EADuD;EAAA,GAAf,CA5C1C;EAAA,MA4COwH,aA5CP;EAAA,MA4CsBoG,gBA5CtB;;;EAiDA5B,EAAAA,KAAK,CAACS,SAAN,CAAgB,YAAM;EACpByB,IAAAA,kBAAkB,CAACrB,UAAnB;EACA,WAAOhN,QAAQ,CAAC1F,SAAT,CAAmBV,aAAa,CAACN,UAAd,CAAyByU,gBAAzB,CAAnB,CAAP;EACD,GAHD,EAGG,CAAC/N,QAAD,EAAWqO,kBAAX,CAHH,EAjDA;;EAuDA,MAAIrO,QAAQ,CAACrK,OAAT,CAAiB2Y,QAAjB,IAA6BtO,QAAQ,CAACrK,OAAT,CAAiBsY,gBAAlD,EAAoE;EAClE,QACEtG,aAAa,CAAC/P,OAAd,IACA,CAACyW,kBAAkB,CAACtB,OAAnB,EADD,IAEA,CAAC/M,QAAQ,CAAC8H,eAAT,GAA2B9R,UAA3B,EAHH,EAIE;EACA,YAAM2R,aAAa,CAAC/O,KAApB;EACD;;EAED,QAAIoH,QAAQ,CAACrK,OAAT,CAAiB2Y,QAAjB,IAA6B3G,aAAa,CAACtP,SAA/C,EAA0D;EACxDgW,MAAAA,kBAAkB,CAACrB,UAAnB;EACA,UAAMnF,WAAW,GAAG7H,QAAQ,CAAC1F,SAAT,EAApB;EACA,YAAM0F,QAAQ,CAACO,OAAT,GAAmBgO,OAAnB,CAA2B1G,WAA3B,CAAN;EACD;EACF;;EAED,SAAOF,aAAP;EACD;;ECnDM,SAAS6G,QAAT,CACLla,IADK,EAELC,IAFK,EAKLC,IALK,EAM0B;EAC/B,MAAMmQ,aAAa,GAAGtQ,cAAc,CAACC,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAApC;EACA,SAAO2Z,YAAY,CAACxJ,aAAD,EAAgByB,aAAhB,CAAnB;EACD;;EClCM,SAASqI,UAAT,CAAoBvM,OAApB,EAAkE;EACvE,MAAMsK,WAAW,GAAGD,cAAc,EAAlC,CADuE;;EAIvE,MAAMuB,WAAW,GAAG3B,KAAK,CAACsB,MAAN,EAApB;EACA,MAAMzN,QAAQ,GACZ8N,WAAW,CAACJ,OAAZ,IAAuB,IAAI7D,eAAJ,CAAoB2C,WAApB,EAAiCtK,OAAjC,CADzB;EAEA4L,EAAAA,WAAW,CAACJ,OAAZ,GAAsB1N,QAAtB,CAPuE;;EAUvE,MAAIA,QAAQ,CAACtF,YAAT,EAAJ,EAA6B;EAC3BsF,IAAAA,QAAQ,CAACgK,UAAT,CAAoB9H,OAApB;EACD;;EAZsE,wBAc7BiK,KAAK,CAACmB,QAAN,CAAe;EAAA,WACvDtN,QAAQ,CAACG,gBAAT,EADuD;EAAA,GAAf,CAd6B;EAAA,MAchEwH,aAdgE;EAAA,MAcjDoG,gBAdiD;;;EAmBvE5B,EAAAA,KAAK,CAACS,SAAN,CACE;EAAA,WAAM5M,QAAQ,CAAC1F,SAAT,CAAmBV,aAAa,CAACN,UAAd,CAAyByU,gBAAzB,CAAnB,CAAN;EAAA,GADF,EAEE,CAAC/N,QAAD,CAFF;EAKA,SAAO2H,aAAP;EACD;;ECCM,SAAS+G,gBAAT,CACLpa,IADK,EAELC,IAFK,EAKLC,IALK,EAMkC;EACvC,MAAMmB,OAAO,GAAGtB,cAAc,CAACC,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAA9B;EACA,SAAO2Z,YAAY,CACjBxY,OADiB,EAEjBgW,qBAFiB,CAAnB;EAID;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}